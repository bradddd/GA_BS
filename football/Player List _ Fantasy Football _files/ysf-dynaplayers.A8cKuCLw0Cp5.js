
YUI.add("ysf-xhr",function(Y){var XHR_proto,XHR_static;function YSFXHR(config){YSFXHR.superclass.constructor.apply(this,arguments);}
YSFXHR.NAME="xhr";YSFXHR.ATTRS={"autoRegister":{"value":true},"isRegistered":{"value":false},"eventType":{"value":"click","valueFn":function(){if(this.get("form")){return"submit";}}},"form":{"value":null},"el":{"value":null},"callbackObj":{"value":{"success":function(cId,response){Y.log("Connection "+cId+": success","info","Y.Fantasy.XHR");},"failure":function(cId,response){Y.log("Connection "+cId+": failure","error","Y.Fantasy.XHR");}}},"triggers":{"value":[],"setter":function(triggers,fullname){var triggersAr=[];if(Y.Lang.isArray(triggers)||triggers instanceof Y.NodeList){Y.each(triggers,function(thisTrigger){var triggerNode=Y.one(thisTrigger);if(triggerNode){triggersAr.push(triggerNode);}});}
else{if(triggers===Y){triggersAr.push(triggers);}
else{triggersAr.push(Y.one(triggers));}}
return triggersAr;}},"triggerDelegate":{value:null},"triggerHandler":{"value":function(e,obj){var connection;try{if(obj.get("form")){connection=obj.submit(this);}
else{connection=obj.fetch(this);}
if(connection){e.preventDefault();}}catch(err){Y.log(err);}}},"activeConnection":{value:null},"lastHash":{value:null}};XHR_proto={initializer:function(cfg){if(this.get("autoRegister")){this.register();}},destructor:function(){this.detachTriggers();},detachTriggers:function(){var triggers=this.get("triggers");Y.Array.each(triggers,function(trigger){trigger.detach("ysfxhr|*");});},register:function(){if(this.get("form")){this.set("triggers",this.get("form"));}
var triggers=this.get("triggers"),delegate=this.get("triggerDelegate"),eventType=this.get("eventType"),eventTypes=Y.Lang.isArray(eventType)?eventType:[eventType],self=this;Y.Array.each(eventTypes,function(evt){Y.Array.each(triggers,function(trigger){if(Y.Lang.isString(delegate)){trigger.delegate("ysfxhr|"+evt,self.get("triggerHandler"),delegate,null,self);}
else{trigger.on("ysfxhr|"+evt,self.get("triggerHandler"),null,self);}});});this.set("isRegistered",true);},parseResponse:function(cId,resp){var obj=null;if(resp.responseText){try{obj=Y.JSON.parse(resp.responseText);this.checkForErrors(cId,obj);obj.contentIsNew=this.checkContentHash(cId,obj);}
catch(e){Y.log("Error parsing ajax","error","ysf-xhr");Y.log(e);if(Y.Af&&Y.Af.Beacon){Y.Af.Beacon.error('ysf-xhr',{'connection':cId},{code:'parseError',message:'error parsing XHR JSON response'});}}}
return obj;},_errorMap:{},hasErrors:function(cId){return this._errorMap[cId].hasErrors||false;},getErrors:function(cId){var errors=null;if(this.hasErrors(cId)){errors=this._errorMap[cId].errors;}
return errors;},checkForErrors:function(cId,obj){var errorRef={"hasErrors":false,"errors":[]},x;this._errorMap[cId]=errorRef;if(obj&&Y.Lang.isArray(obj.errors)&&obj.errors.length){for(x=0;x<obj.errors.length;x+=1){if(obj.errors[x].code){errorRef.hasErrors=true;errorRef.errors.push(obj.errors[x]);}}}
return errorRef;},checkContentHash:function(cId,obj){var oldHash=this.get("lastHash"),newHash=obj.hash,canCompare=true,updateHash=true;if(!Y.Lang.isString(oldHash)||oldHash===""){canCompare=false;}
if(canCompare&&(!Y.Lang.isString(newHash)||newHash==="")){canCompare=false;updateHash=false;}
if(updateHash){this.set("lastHash",newHash);}
return canCompare?oldHash!==newHash:true;},fetch:function(el,href,sync){var self=this,connection,fetchHref=Y.Lang.isString(href)?href:el.getAttribute("href"),cfg={};if(el){el.addClass("loading");}
if(sync){cfg.sync=true;}
connection=Y.Fantasy.XHR.fetchFromAjaxWithCfg(cfg,fetchHref,this.get("callbackObj"),el,self,true);this.set("activeConnection",connection);return connection;},submit:function(form){var self=this,connection;connection=Y.Fantasy.XHR.submitToAjax(form,this.get("callbackObj"),null,self);this.set("activeConnection",connection);return connection;}};XHR_static={transactionMap:[],addTransaction:function(connection,el){var n=el?Y.one(el):null;Y.Fantasy.XHR.transactionMap[connection.id]=n;},getTransaction:function(connection){var cId=Y.Lang.isObject(connection)?connection.id:connection;return Y.Fantasy.XHR.transactionMap[cId];},fetchFromAjaxWithCfg:function(cfg,href,callback,triggerEl,context,asGet){var XHRMethod=asGet?"GET":"POST",base,query,queryobj,hrefFrags,queryAr,connection,x,io_cfg=Y.Lang.isObject(cfg)?cfg:{};io_cfg.headers=io_cfg.headers||{};io_cfg.headers["Ajax-Request"]="true";try{if(XHRMethod==="GET"){base=href.replace(/(\#.*)$/,"");query=null;base+=(/\?/.test(base))?"&":"?";base+="ajaxrequest=1";}
else{hrefFrags=href.split("?");base=hrefFrags[0];query=null;if(hrefFrags.length>1){queryAr=[];for(x=1;x<hrefFrags.length;x+=1){queryAr[queryAr.length]=hrefFrags[x];}
query=queryAr.join(encodeURIComponent("?"));queryobj=Y.QueryString.parse(query);io_cfg.data=io_cfg.data||{};io_cfg.data=Y.QueryString.stringify(Y.merge(io_cfg.data,queryobj),{arrayKey:true});}}
io_cfg.method=XHRMethod;io_cfg.on=callback;if(context){io_cfg.context=context;}
connection=Y.io(base,io_cfg);Y.Fantasy.XHR.addTransaction(connection,triggerEl);callback.connections=callback.connections||{};callback.connections[connection.id]=connection;if(triggerEl){callback.triggered=callback.triggered||{};callback.triggered[connection.id]=triggerEl;}
if(callback.onConnect&&typeof callback.onConnect==="function"){callback.onConnect(connection,href);}
return connection;}catch(e){Y.log(e,"error","fetchFromAjax");return false;}},fetchFromAjax:function(href,callback,triggerEl,context,asGet){return Y.Fantasy.XHR.fetchFromAjaxWithCfg(null,href,callback,triggerEl,context,asGet);},submitToAjax:function(formref,callback,validationFunc,context,triggerEl){var form=Y.one(formref),isValid=true,connection,io_cfg={"headers":{"Ajax-Request":"true"},"form":{"id":form},"method":"POST"};if(Y.Lang.isFunction(validationFunc)){isValid=validationFunc(form);}
if(isValid){try{io_cfg.on=callback;if(context){io_cfg.context=context;}
connection=Y.io(form.getAttribute("action"),io_cfg);callback.connections=callback.connections||{};callback.connections[connection.id]=connection;callback.submitted_forms=callback.submitted_forms||{};callback.submitted_forms[connection.id]=form;Y.Fantasy.XHR.addTransaction(connection,form);return connection;}
catch(e){Y.log(e,"error","submitToAjax");return false;}}
else{return false;}}};Y.extend(YSFXHR,Y.Base,XHR_proto,XHR_static);Y.namespace("Fantasy");Y.Fantasy.XHR=YSFXHR;},"0.2",{"requires":["io-base","io-form","base","node","json-parse","querystring-stringify-simple","querystring-parse-simple"]});YUI.add("hover-intent",function(Y){var isFunction=Y.Lang.isFunction,noop=function(){},conf={processArgs:function(args){var i=isFunction(args[2])?2:3;return(isFunction(args[i]))?args.splice(i,1)[0]:noop;},on:function(node,sub,notifier,filter){var args=(sub.args)?sub.args.slice():[],myZone;args.unshift(null);sub._detach=node[(filter)?"delegate":"on"]({mouseenter:function(e){e.phase='over';myZone=Y.later(250,window,function(){notifier.fire(e);},[],false);},mouseleave:function(e){var thisObj=sub.context||this;args[0]=e;e.type='hover-intent';e.phase='out';if(myZone){myZone.cancel();}
sub._extra.apply(thisObj,args);}},filter);},detach:function(node,sub,notifier){sub._detach.detach();}};conf.delegate=conf.on;conf.detachDelegate=conf.detach;Y.Event.define("hover-intent",conf);},"1.0",{"requires":['node','event','base']});YUI.add("ysf-flyout-select",function(Y){function YSFFlyoutSelect(cfg){YSFFlyoutSelect.superclass.constructor.apply(this,arguments);}
YSFFlyoutSelect.Name="ysf-flyout-select";YSFFlyoutSelect.ATTRS={"el":{"value":null,"setter":function(val,fullname){return Y.one(val);}},"form":{"value":null},"li_classes":{"value":"Navitem Grid-u Block"},"ul_classes":{"value":"Nav-v Nav-plain Dropdown Nowrap No-p Box-shadow-botend Bdr-radius Bdr"},"use_link":{"value":false},"title_changed_listener":{"value":false}};Y.extend(YSFFlyoutSelect,Y.Base,{initializer:function(cfg){this.set("form",this.get("el").one("form"));var title=this.get("el").getAttribute("title"),title_change=this.get("el").getAttribute("title-change");this.get("form").hide();var trigger=this.get("el").one(".flyout_trigger");if(this.get("el").hasAttribute("title-change")){if(title_change==="false"){title_change=false;}
this.set("title_changed_listener",title_change);}
if(this.get("title_changed_listener")!==false){this.setTitleCurrentSelected();Y.on(this.get("title_changed_listener"),Y.bind(this.setTitleCurrentSelected,this));}else{trigger.one(".flyout-title").set("text",title);}
trigger.on(["hover-intent","click","focus"],Y.bind(this.triggerHandler,this));},triggerHandler:function(e){var self=this,select=this.get("el").one("select"),formVal=select.getAttribute("name"),globalClasses="",globalAttrs="";e.preventDefault();if(this.get("el").one(".Nav-flyout")!==null){return;}
var html='<div class="Nav-flyout">';html+='<div class="pointer-top"></div>';html+='<ul class="'+this.get("ul_classes")+'">';if(select.hasAttribute("data-target")){globalClasses+="yfa-dynamic ";globalAttrs+='data-target="'+select.getAttribute("data-target")+'" ';}
this.get("form").all("option").each(function(opt){var classes="Navtarget",attrs="";if(opt.hasAttribute("selected")){classes+=" Fw-b";}
if(opt.hasAttribute("accent")){classes+=" F-accent";}else{classes+=" F-shade";}
if(opt.hasAttribute("data-name")){classes+=" "+opt.getAttribute("data-name");}
html+='<li class="'+self.get("li_classes")+'">';if(opt.get("value").indexOf("http")!==-1){globalAttrs="";globalClasses="";}
if(self.get("use_link")||self.get("el").hasAttribute("data-uselink")){html+='<a class="'+classes+' '+globalClasses+'"href="'+opt.get("value")+'" '+attrs+' '+globalAttrs+'>'+opt.get("text")+'</a>';}else{html+='<a class="'+classes+' '+globalClasses+'"href="?'+formVal+'='+opt.get("value")+'" '+attrs+' '+globalAttrs+'>'+opt.get("text")+'</a>';}
html+='</li>';});html+="</ul>";html+='</div>';this.get("el").append(html);var flyout=this.get("el").one(".Nav-flyout"),flyoutWidth=parseInt(flyout.getComputedStyle("width"),10),parentWidth=parseInt(this.get("el").getComputedStyle("width"),10);if(flyoutWidth>parentWidth){flyout.setStyle("left",-1*((flyoutWidth-parentWidth)/2));}
Y.later(1,this,Y.bind(this.closeTrigger,this),document.body,null,this.get("el"));},closeTrigger:function(e){var self=this;var eventHandle=self.get("el").one(".Nav-flyout").ancestor().on(["mouseleave","focusoutside"],function(e){if(self.get("el").one(".Nav-flyout")!==null){self.get("el").one(".Nav-flyout").remove();}
eventHandle.detach();});},setTitleCurrentSelected:function(e){var select=this.get("el").one("select"),selected=select.all("option").item(select.get("selectedIndex")),trigger=this.get("el").one(".flyout_trigger"),firstOpt=select.one("option");if(this.get("el").one(".Nav-flyout")!==null){this.get("el").one(".Nav-flyout").remove();}
if(e!==undefined&&e.select===select){if(e.hidden===true){this.get("el").hide();}else{this.get("el").show();}}
if(selected!==null){trigger.one(".flyout-title").set("text",selected.get("text"));}else{if(firstOpt!==null){trigger.one(".flyout-title").set("text",firstOpt.get("text"));}}
var next=select.one("[next]"),prev=select.one("[prev]"),nextButton=this.get("el").one(".Js-next"),prevButton=this.get("el").one(".Js-prev");if(nextButton!==null){if(next!==null){nextButton.removeClass("Btn-disabled");nextButton.set("href",next.get("value"));if(select.hasAttribute("data-target")){nextButton.addClass("yfa-dynamic");nextButton.setAttribute("data-target",select.getAttribute("data-target"));}}else{nextButton.addClass("Btn-disabled");}}
if(prevButton!==null){if(prev!==null){prevButton.removeClass("Btn-disabled");prevButton.set("href",prev.get("value"));if(select.hasAttribute("data-target")){prevButton.addClass("yfa-dynamic");prevButton.setAttribute("data-target",select.getAttribute("data-target"));}}else{prevButton.addClass("Btn-disabled");}}}});Y.namespace("Fantasy");Y.Fantasy.FlyoutSelect=YSFFlyoutSelect;},"1.0",{"requires":['node','hover-intent','event','event-hover','base',"event-outside"]});YUI.add("yfa-module",(function(){var modules={};return function(Y){var evEventPrefix="yfamodule",EV_DISPLAYUPDATE="yfamodule:displayudpate",EV_SWITCHTAB="yfamodule:switchtab",EV_CHANGESELECT="yfamodule:changedModSelect",EV_TABSELECTED="yfamodule:tabselected",EV_DATARECEIVED="yfamodule:datareceived";function YFAModule(cfg){YFAModule.superclass.constructor.apply(this,arguments);}
YFAModule.NAME="yfamodule";YFAModule.ATTRS={"el":{"value":null,"setter":function(val,fullname){return Y.one(val);}},"callbackObj":{"value":{"success":function(cId,response){var target=this.targets[cId],respObj=this.parseResponse(cId,response),content,destinationEl,contentHTML;if(this.getErrors(cId)){Y.log(this.getErrors(cId),"warn","yfa-module");}
else if(respObj.contentIsNew){contentHTML=Y.Fantasy.Mod.cleanupHtml(respObj.content);content=Y.Node.create(contentHTML);destinationEl=this.insertContent(content,target);this.processModSelect(cId,respObj.objects);this.processBadge(cId,respObj.objects);this.processModHide(cId,respObj.objects);if(destinationEl){this.cacheContent(Y.Fantasy.XHR.getTransaction(cId),destinationEl);this.updateModuleDisplay(destinationEl);}}
else{Y.log("Content hasn't change, won't refresh module");}
if(Y.Lang.isArray(respObj.objects)&&respObj.objects.length){this.fire(EV_DATARECEIVED,{objects:respObj.objects});}
this.refreshFlyoutSelect();},"failure":function(cId,response){var failCount=this.get("failedRequestCount")||0,failThresh=this.get("failedRequestThreshold");Y.log("failure handler called on connection "+cId,"error","yfa-module");failCount+=1;if(failCount>failThresh){this.destroyRefresh();}
this.set("failedRequestCount",failCount);}}},"triggerHandler":{"value":function(e,obj){if(this.ancestor(".orphan")){return;}
var doPreventDefault=false,connection,targetNode=null,nav=this.ancestor("[data-dynamic]"),href=this.getAttribute("href"),re=/^\#/,module,target,isDynamic=false,forceRefresh=false,eventPayload={"func":null},self=this,liAncestor,fn;liAncestor=this.ancestor("li");if(this.hasAttribute("data-href")){href=this.getData("href");}
else if(this.hasAttribute("data-href-current")){href=window.location.href;}
if(this.hasClass("yfa-dynamic")){nav=this;isDynamic=true;forceRefresh=true;}
else if(nav){if(nav.getAttribute("data-dynamic")==="true"){isDynamic=true;}
if(nav.getAttribute("data-nocache")==="true"||(liAncestor&&liAncestor.getAttribute("data-nocache")==="true")){forceRefresh=true;}}
else{obj.switchTab(liAncestor,nav);}
if(isDynamic){target=this.hasAttribute("data-target")?this.getAttribute("data-target"):nav.getAttribute("data-target");targetNode=target?obj.get("el").one(target):null;if(targetNode!==null&&!forceRefresh){doPreventDefault=obj.loadCachedContent(this,target);}
fn=function(){var connection=obj.fetch(this,href);if(connection){obj.switchTab(liAncestor,nav);obj.targets[connection.id]=target;}};eventPayload.func=Y.bind(fn,this);eventPayload.isPrevented=false;eventPayload.module=obj.get("el");eventPayload.displayTarget=target;if(!doPreventDefault){doPreventDefault=true;obj.fire(EV_SWITCHTAB,eventPayload);}
else{obj.switchTab(liAncestor,nav);}}
else{var selector=href;if(this.hasAttribute("data-target")&&!re.test(selector)){selector=this.getAttribute("data-target");}
obj.switchTab(liAncestor,nav);if(re.test(selector)){if(obj.get("el").one(selector)){doPreventDefault=obj.updateModuleDisplay(obj.get("el").one(selector));}}}
if(doPreventDefault&&e&&Y.Lang.isFunction(e.preventDefault)&&this.getData('prevent-default')!='false'){e.preventDefault();}}},"cacheTTL":{value:5*60*1000},"failedRequestCount":{value:0},"failedRequestThreshold":{value:10}};Y.extend(YFAModule,Y.Fantasy.XHR,{_createEvents:function(){var self=this;this.publish(EV_DISPLAYUPDATE,{queuable:false,emitFacade:true,bubbles:true,broadcast:2,prefix:evEventPrefix});this.publish(EV_TABSELECTED,{queuable:false,emitFacade:true,bubbles:true,broadcast:2,prefix:evEventPrefix});this.publish(EV_SWITCHTAB,{queuable:false,emitFacade:true,defaultFn:self._doNothing,preventedFn:self._doNothing,preventable:true,bubbles:true,bubbleEvents:true,broadcast:2,prefix:evEventPrefix});this.publish(EV_DATARECEIVED,{queuable:false,emitFacade:true,preventable:true,bubbles:true,bubbleEvents:true,broadcast:2,prefix:evEventPrefix});this.after(EV_SWITCHTAB,self._execEvtPayload);},_execEvtPayload:function(ev){ev.func();},_doNothing:function(ev){return;},register:function(){var el=this.get("el"),self=this,modSelect;modules[el]=self;el.delegate("click",self.get("triggerHandler"),".Navitem:not(.Js-static) > .Navtarget:not(.Js-static), a.yfa-dynamic",null,self);el.delegate("click",self.modToggleHandler,".Btn-mod-toggle",null,self);el.delegate("change",self.handleModSelectChange,"select[data-dynamic=true]",null,self);this._createEvents();this.set("isRegistered",true);this.cacheInitialContent();this.initRefresh();this.refreshFlyoutSelect();},_flyoutSelect:null,initFlyoutSelect:function(flyout){var fl=new Y.Fantasy.FlyoutSelect({"el":flyout,"trigger_classes":"Btn Btn-short Fz-xs Grid-u","ul_classes":"Nav-v Nav-plain Dropdown Nowrap No-p Box-shadow Bdr-radius Bdr","use_link":true,"title_changed_listener":EV_CHANGESELECT});this._flyoutSelect=fl;},refreshFlyoutSelect:function(){var modSelect=this._getModSelect(),flyout;if(modSelect){flyout=modSelect.ancestor(".Flyoutselectbox");}
if(flyout){if(this._flyoutSelect){this._flyoutSelect.destroy();}
this.initFlyoutSelect(flyout);}},modToggleHandler:function(e,obj){e.preventDefault();if(e.target.test('.Btn-mod-toggle')){modToggle=Y.one('.Mod-toggle');if(modToggle.hasClass("Hidden")){modToggle.removeClass("Hidden");if(e.target.test('.Btn-mod-toggle')){e.target.addClass("Hidden");}}else{modToggle.addClass("Hidden");Y.one('form textarea').set('value',null);Y.one('.Btn-mod-toggle').removeClass("Hidden");}}},initRefresh:function(){var module=this.get("el"),refreshLinks,self=this;this.destroyRefresh();refreshLinks=module.all(".yfa-dynamic[data-refresh]");if(refreshLinks.size()){Y.some(refreshLinks,function(n){var refreshTime=parseInt(n.getAttribute("data-refresh"),10),isSubmod,isHidden=false;isSubmod=n.ancestor(".Submod");if(isSubmod){isHidden=(isSubmod.getComputedStyle("display")==="none");}
if(isHidden){return false;}
if(refreshTime){self._refresh=Y.later(refreshTime,n,self.get("triggerHandler"),[null,self],true);if(!self._refreshLimit){self._refreshLimit=Y.later(refreshTime*5000,self,self.destroyRefresh);}
this.set("failedRequestCount",0);return true;}});}
if(Y.Lang.isFunction(Y.Fantasy.RegEditSettings)){Y.Fantasy.RegEditSettings.init();}},destroyRefresh:function(){if(this._refresh&&Y.Lang.isFunction(this._refresh.cancel)){this._refresh.cancel();}
this._refresh=null;},_refresh:null,_refreshLimit:null,updateModuleDisplay:function(destination){var el=this.get("el"),destinationEl,focusEl,sibs;destinationEl=(Y.Lang.isString(destination))?el.one(destination):destination;focusEl=destinationEl;if(focusEl){sibs=focusEl.siblings(".Submod");sibs.removeClass("Selected");focusEl.addClass("Selected");this.fire(EV_DISPLAYUPDATE,{"module":el,"displayTarget":focusEl});this.initRefresh();return true;}
else{this.initRefresh();}
return false;},switchTab:function(tabEl,navEl){if(!tabEl){return;}
var siblings=tabEl.siblings(),supernav,subnav,supernavEl,subnavEl,subnavElSelected;tabEl.addClass("Selected");siblings.removeClass("Selected");Y.fire(EV_TABSELECTED,{"tab":tabEl,});if(navEl){supernav=navEl.getData("supernav-target");supernavEl=(supernav)?Y.one(supernav):null;if(supernavEl){if(!supernavEl.hasClass("Navitem")){supernavEl=supernavEl.ancestor(".Navitem");}
if(supernavEl){this.switchTab(supernavEl);}}
if(tabEl.one(".Navtarget")){subnav=tabEl.one(".Navtarget").getData("subnav-target");subnavEl=(subnav)?Y.one(subnav):null;subnavElSelected=(subnavEl)?subnavEl.one(".Navitem.Default-selected"):null;if(subnavElSelected){this.switchTab(subnavElSelected);}
else if(subnavEl){subnavEl.all(".Navitem.Selected").removeClass("Selected");}}}},handleModSelectChange:function(e,obj){var target=this.getAttribute("data-target"),targetNode=target?obj.get("el").one(target):null,fn,eventPayload={},href,re=/^http(s)?:\/\//;href=this.get("value");if(re.test(href)){document.location.href=href;}
if(targetNode&&href){fn=function(){var connection=obj.fetch(this,href);if(connection){obj.targets[connection.id]=target;}};eventPayload.func=Y.bind(fn,this);eventPayload.isPrevented=false;obj.fire(EV_SWITCHTAB,eventPayload);}},insertContent:function(content,target){var module=this.get("el"),targetEl,destinationEl=null,targetInContent;targetEl=module.one(target);if(targetEl){if(content.one(target)){targetEl.setHTML(content.one(target).getHTML());}else{targetEl.setHTML(content);}
destinationEl=targetEl;}
else{targetInContent=content.one(target);if(targetInContent&&targetInContent.hasClass("Submod")){if(module.one(".Js-submods")){module.one(".Js-submods").append(targetInContent);destinationEl=targetInContent;}}}
if(destinationEl){this.initRefresh();}
return destinationEl;},_modSelect:false,_getModSelect:function(){var el=this.get('el');if(el){var modSelect=el.one('.Mod-select');if(modSelect){this._modSelect=modSelect;}}
return this._modSelect;},processModSelect:function(cId,respObjects){var sel=this._getModSelect(),newOptTemplate,hideSel=true;if(sel){Y.Array.some(respObjects,function(obj){if(obj.selectitems&&Y.Lang.isArray(obj.selectitems)){newOptTemplate=Y.Node.create("<option value=''></option>");sel.empty();Y.Array.each(obj.selectitems,function(selectitem){var newOpt=newOptTemplate.cloneNode();newOpt.set("value",selectitem.target);newOpt.set("text",selectitem.label);if(selectitem.selected){newOpt.setAttribute("selected",selectitem.selected);}
if(selectitem.next){newOpt.setAttribute("next",selectitem.next);}
if(selectitem.prev){newOpt.setAttribute("prev",selectitem.prev);}
sel.append(newOpt);});hideSel=false;return true;}});Y.Array.some(respObjects,function(obj){if(obj.selecttarget){sel.setAttribute("data-target",obj.selecttarget);return true;}});if(hideSel){sel.addClass("Js-hidden");sel.ancestor(".Selectbox").addClass("Js-hidden");}
else{sel.removeClass("Js-hidden");sel.ancestor(".Selectbox").removeClass("Js-hidden");}
Y.fire(EV_CHANGESELECT,{hidden:sel.ancestor(".Selectbox").hasClass("Js-hidden"),select:sel});}},processBadge:function(cId,respObjects){var mod=this.get("el");Y.Array.some(respObjects,function(obj){if(obj.badges&&Y.Lang.isArray(obj.badges)){Y.Array.each(obj.badges,function(badge){if(badge.name!==undefined&&badge.value!==undefined){var badgeList=Y.all("[data-badge-name="+badge.name+"]");badgeList.each(function(badgeEl){if(parseInt(badge.value,10)===0){badgeEl.addClass("Hidden");}else{badgeEl.setHTML(badge.value);badgeEl.removeClass("Hidden");}});}});}});},processModHide:function(cId,respObjects){var mod=this.get("el");Y.Array.some(respObjects,function(obj){if(obj.hideMod&&obj.hideMod===true){mod.addClass("Hidden");}});},_cacheSharedTargetContent:function(nav,target){var selectedNavTab,targetEl;selectedNavTab=nav.one(".Selected a");targetEl=this.get("el").one(target);if(selectedNavTab&&targetEl){this.cacheContent(selectedNavTab,targetEl);}},_cacheNavItemTargetContent:function(nav){var navItems=nav.all("a"),self=this;navItems.each(function(navItem){var target,targetEl;target=navItem.getAttribute("data-target");if(target){targetEl=self.get("el").one(target);}
if(targetEl){self.cacheContent(navItem,targetEl);}},self);},cacheInitialContent:function(){var navs,el,self=this;el=this.get("el");navs=el.all(".Nav-h, .Nav-v");navs.each(function(nav){var target,dynamic;target=nav.getAttribute("data-target");dynamic=nav.getAttribute("data-dynamic")==="true"?true:false;if(dynamic){if(target){self._cacheSharedTargetContent(nav,target);}else{self._cacheNavItemTargetContent(nav);}}},self);},cacheContent:function(node,content){var href=node.getAttribute?node.getAttribute("href"):false,self=this,modSelect=this._getModSelect();if(href){this.urlCache[href]=content.getHTML();Y.later(this.get("cacheTTL"),self,function(){this.urlCache[href]=false;});if(modSelect){this.selectCache[href]=modSelect.cloneNode(true);}}},loadCachedContent:function(url,target){var href=Y.Lang.isString(url)?url:url.getAttribute&&url.getAttribute("href"),content;if(href){content=this.urlCache[href]||false;}
if(content){this.insertContent(Y.Node.create(content),target);this.updateModuleDisplay(target);this.loadCachedSelect(href);return true;}
return false;},loadCachedSelect:function(href){var sel=this._getModSelect(),cachedSel,cachedSelClone;if(sel){cachedSel=this.selectCache[href];if(cachedSel){cachedSelClone=cachedSel.cloneNode(true);sel.replace(cachedSelClone);this._modSelect=cachedSelClone;if(this._modSelect.hasClass("Js-hidden")){this._modSelect.ancestor(".Selectbox").addClass("Js-hidden");}
else{this._modSelect.ancestor(".Selectbox").removeClass("Js-hidden");}
this.refreshFlyoutSelect();Y.fire(EV_CHANGESELECT,{hidden:cachedSelClone.ancestor(".Selectbox").hasClass("Js-hidden"),select:this._modSelect});}}},urlCache:{},targets:{},selectCache:{}},{reload:function(selector){var mod=Y.Fantasy.Mod.getModule(selector);if(mod){var el=mod.get("el");var selectedTab=el.one(".Navitem.Selected a");if(selectedTab){var fn=mod.get("triggerHandler");var method=(selectedTab&&Y.Lang.isString(fn))?selectedTab[fn]:fn;if(!method.apply){method(null,mod);}else{method.apply(selectedTab,[null,mod]);}
return true;}}
return false;},getModule:function(selector){var el=Y.one(selector);if(el){return modules[el];}
return undefined;},cleanupHtml:function(html){if(Y.UA.ie&&Y.UA.ie<9){html=html.replace(/<(\/?)(section|article|nav)/g,"<$1div");}
return html;}});Y.namespace("Fantasy");Y.Fantasy.Mod=YFAModule;};})(),"0.1",{"requires":["ysf-xhr","node","node-event-delegate","selector-css3","base","ysf-flyout-select"]});YUI.add("ysf-viewloader",function(Y){var ViewLoaderProto;function InvalidHrefAttrException(el){var id=el.get("id");this.message="Element "+id+" does not have a valid data-href attribute set";this.name="InvalidHrefAttrException";}
function ViewLoader(cfg){ViewLoader.superclass.constructor.apply(this,arguments);}
ViewLoader.NAME="viewloader";ViewLoader.ATTRS={"el":{value:null,setter:function(el){return Y.one(el);}},"href":{value:null},"triggerHandler":{value:function(e,obj){var el=obj.get("el");obj.viewportStateAction(el);}},"eventType":{value:["scroll","touchmove"]},"callbackObj":{value:{"success":function(cId,response){var respObj=this.parseResponse(cId,response),content,contentHTML;if(this.getErrors(cId)){Y.log(this.getErrors(cId),"warn","yfa-mod-viewload");}
else{contentHTML=Y.Fantasy.Mod.cleanupHtml(respObj.content);content=Y.Node.create(contentHTML);this.processNewModule(content);this.destroy();}},"failure":function(cId,response){Y.log("failure handler called on connection "+cId,"error","yfa-module");}}}};ViewLoaderProto={initializer:function(cfg){this.createViewLoader();},createViewLoader:function(){var el=this.get("el");if(el){this.parseElAttrs(el);this.viewportStateAction(el);}},parseElAttrs:function(el){var href=el.getData("href");if(Y.Lang.isString(href)){this.set("href",href);}
else{throw new InvalidHrefAttrException(el);}},viewportStateAction:function(el){var inViewport=this.isElInViewport(el);if(inViewport){this.inViewportHandler();}},isElInViewport:function(el){var viewportRegion=el.get("viewportRegion");return el.inRegion(viewportRegion,true);},inViewportHandler:function(){var el=this.get("el"),href=this.get("href");this.fetch(el,href);if(this.get("activeConnection")){this.detachTriggers();}},processNewModule:function(content){var el=this.get("el"),newMod;this.decorateContent(content);this.destroyOldModule(el);el.replace(content);if(content.hasClass("Mod")){newMod=new Y.Fantasy.Mod({"el":content,"triggers":content});newMod.on("yfamodule:displayudpate",function(e){Y.Fantasy.PostLoad.initImages(newMod.get("id"));});}
this.set("el",null);},decorateContent:function(content){if(content.hasClass("Mod")){content.addClass("Fade-in");}},destroyOldModule:function(el){var oldMod;oldMod=Y.Fantasy.Mod.getModule(el);if(oldMod){oldMod.destroy();}}};Y.extend(ViewLoader,Y.Fantasy.XHR,ViewLoaderProto);Y.namespace("Fantasy");Y.Fantasy.ViewLoader=ViewLoader;},'0.0.1',{"requires":["ysf-xhr","yfa-module"]});YUI.add('ysf-formenhancer',function(Y){Y.namespace("Fantasy");var FantasyFormEnhancer=function(){};FantasyFormEnhancer.prototype={initComplete:false,onInitComplete:new Y.CustomEvent("onInitComplete"),formEvtMap:{},_defSubmitFn:function(e,obj){if(e.form){e.form.submit();}},_defResetFn:function(){},_defButtonFn:function(){},valid_tabindex_els:{'A':true,'AREA':true,'BUTTON':true,'INPUT':true,'OBJECT':true,'SELECT':true,'TEXTAREA':true},init:function(){var i,forms,this_form,this_form_id,new_inputs={},new_id,ext;this.ext=(Y.one('.yst-all'))?'yfa':'ysf';forms=Y.all('form');this.publish("submit",{emitFacade:true,defaultFn:Y.bind(this._defSubmitFn,this)});this.publish("reset",{emitFacade:true,defaultFn:Y.bind(this._defResetFn,this)});this.publish("button",{emitFacade:true,defaultFn:Y.bind(this._defButtonFn,this)});forms.each(function(node){new_id=node.generateID();this.appendJSEnabledInput(node);new_inputs=this.enhanceFormCTAs(node);if(document.all){this.appendFormCTAInputs(new_inputs,node);}
if(node.hasClass(this.ext+'-form')){this.applyTabIndexes(node);}
Y.Fantasy.FantasyFormEnhancer.formEvtMap[node.get('id')]={"submit":{"subscribe":function(fn,ctx){Y.Fantasy.FantasyFormEnhancer.on("submit",Y.bind(function(e,obj){if(e.form.get("id")===this.get("id")){if(fn.call(ctx)===false){e.preventDefault();}}},node));}},"reset":new Y.CustomEvent("cancel"),"button":new Y.CustomEvent("button")};},this);this.postInit();},isTabIndexEl:function(el){if(Y.FantasyFormEnhancer.valid_tabindex_els[el.get('tagName').toUpperCase()]){return true;}
return false;},applyTabIndex:function(el){if(el.getAttribute('type')!=='hidden'&&(el.tabIndex===null||el.tabIndex===0)){el.tabIndex=0;}},applyTabIndexes:function(el){try{this.applyTabIndex(el);}catch(e){Y.log(e);}},postInit:function(){this.initComplete=true;Y.fire('onInitComplete:ready');},appendJSEnabledInput:function(elForm){if(elForm.hasClass(this.ext+'-form')){var new_input,form_id=elForm.get('id');new_input=Y.Node.create('<input>');new_input.setAttrs({'id':form_id+'-jsenabled','name':'jsenabled','value':'1','type':'hidden'});elForm.appendChild(new_input);}},enhanceFormCTAs:function(form){var i,new_anchor,cta_name,cta_value,cta_id,cta_class,new_inputs={},new_cta_obj={},elForm=Y.one(form),this_form_id=elForm.get('id'),ctas=Y.all('#'+this_form_id+' input.'+this.ext+'-cta');ctas.each(function(cta){var cta_name=this.enhanceFormCTAEl(cta,elForm);if(!new_inputs[cta_name]){new_inputs[cta_name]=cta_name;}},this);return new_inputs;},enhanceFormCTAEl:function(el,form){try{var cta_name=el.getAttribute('name'),cta_value=el.get('value'),cta_id=el.generateID(),cta_class=el.getAttribute('class'),cta_text=el.getAttribute('title')||cta_value,cta_type=el.getAttribute('type'),oCta={'cta_name':cta_name,'cta_value':cta_value,'cta_type':cta_type,'elForm':form},new_anchor;if(cta_type&&cta_type.toLowerCase()==="button"){if(el.hasClass(this.ext+"-cta-reset")){oCta.cta_type="reset";}}
new_anchor=this.generateCTAButton(cta_id,cta_class,cta_text);new_anchor.on('click',this.handleCTAClick,this,oCta);new_anchor.on('keyup',this.handleFormKeyup,this,oCta,new_anchor);el.get('parentNode').insertBefore(new_anchor,el);this.transformCTAInput(el,form);return cta_name;}
catch(e){Y.log(e);}},generateCTAButton:function(id,className,text){var new_anchor=Y.Node.create('<a>');new_anchor.setAttrs({'id':id,'className':className,'innerHTML':text,'href':'#'});return new_anchor;},transformCTAInput:function(el,form){var form_id=form.getAttribute('id'),existing_el=Y.one('#'+form_id+"-"+el.get("name"));if(!document.all&&!existing_el){el.set("type","hidden");el.set("value","");el.set("id",form_id+"-"+el.getAttribute("name"));}else{el.get('parentNode').removeChild(el);}},appendFormCTAInputs:function(new_inputs,form){var form_id=form.get('id'),new_input,i;for(i in new_inputs){if(new_inputs.hasOwnProperty(i)){new_input=Y.Node.create('<input>');new_input.setAttrs({'id':form_id+'-'+new_inputs[i],'name':new_inputs[i],'type':'hidden'});form.appendChild(new_input);}}},updateHiddenInputValue:function(obj){var cta_name=obj.cta_name,form=obj.elForm,form_id=form.getAttribute('id'),cta_id=form_id+'-'+cta_name,cta_input=Y.one('#'+cta_id);try{cta_input.set('value',obj.cta_value.toLowerCase());}catch(e){Y.log("Error finding cta_input: "+e,"error","FantasyFormEnhancer.updateHiddenInputValue");}},handleCTAClick:function(e,obj){e.preventDefault();var id=e.currentTarget.get('id'),isDisabled=Y.one('#'+id).hasClass(this.ext+"-cta-disabled"),cta_name=obj.cta_name,form=obj.elForm,form_id=form.getAttribute('id'),cta_type=obj.cta_type;if(isDisabled){return false;}
try{switch(cta_type){case"reset":if(Y.Fantasy.FantasyFormEnhancer.fireFormReset(form_id,obj)){return true;}
break;case"button":if(Y.Fantasy.FantasyFormEnhancer.fireFormButton(form_id,obj)){return true;}
break;case"submit":Y.Fantasy.FantasyFormEnhancer.updateHiddenInputValue(obj);if(Y.Fantasy.FantasyFormEnhancer.fireFormSubmit(form_id,obj)){return true;}
break;default:Y.log("Executing default case in handleCTAClick. This may be unintentional.","warning","FantasyFormEnhancer");Y.Fantasy.FantasyFormEnhancer.updateHiddenInputValue(obj);if(Y.Fantasy.FantasyFormEnhancer.fireFormSubmit(form_id,obj)){form.submit();return true;}
else{return false;}}}catch(e){Y.log("Error in handleCTAClick: "+e,"error","Fantasy.FantasyFormEnhancer.handleCTAClick");}},handleFormKeyup:function(e,obj){var target=e.target,form=obj.elForm,form_id=form.get('id'),keycode=e.charCode;if(keycode===13){Y.Fantasy.FantasyFormEnhancer.updateHiddenInputValue(obj);if(Y.Fantasy.FantasyFormEnhancer.fireFormSubmit(form_id,obj)){form.submit();return true;}}
return false;},fireFormSubmit:function(form_id,obj){return this.fireFormCustomEvent(form_id,obj,"submit");},fireFormReset:function(form_id,obj){return this.fireFormCustomEvent(form_id,obj,"reset");},fireFormButton:function(form_id,obj){return this.fireFormCustomEvent(form_id,obj,"button");},fireFormCustomEvent:function(form_id,obj,evt){var success=true;if(this.formEvtMap[form_id]&&this.formEvtMap[form_id][evt]){success=this.fire(evt,{form:Y.one('#'+form_id)});}
return success;}};Y.augment(FantasyFormEnhancer,Y.EventTarget,true,null,{emitFacade:true});Y.Fantasy.FantasyFormEnhancer=new FantasyFormEnhancer();},"0.1",{"requires":['event','event-custom']});YUI.add('ysf-watchlist',(function(){var WatchListClass=null;return function(Y){Y.namespace('Fantasy');if(WatchListClass===null){function Watchlist(cfg){if(Y.Fantasy.Watchlist._instance){return Y.Fantasy.Watchlist._instance;}
Watchlist.superclass.constructor.apply(this,arguments);Y.Fantasy.Watchlist._instance=this;}
Watchlist.NAME="watchlist";Watchlist.ATTRS={"callbackObj":{"value":{"success":function(tid,conn){var el,replacements,textStrings,rules,jsontext,jsonobj,x,y,objAr,curplayer,player_id,league_id,classname,url,elname,watchIcons,curIcon,img,connObj=conn?this.parseResponse(tid,conn):null;if(!Y.Lang.isObject(connObj)){if(conn.status===0||conn.statusText==="Unknown"){el=Y.Fantasy.XHR.getTransaction(tid)
url=el.getAttribute('href');window.location=url;}}
try{el=Y.Fantasy.XHR.getTransaction(tid);replacements={"class":["watchw","watchn"],"url":["addplayerwatch","deleteplayerswatch"],"param":["apid","dpids[]"]};textStrings={"watchn":{title:"Remove from Watch List",img:"https://s.yimg.com/lq/i/us/sp/fn/default/full/watching_2.gif",src:"&#xe023;"},"watchw":{title:"Add to Watch List",img:"https://s.yimg.com/lq/i/us/sp/fn/default/full/not_watching_2.gif",src:"&#xe061;"}};rules={"watchw":[0,1],"watchn":[1,0]};jsontext=conn.responseText;jsonobj=Y.JSON.parse(jsontext);objAr=jsonobj.objects;for(x in objAr){curplayer=objAr[x];player_id=curplayer.player_id;league_id=curplayer.league_id;classname=(curplayer.status==="watching")?"watchn":"watchw";url=curplayer.url.replace(/\&ajaxrequest(\[\])?=\d/g,"");elname="w-"+league_id+"-"+player_id;watchIcons=document.getElementsByName(elname);for(y=0;y<watchIcons.length;y+=1){curIcon=watchIcons[y];curIcon.className=curIcon.className.replace(/watchw[wn]/,classname);curIcon.href=url;img=curIcon.getElementsByTagName("img")[0];if(img!==undefined){img.src=textStrings[classname].img;img.title=textStrings[classname].title;img.alt=textStrings[classname].title;}else{curIcon.title=textStrings[classname].title;curIcon.innerHTML=textStrings[classname].src;}}}}
catch(err){Y.log(err);}},"failure":function(tid,conn){if(conn.status===1223){this.success(conn);return;}
el=Y.Fantasy.XHR.getTransaction(tid)
url=el.getAttribute('href');window.location=url;}}},"triggerHandler":{"value":function(e,obj){var pid,href,remUrl,linked;pid=this.getAttribute("name");href=this.getAttribute("href");remUrl=/\&?done=[^\&]+/g;href=href.replace(remUrl,'');linked=Y.Fantasy.XHR.fetchFromAjax(href,obj.get("callbackObj"),this,obj,false);if(linked){try{e.preventDefault();}
catch(err){e.preventDefault();return false;}}}}};Y.extend(Watchlist,Y.Fantasy.XHR,{"register":function(){if(!this.get("isRegistered")){this.set("isRegistered",true);Y.one("body").delegate("click",this.get("triggerHandler"),"a.watchw, a.watchn",null,this);}}},{"getInstance":function(){return Y.Fantasy.Watchlist._instance||new Y.Fantasy.Watchlist();},"_instance":null});WatchListClass=Watchlist;}
Y.Fantasy.Watchlist=WatchListClass;};})(),'0.1',{'requires':['ysf-xhr']});YUI.add('ysf-initlinks',function(Y){Y.namespace('Fantasy');Y.Fantasy.InitLinks={init:function(parent){if(!parent){parent=Y.one(document);}else{parent=Y.one(parent);}
var links=parent.all('a'),watchlinks=parent.all('.watch a');links.each(function(curlink){if(curlink.getAttribute('target')){if(!curlink.hasClass("playernote")){curlink.on('click',function(e){Y.Fantasy.InitLinks.launchLink(e);});}}
else if(curlink.get('className').indexOf('noaction')!=-1){curlink.on('click',function(e){e.preventDefault();Y.Fantasy.InitLinks.showNoActionPopup(e);});}});if(watchlinks){this.watchListObj=Y.Fantasy.Watchlist.getInstance();}},launchLink:function(p_oEvent){var oEvent=p_oEvent?p_oEvent:window.event;oEvent=oEvent||{};var keycode=null,width=null,height=null,target=oEvent.currentTarget.getAttribute('target'),top,left;if(target=='sports'){keycode=63;}
else if(target.indexOf('details')!=-1){width=400;height=600;var dimensions=target.split('-');if(dimensions[1]){var dimensions2=dimensions[1].split('x');width=dimensions2[0];height=dimensions2[1];target='details';}
keycode=11;}
else if(target.indexOf('ranker')!=-1){keycode='0';width=350;height=502;}
else if(target=='drafttest'){keycode=10;width=260;height=120;}
else if(target.indexOf('scenariogenerator')!=-1){keycode=11;width=960;height=720;}
else if(target=='stattrackerpre'){keycode=10;width=551;height=430;}
else if(target.indexOf('stattracker')!=-1){keycode=11;width=960;height=720;}
else if(target.indexOf('mlbvideo')!=-1){keycode=11;width=900;height=700;}
else if(target.indexOf('nbavideo')!=-1){keycode=11;width=797;height=353;var screenX=(typeof window.screenX==="number")?window.screenX:window.screenLeft;var screenY=(typeof window.screenY==="number")?window.screenY:window.screenTop;if(typeof screenX==="number"&&window.outerWidth){left=((window.outerWidth/2)+screenX)-(width/2);top=((window.outerHeight/2)+screenY)-(height/2);}}
else if(target.indexOf('video')!=-1){keycode=11;width=793;height=666;}
if(keycode){if(oEvent.shiftKey||oEvent.ctrlKey||oEvent.metaKey){return true;}
oEvent.preventDefault();if(left&&top){var w=Y.Fantasy.InitLinks.yfaPopup(oEvent.currentTarget.getAttribute('href'),target,width,height,keycode,left,top);}
else{var w=Y.Fantasy.InitLinks.yfaPopup(oEvent.currentTarget.getAttribute('href'),target,width,height,keycode);}
if(w){w.focus();}
return false;}
else{return true;}},yfaPopup:function(u,n,w,h,k){var a=[],o=null,r=arguments,sep='';if(w&&h){a[0]="width="+w+",height="+h;sep=',';}
a[1]=sep+"scrollbars="+((k&1)?1:0);a[2]=",resizable="+((k&2)?1:0);a[3]=",toolbar="+((k&4)?1:0);a[4]=",status="+((k&8)?1:0);a[5]=",location="+((k&16)?1:0);a[6]=",menubar="+((k&32)?1:0);if(r.length>=6){a[7]=(document.layers)?",screenX="+r[5]:",left="+r[5];}
if(r.length>=7){a[8]=(document.layers)?",screenY="+r[6]:",top="+r[6];}
a=a.join("");o=open(u,n,a);if(o){o.focus();}
return o;},showNoActionPopup:function(e){var actionStrings=new Array();actionStrings['cc-cantcut']='This player is on the cant cut list and may not be dropped';actionStrings['dd-gameover']='You may not drop this player because the game is over';actionStrings['dd-predraft']='You may not drop this player because the draft for your league has not yet occurred';actionStrings['l-lockedtrades']='You may not perform a trade because the commissioner has locked your trade capabilities';actionStrings['nt-overmaxtrades']='You may not perform a trade becauses you are over your allowed number of trades';actionStrings['dt-gameover']='You may not perform a trade because the game is over';actionStrings['dt-predraft']='You may not perform a trade because the draft for your league has not yet occurred';actionStrings['dt-tradedeadlinepassed']='You may not perform a trade because the trade deadline for your league has passed';actionStrings['l-lockedadds']='You may not add this player because the commissioner has locked your add capabilities';actionStrings['na-overmaxmoves']='You may not add this player because you are over your allowed number of moves';actionStrings['da-gameover']='You may not add this player because the game is over';actionStrings['da-predraft']='You may not add this player because the draft for your league has not yet occurred';actionStrings['da-notinleague']='You may not add this player because you are not in this league';actionStrings['da-waiveroverdue']='You may not submit a waiver claim for this player after the waiver period has ended';actionStrings['w-nil']='You may not watch this player because you are not in this league';var container=Y.one('#noactions');var docBody=Y.one(document.body);if(!container){container=Y.Node.create('<div id="noactions" class="popupwrap"></div>');innercontainer=Y.Node.create('<div class="content"></div>');shadow=Y.Node.create('<div class="shadow"></div>');container.append(innercontainer);container.append(shadow);docBody.append(container);}
var action=e.currentTarget.get('className').split('noaction')[1].split(' ')[0];innercontainer.setHTML(actionStrings[action]+'<span>Click anywhere to close<\/span>');var width=container.get('offsetWidth');var pos=e.currentTarget.getXY();var elemLeft=pos[0]-width+7;var elemTop=pos[1]+7+'px';if(elemLeft<0){elemLeft='0';}
container.setStyle('left',elemLeft+'px');container.setStyle('top',elemTop);container.setStyle('visibility','visible');docBody.on('mousedown',Y.Fantasy.InitLinks.hideNoActionPopup);return false;},hideNoActionPopup:function(){var container=document.getElementById('noactions');container.style.left='-9000px';},watchListObj:null}},'',{'requires':['node','event','ysf-watchlist']});YUI.add('ysf-headshot',function(Y){Y.namespace('Fantasy');Y.Fantasy.Headshot={init:function(el){var isRetina=(window.devicePixelRatio>1||(window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5)").matches)),elContainer=(typeof el!=='undefined')?el:'',headshot=Y.all(elContainer+' .headshot'),attr=(isRetina)?'data-bg-ret':'data-bg';if(headshot){headshot.each(function(headshotNode){headshotAttr=headshotNode.getAttribute(attr);if(headshotAttr){headshotNode.setStyle('backgroundImage','url('+headshotAttr+')');}});}}};},'',{'requires':['node']});YUI.add('gallery-outside-events',function(Y){var nativeEvents=['blur','change','click','dblclick','focus','keydown','keypress','keyup','mousedown','mousemove','mouseout','mouseover','mouseup','select','submit'];Y.Event.defineOutside=function(event,name){name=name||event+'outside';Y.Event.define(name,{on:function(node,sub,notifier){sub.onHandle=Y.one('doc').on(event,function(e){if(this.isOutside(node,e.target)){notifier.fire(e);}},this);},detach:function(node,sub,notifier){sub.onHandle.detach();},delegate:function(node,sub,notifier,filter){sub.delegateHandle=Y.one('doc').delegate(event,function(e){if(this.isOutside(node,e.target)){notifier.fire(e);}},filter,this);},detachDelegate:function(node,sub,notifier,filter){sub.delegateHandle.detach();},isOutside:function(node,target){return target!==node&&!target.ancestor(function(p){return p===node;});}});};Y.each(nativeEvents,function(event){Y.Event.defineOutside(event);});},'1.1.0',{requires:['event-focus','event-synthetic']});YUI.add("gallery-overlay-extras",function(Y){var OVERLAY='overlay',HOST='host',RENDER_UI='renderUI',BIND_UI='bindUI',SYNC_UI='syncUI',RENDERED='rendered',BOUNDING_BOX='boundingBox',VISIBLE='visible',Z_INDEX='zIndex',ALIGN='align',CHANGE='Change',isBoolean=Y.Lang.isBoolean,getCN=Y.ClassNameManager.getClassName,supportsPosFixed=(function(){var isSupported=null,el,root;if(document.createElement){el=document.createElement('div');if(el&&el.style){el.style.position='fixed';el.style.top='10px';root=document.body;if(root&&root.appendChild&&root.removeChild){root.appendChild(el);isSupported=(el.offsetTop===10);root.removeChild(el);}}}
return isSupported;}()),OverlayModal,OverlayKeepaligned,OverlayAutohide,OverlayPointer;(function(){var OVERLAY_MODAL='overlayModal',MODAL='modal',MASK='mask',MODAL_CLASSES={modal:getCN(OVERLAY,MODAL),mask:getCN(OVERLAY,MASK)};OverlayModal=Y.Base.create(OVERLAY_MODAL,Y.Plugin.Base,[],{_maskNode:null,_uiHandles:null,initializer:function(config){this.afterHostMethod(RENDER_UI,this.renderUI);this.afterHostMethod(BIND_UI,this.bindUI);this.afterHostMethod(SYNC_UI,this.syncUI);if(this.get(HOST).get(RENDERED)){this.renderUI();this.bindUI();this.syncUI();}},destructor:function(){if(this._maskNode){this._maskNode.remove(true);}
this._detachUIHandles();this.get(HOST).get(BOUNDING_BOX).removeClass(MODAL_CLASSES.modal);},renderUI:function(){var bb=this.get(HOST).get(BOUNDING_BOX),bbParent=bb.get('parentNode')||Y.one('body');this._maskNode=Y.Node.create('<div></div>');this._maskNode.addClass(MODAL_CLASSES.mask);this._maskNode.setStyles({position:supportsPosFixed?'fixed':'absolute',width:'100%',height:'100%',top:'0',left:'0',display:'none'});bbParent.insert(this._maskNode,bbParent.get('firstChild'));bb.addClass(MODAL_CLASSES.modal);},bindUI:function(){this.afterHostEvent(VISIBLE+CHANGE,this._afterHostVisibleChange);this.afterHostEvent(Z_INDEX+CHANGE,this._afterHostZIndexChange);},syncUI:function(){var host=this.get(HOST);this._uiSetHostVisible(host.get(VISIBLE));this._uiSetHostZIndex(host.get(Z_INDEX));},_focus:function(){var host=this.get(HOST),bb=host.get(BOUNDING_BOX),oldTI=bb.get('tabIndex');bb.set('tabIndex',oldTI>=0?oldTI:0);host.focus();bb.set('tabIndex',oldTI);},_blur:function(){this.get(HOST).blur();},_getMaskNode:function(){return this._maskNode;},_uiSetHostVisible:function(visible){if(visible){Y.later(1,this,'_attachUIHandles');this._maskNode.setStyle('display','block');this._focus();}else{this._detachUIHandles();this._maskNode.setStyle('display','none');this._blur();}},_uiSetHostZIndex:function(zIndex){this._maskNode.setStyle(Z_INDEX,zIndex||0);},_attachUIHandles:function(modal){if(this._uiHandles){return;}
var host=this.get(HOST),bb=host.get(BOUNDING_BOX);this._uiHandles=[bb.on('clickoutside',Y.bind(this._focus,this)),bb.on('focusoutside',Y.bind(this._focus,this))];if(!supportsPosFixed){this._uiHandles.push(Y.one('win').on('scroll',Y.bind(function(e){var maskNode=this._maskNode;maskNode.setStyle('top',maskNode.get('docScrollY'));},this)));}},_detachUIHandles:function(){Y.each(this._uiHandles,function(h){h.detach();});this._uiHandles=null;},_afterHostVisibleChange:function(e){this._uiSetHostVisible(e.newVal);},_afterHostZIndexChange:function(e){this._uiSetHostZIndex(e.newVal);}},{NS:MODAL,ATTRS:{maskNode:{getter:'_getMaskNode',readOnly:true}},CLASSES:MODAL_CLASSES});}());(function(){var OVERLAY_KEEPALIGNED='overlayKeepaligned',KEEPALIGNED='keepaligned';OverlayKeepaligned=Y.Base.create(OVERLAY_KEEPALIGNED,Y.Plugin.Base,[],{_uiHandles:null,initializer:function(config){this.afterHostMethod(BIND_UI,this.bindUI);this.afterHostMethod(SYNC_UI,this.syncUI);if(this.get(HOST).get(RENDERED)){this.bindUI();this.syncUI();}},destructor:function(){this._detachUIHandles();},bindUI:function(){this.afterHostEvent(VISIBLE+CHANGE,this._afterHostVisibleChange);},syncUI:function(){this._uiSetHostVisible(this.get(HOST).get(VISIBLE));},syncAlign:function(){this.get(HOST)._syncUIPosAlign();},_uiSetHostVisible:function(visible){if(visible){this._attachUIHandles();}else{this._detachUIHandles();}},_attachUIHandles:function(){if(this._uiHandles){return;}
var syncAlign=Y.bind(this.syncAlign,this);this._uiHandles=[Y.on('windowresize',syncAlign),Y.on('scroll',syncAlign)];},_detachUIHandles:function(){Y.each(this._uiHandles,function(h){h.detach();});this._uiHandles=null;},_afterHostVisibleChange:function(e){this._uiSetHostVisible(e.newVal);}},{NS:KEEPALIGNED});}());(function(){var OVERLAY_AUTOHIDE='overlayAutohide',AUTOHIDE='autohide',CLICKED_OUTSIDE='clickedOutside',FOCUSED_OUTSIDE='focusedOutside',PRESSED_ESCAPE='pressedEscape';OverlayAutohide=Y.Base.create(OVERLAY_AUTOHIDE,Y.Plugin.Base,[],{_uiHandles:null,initializer:function(config){this.afterHostMethod(BIND_UI,this.bindUI);this.afterHostMethod(SYNC_UI,this.syncUI);if(this.get(HOST).get(RENDERED)){this.bindUI();this.syncUI();}},destructor:function(){this._detachUIHandles();},bindUI:function(){this.afterHostEvent(VISIBLE+CHANGE,this._afterHostVisibleChange);},syncUI:function(){this._uiSetHostVisible(this.get(HOST).get(VISIBLE));},_uiSetHostVisible:function(visible){if(visible){Y.later(1,this,'_attachUIHandles');}else{this._detachUIHandles();}},_attachUIHandles:function(){if(this._uiHandles){return;}
var host=this.get(HOST),bb=host.get(BOUNDING_BOX),hide=Y.bind(host.hide,host),uiHandles=[];if(this.get(CLICKED_OUTSIDE)){uiHandles.push(bb.on('clickoutside',hide));}
if(this.get(FOCUSED_OUTSIDE)){uiHandles.push(bb.on('focusoutside',hide));}
if(this.get(PRESSED_ESCAPE)){uiHandles.push(bb.on('key',hide,'down:27'));}
this._uiHandles=uiHandles;},_detachUIHandles:function(){Y.each(this._uiHandles,function(h){h.detach();});this._uiHandles=null;},_afterHostVisibleChange:function(e){this._uiSetHostVisible(e.newVal);}},{NS:AUTOHIDE,ATTRS:{clickedOutside:{value:true,validator:isBoolean},focusedOutside:{value:true,validator:isBoolean},pressedEscape:{value:true,validator:isBoolean}}});}());(function(){var OVERLAY_POINTER='overlayPointer',POINTER='pointer',POINTING='pointing',POINTER_CLASSES={pointer:getCN(OVERLAY,POINTER),pointing:getCN(OVERLAY,POINTING)};OverlayPointer=Y.Base.create(OVERLAY_POINTER,Y.Plugin.Base,[],{_pointerNode:null,initializer:function(config){this.afterHostMethod(RENDER_UI,this.renderUI);this.afterHostMethod(BIND_UI,this.bindUI);this.afterHostMethod(SYNC_UI,this.syncUI);if(this.get(HOST).get(RENDERED)){this.renderUI();this.bindUI();this.syncUI();}},destructor:function(){var host=this.get(HOST),bb=host.get(BOUNDING_BOX),align=host.get(ALIGN),pointerNode=this._pointerNode;bb.removeClass(POINTER_CLASSES.pointing);if(align&&align.points){bb.removeClass(getCN(OVERLAY,POINTING,align.points[0]));}
if(pointerNode){pointerNode.remove(true);}},renderUI:function(){this._pointerNode=Y.Node.create('<span></span>').addClass(POINTER_CLASSES.pointer);this.get(HOST).get(BOUNDING_BOX).append(this._pointerNode);},bindUI:function(){this.afterHostEvent(ALIGN+CHANGE,this._afterHostAlignChange);},syncUI:function(){this._uiSetHostAlign(this.get(HOST).get(ALIGN));},_getPointerNode:function(){return this._pointerNode;},_uiSetHostAlign:function(newAlign,prevAlign){var host=this.get(HOST),bb=host.get(BOUNDING_BOX),pointerNode=this._pointerNode;if(prevAlign&&prevAlign.points){bb.removeClass(getCN(OVERLAY,POINTING,prevAlign.points[0]));bb.removeClass(getCN(OVERLAY,POINTING,prevAlign.points[0],prevAlign.points[1]));}
if(newAlign&&newAlign.node&&newAlign.points[0]!==Y.WidgetPositionAlign.CC){bb.addClass(POINTER_CLASSES.pointing);bb.addClass(getCN(OVERLAY,POINTING,newAlign.points[0]));bb.addClass(getCN(OVERLAY,POINTING,newAlign.points[0],newAlign.points[1]));pointerNode.show();}else{pointerNode.hide();bb.removeClass(POINTER_CLASSES.pointing);}
host._syncUIPosAlign();},_afterHostAlignChange:function(e){this._uiSetHostAlign(e.newVal,e.prevVal);}},{NS:POINTER,ATTRS:{pointerNode:{getter:'_getPointerNode',readOnly:true}},CLASSES:POINTER_CLASSES});}());Y.Plugin.OverlayModal=OverlayModal;Y.Plugin.OverlayKeepaligned=OverlayKeepaligned;Y.Plugin.OverlayAutohide=OverlayAutohide;Y.Plugin.OverlayPointer=OverlayPointer;},"gallery-2011.05.04-20-03",{supersedes:["gallery-overlay-modal"],requires:["overlay","plugin","event-resize","gallery-outside-events"]});YUI.add("ysf-overlay",function(Y){var body,overlayMap={},D_OVERLAY_NAME="data-overlay-name",EV_OVERLAY_OPEN="ysfoverlay:open",EV_OVERLAY_OPENED="ysfoverlay:overlayopened",EV_OVERLAY_CLOSE="ysfoverlay:close",EV_OVERLAY_CLOSED="ysfoverlay:overlayclosed",D_OVERLAY_WIDTH="data-overlay-width",D_OVERLAY_POPULATE="data-overlay-populate";function delegateClickHandler(e){var overlayName=this.getAttribute(D_OVERLAY_NAME),overlayWidth=this.getAttribute(D_OVERLAY_WIDTH),populate=this.getAttribute(D_OVERLAY_POPULATE)||null,target=this;if(overlayName){Y.fire(EV_OVERLAY_OPEN,{"overlayname":overlayName,"overlaywidth":overlayWidth,"populate":populate,"trigger":target});}
e.preventDefault();}
function setOverlayAlign(overlay){var a=Y.WidgetPositionAlign,selector=overlay.get("srcNode").getData("overlay-align-sel"),overlayType="center",position=true,setAlignment=false;overlayType=overlay.get("srcNode").getData("overlay-align-position")||"center";switch(overlayType){case"topLeft":position={node:selector,points:[a.TL,a.TL]};break;case"topRight":position={node:selector,points:[a.TR,a.TR]};break;case"topCenter":position={node:selector,points:[a.TC,a.TC]};break;case"center":overlay.set("centered",selector);setAlignment=true;break;default:setAlignment=true;break;}
if(!setAlignment){overlay.set("align",position);}}
function createOverlay(overlayCfg){var overlayName=overlayCfg.name,overlayEl,overlayObj,overlayHideFunc,overlayWidth,overlayHeight,overlayClickmask;overlayEl=Y.one("[data-overlay-name="+overlayName+"].yfa-overlay, [data-overlay-name="+overlayName+"].Overlay");if(overlayEl){overlayWidth=overlayCfg.width||overlayEl.getData("overlay-width")||"500px";if(Y.one("body").hasClass("Phone")){overlayWidth="100%";}
if(Y.one("body").hasClass("Tablet")&&overlayEl.getData("tablet-overlay-width")){overlayWidth=overlayEl.getData("tablet-overlay-width");}
overlayHeight=overlayCfg.height||overlayEl.getData("overlay-height")||"";overlayClickmask=(overlayEl.getData('overlay-noclickmask'))?false:true;overlayObj=new Y.Overlay({srcNode:overlayEl,render:false,visible:false,width:overlayWidth,height:overlayHeight,centered:true,constrain:Y.one(".Page, #yui-main")?".Page, #yui-main":true,zIndex:210000,modal:true,plugins:[Y.Plugin.OverlayModal,Y.Plugin.OverlayKeepAligned,{fn:Y.Plugin.OverlayAutohide,cfg:{focusedOutside:false,clickedOutside:false}}]});if(overlayEl.hasAttribute("data-overlay-align-sel")){setOverlayAlign(overlayObj);}
overlayObj.render();overlayMap[overlayName]=overlayObj;overlayHideFunc=function(e){var t=e.target;if(t.hasClass('yfa-overlay-close-no-halt')){e.preventDefault();}else{e.halt();}
overlayObj.hide();};overlayEl.delegate("click",overlayHideFunc,".ysf-overlay-close, .yfa-overlay-close, .Overlay-close");if(overlayClickmask){Y.one("body").delegate("click",overlayHideFunc,".yui3-overlay-mask");}
overlayObj.after("visibleChange",function(e){var triggeredBy=overlayObj.get("srcNode").getData("triggeredBy");if(e.newVal===true){Y.fire(EV_OVERLAY_OPENED,{"overlayname":overlayName,"triggeredBy":triggeredBy});}
else{Y.fire(EV_OVERLAY_CLOSED,{"overlayname":overlayName});}});return overlayMap[overlayName];}}
function getOverlay(overlayCfg){return overlayMap[overlayCfg.name]||createOverlay(overlayCfg);}
function openOverlayHandler(e){var overlayName=e.overlayname,overlayWidth=e.overlaywidth,overlay,overlayCfg={},populate,trigger=e.trigger||null;try{if(Y.Lang.isString(e.populate)){populate=Y.JSON.parse(e.populate);}
else{populate={};}}catch(err){populate={};}
overlayCfg.name=overlayName;overlayCfg.width=overlayWidth;overlay=getOverlay(overlayCfg);if(overlay){Y.Object.each(populate,function(val,key){overlay.get("srcNode").one(key).set("value",val);});overlay.get("srcNode").setData("triggeredBy",trigger);overlay.show();}}
function closeOverlayHandler(e){var overlayName=e.overlayname,overlay;overlay=overlayMap[overlayName];if(overlay){overlay.hide();}}
function findOverlay(overlayName){return overlayMap[overlayName];}
Y.publish(EV_OVERLAY_OPEN,{defaultFn:openOverlayHandler,emitFacade:true});Y.publish(EV_OVERLAY_CLOSE,{defaultFn:closeOverlayHandler,emitFacade:true});Y.publish(EV_OVERLAY_OPENED,{emitFacade:true,broadcast:2});Y.publish(EV_OVERLAY_CLOSED,{emitFacade:true,broadcast:2});body=Y.one("body");body.addClass("yui3-skin-sam");Y.namespace("Fantasy.Overlay");Y.Fantasy.Overlay.delegateClickHandler=delegateClickHandler;Y.Fantasy.Overlay.findOverlay=findOverlay;body.delegate("click",delegateClickHandler,".yfa-overlay-trigger, .Overlay-trigger");},"0.1",{requires:["event-custom","node","event","overlay","widget-anim","gallery-overlay-extras","gallery-outside-events"]});YUI.add("ysf-alerts",function(Y){if(!Y.Lang.isUndefined(YUI.Fantasy.Alerts)){return;}
var removeComment=function(oAlerts,type){var node=oAlerts.get(type+'Node'),markup=node.get('innerHTML');if(markup.indexOf('<!-- TEMPLATE')<0){return;}
node.set('innerHTML',markup.replace('<!-- TEMPLATE ','').replace('TEMPLATE -->',''));},setMessages=function(type,msgs){if(msgs.length==0){return;}
var oAlerts=this,node=null,newMesg='';removeComment(oAlerts,type);node=oAlerts.get(type+'Node');node.all('div.Message p').remove(true);markup=node.get('innerHTML');Y.each(msgs,function(k,i,v){newMesg+='<p>'+k+'</p>';});node.one('.Message').set('innerHTML',newMesg);node.removeClass('Hidden');node.all('a.Close').removeClass('Hidden');Y.one('#Alert-'+type+'-block').removeClass('Hidden').setAttribute('style','');};var Alerts=Y.Base.create('FantasyAlerts',Y.Base,[],{_handles:{},initializer:function(){var oAlerts=this,warningNode=Y.one('#Alert-warning-block'),confirmNode=Y.one('#Alert-confirmation-block'),criticalNode=Y.one('#Alert-critical-block'),infoNode=Y.one('#Alert-info-block'),containerNode=Y.one('#Alerts');if(Y.one('#Alerts-other')){warningNode=Y.one('#Alert-warning-block-other'),confirmNode=Y.one('#Alert-confirm-block-other');criticalNode=Y.one('#Alert-critical-block-other');infoNode=Y.one('#Alert-info-block-other');containerNode=Y.one('#Alerts-other');}
if(containerNode){containerNode.delegate('click',oAlerts.closeAlert,'a.Close');containerNode.all('a.Close').removeClass('Hidden');}
oAlerts.set('warningNode',warningNode);oAlerts.set('confirmationNode',confirmNode);oAlerts.set('criticalNode',criticalNode);oAlerts.set('infoNode',infoNode);},closeAlert:function(e){e.preventDefault();var node=e.currentTarget,parentNode=node.get('parentNode').get('parentNode').get('parentNode'),anim=new Y.Anim({node:parentNode,to:{opacity:0},duration:0.3,easing:Y.Easing.easeOut}),heightAnim=new Y.Anim({node:parentNode,to:{height:0},duration:0.2});anim.on('end',function(){heightAnim.run();},this);heightAnim.on('end',function(){parentNode.addClass('Hidden');},this);anim.run();},show:function(types){this.fire('beforeShow');var oAlerts=this,types=(!Y.Lang.isArray(types))?false:types;Y.each(types,function(k,i,a){oAlerts.get(k+'Node').removeClass('Hidden');});this.fire('afterShow');},destructor:function(){}},{ATTRS:{warnings:{value:[],setter:function(v){var oAlerts=this;return Y.bind(setMessages,oAlerts,'warning',v)();},validator:Y.Lang.isArray},confirmations:{value:[],setter:function(v){var oAlerts=this;return Y.bind(setMessages,oAlerts,'confirmation',v)();},validator:Y.Lang.isArray},criticals:{value:[],setter:function(v){var oAlerts=this;return Y.bind(setMessages,oAlerts,'critical',v)();},validator:Y.Lang.isArray},infos:{value:[],setter:function(v){var oAlerts=this;return Y.bind(setMessages,oAlerts,'info',v)();},validator:Y.Lang.isArray},warningNode:{value:null},confirmationNode:{value:null},criticalNode:{value:null},infoNode:{value:null}}});YUI.Fantasy.Alerts=new Alerts();},'',{requires:['base-build','node-event-delegate','anim-base','anim-easing']});YUI.add("ysf-sticky",(function(){var stickys={},initFlag=false,supportFixed=(function(){var elem=document.createElement('div');elem.style.cssText='position:fixed';if(elem.style.position.match('fixed'))return true;return false;}()),initialYOffset=0,requestAnimationFrame=window.requestAnimationFrame||function(callback,element){window.setTimeout(function(){callback()},1);};return function(Y){if(!supportFixed){return;}
var evEventPrefix="ysfsticky",EV_UNSTICKELEMENT=evEventPrefix+":unStickElement",EV_STICKELEMENT=evEventPrefix+":stickElement";function YSFSticky(){YSFSticky.superclass.constructor.apply(this,arguments);}
YSFSticky.NAME="ysfsticky";YSFSticky.ATTRS={"el":{"value":null,"setter":function(val){return Y.one(val);}},"elementY":{"value":null}};YSFSticky.init=function(yOffset){if(!initFlag){if(yOffset){initialYOffset=yOffset;}
initFlag=true;Y.on("load",function(){var sticks=Y.all(".Sticky");sticks.each(function(stick){new Y.Fantasy.Sticky({el:stick});});for(var sticky in stickys){stickys[sticky].checkStickyScroll();}});}};Y.extend(YSFSticky,Y.Base,{YOffset:0,initializer:function(){var el=this.get("el"),self=this,fn=this.checkStickyScroll;if(el){this.set("elementY",el.getY());stickys[el]=self;Y.one(Y.config.win).on(["scroll","touchmove"],fn,this);Y.one(Y.config.win).on("resize",this.stickyResize,this);this.publish(EV_UNSTICKELEMENT,{queuable:true,emitFacade:true,defaultFn:Y.bind(this.unStickElement,this),preventable:true,bubbles:true,bubbleEvents:true,broadcast:1,prefix:evEventPrefix});this.publish(EV_STICKELEMENT,{queuable:true,emitFacade:true,defaultFn:Y.bind(this.stickElement,this),preventable:true,bubbles:true,bubbleEvents:true,broadcast:1,prefix:evEventPrefix});}},checkStickyScroll:function(){var viewportY=(window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,el=this.get("el"),YPositionElement=this.get("elementY"),shouldStick=false,isBottom=el.hasClass("StickBottom"),relativePositionComparison=false;this.YOffset=isBottom?0:initialYOffset;for(var sticky in stickys){relativePositionComparison=isBottom?stickys[sticky].get("elementY")>this.get("elementY"):stickys[sticky].get("elementY")<this.get("elementY");if(stickys.hasOwnProperty(sticky)&&stickys[sticky]!=this&&(el.hasClass("StickBottom")==stickys[sticky].get("el").hasClass("StickBottom"))&&relativePositionComparison){this.YOffset+=parseInt(stickys[sticky].get("el").getComputedStyle("height"),10);}}
shouldStick=el.hasClass("StickBottom")?((viewportY+Y.one("body").get("winHeight"))-this.YOffset<(YPositionElement+parseInt(el.getComputedStyle("height"),10))):(viewportY>YPositionElement-this.YOffset);if(shouldStick){if(!el.hasClass("Stuck")){this.fire(EV_STICKELEMENT);}}else{if(el.hasClass("Stuck")){this.fire(EV_UNSTICKELEMENT);}}},unStickElement:function(cb){var el=this.get("el"),parent=el.ancestor(),type=el.hasClass("StickBottom")?"bottom":"top",styles={"width":"","height":"","zIndex":"","position":""};styles[type]="";requestAnimationFrame(function(){el.setStyles(styles);parent.setStyles({"width":"","height":""});el.removeClass("Stuck");if(typeof cb==="function"){cb();}});},stickElement:function(cb){var el=this.get("el"),parent=el.ancestor(),type=el.hasClass("StickBottom")?"bottom":"top",styles={"width":el.getComputedStyle("width"),"height":el.getComputedStyle("height"),"zIndex":9999,"position":"fixed"};styles[type]=this.YOffset+"px";requestAnimationFrame(function(){parent.setStyles({"width":parent.getComputedStyle("width"),"height":parent.getComputedStyle("height")});el.addClass("Stuck");el.setStyles(styles);if(typeof cb==="function"){cb();}});},stickyResize:function(){var el=this.get("el"),parent=el.ancestor();if(el.hasClass("Stuck")){requestAnimationFrame(function(){parent.setStyle("width","");el.setStyle("width",parent.getComputedStyle("width"));parent.setStyle("width",parent.getComputedStyle("width"));});}}});Y.namespace("Fantasy");Y.Fantasy.Sticky=YSFSticky;};})(),"0.1",{"requires":["node","event","base","event-resize"]});YUI.add('ysf-leaguecontests',function(Y){Y.namespace('Fantasy');Y.Fantasy.LeagueContests={init:function(){var dfLeagueContest=Y.one('.ysf-df-weekly-challenge'),dfPlaySelector='.ysf-df-play-daily';if(dfLeagueContest){var matchupSection=dfLeagueContest.ancestor('.matchups-body'),delegateSection=matchupSection||dfLeagueContest,dfAttrs=dfLeagueContest.getData(),lt=dfAttrs.lt,rapidParams={cat:lt,itc:1};delegateSection.delegate('click',function(e){e.preventDefault();var form=Y.one(e.target.getData('form-selector'));if(form){var bucketId=e.target.getData('contest-bucket');if(bucketId){rapidParams['aid']=bucketId;}
var slk=e.target.get('textContent');Y.Fantasy.rapid.beaconClick('recur_contest',slk,'1',rapidParams,'recur_contest_join');form.submit();}},'.ysf-df-weekly-challenge-submit');delegateSection.delegate('click',function(e){e.preventDefault();var slk=e.target.get('textContent');Y.Fantasy.rapid.beaconClick('recur_contest',slk,'1',rapidParams,'recur_contest_play');window.location=e.target.get('href');},dfPlaySelector);var spaceid=dfAttrs.spaceid,pd=dfAttrs.pd,lid=dfAttrs.lid,tid=dfAttrs.tid,rapidPageParams={spaceid:spaceid,mkrt:'US',lang:'en-US',pd:pd,paid:lid,site:'fullfantasy',test_id:tid};Y.Fantasy.rapid.beaconPageview(rapidPageParams);}}};},'',{'requires':['node']});YUI.add("ysf-video-playlist",function(Y){Y.namespace('Fantasy');var overlayname='video-playlist',tdOverlay=Y.one('#video-playlist .StencilRoot'),tdOverlayErr=Y.one('#video-playlist-error'),body=Y.one('body'),fantasyGame=tdOverlay.getAttribute('data-game');Y.Fantasy.VideoPlaylist={init:function(){Y.on("ysfoverlay:overlayopened",function(e){if(e.overlayname===overlayname){var activeVideoId=e.triggeredBy.getData('video-id'),allVideoIds=Y.all('.yfa-video-playlist'),videoIdParams='',icon=Y.one('#'+e.triggeredBy.get('id')),videoId,videoType='old',videoUrl,rapidVideoParams,rapidPageviewParams,now=Math.floor(Date.now()/1000),sponsorBeacon=Y.one('#'+overlayname).getAttribute('data-sponsor-beacon');tdOverlayErr.addClass('Hidden');tdOverlay.setContent('').addClass('Loader');if(sponsorBeacon){Y.one('#video-playlist-sponsor-beacon').setAttribute('src',sponsorBeacon+now);}
Y.NodeList.each(allVideoIds,function(node){videoId=node.getAttribute('data-video-id');if(!videoUrl){videoUrl=node.getAttribute('data-video-url');}
if(videoId!=activeVideoId){videoIdParams+=(videoIdParams!=='')?','+videoId:videoId;}});if(icon.hasClass('video-new')){videoType='new';}else if(icon.hasClass('video-recent')){videoType='recent';}
rapidVideoParams={slk:'open-plyr',t2:'fntsy-plyr',t3:videoType,cat:'fantasy '+fantasyGame};Y.Fantasy.rapid.beaconEvent("click",rapidVideoParams);rapidPageviewParams={pt:'4',pd:'fantasy',pct:'3'};Y.Fantasy.rapid.beaconPageview(rapidPageviewParams);Y.Fantasy.XHR.fetchFromAjax(videoUrl+'?active_video_id='+activeVideoId+'&all_video_ids='+videoIdParams,loadContent,this);}},{"overlayname":"video-playlist"});Y.on("ysfoverlay:overlayclosed",function(e){if(e.overlayname===overlayname){tdOverlay.setContent('');tdOverlay.removeClass('Player-bg');tdOverlay.addClass('Loader');var rapidParams={slk:'close-plyr',cat:'fantasy '+fantasyGame};Y.Fantasy.rapid.beaconEvent("click",rapidParams);}},{"overlayname":"video-playlist"});var loadContent={"success":function(cId,response){tdOverlay.removeClass('Loader');tdOverlay.removeClass('Player-bg');if(tdOverlay.getAttribute('data-bg')){tdOverlay.addClass('Player-bg');}
var ApeApp=Y.Base.create('apeApp',Y.Base,[Y.Af.Applets]);YMedia.ApeApp=new ApeApp();Y.Media.RMP.load({srcNode:'#video-playlist .StencilRoot',response:response.responseText,continueOnError:true});},"failure":function(cId){tdOverlay.removeClass('Loader');tdOverlay.removeClass('Player-bg');tdOverlay.appendChild(tdOverlayErr);tdOverlayErr.removeClass('Hidden');}};Y.one('#video-playlist').addClass('Overlay').removeClass('Hidden');}}},"0.1",{requires:["node","event","ysf-overlay","ysf-xhr","media-rmp"]});YUI.add("ysf-tooltip",function(Y){Y.namespace('Fantasy');Y.Fantasy.ToolTip={_isInited:false,init:function(){if(this._isInited){return;}
var waitingToShow=false,tooltipHover=false,newToolTip,tooltip,toolTipEl=Y.one('#tooltip'),onMousemove,onMouseleave;if(!toolTipEl){newToolTip=Y.Node.create('<div id="tooltip" class="Fz-xxs">');Y.one('body').appendChild(newToolTip);tooltip=new Y.Overlay({srcNode:"#tooltip",visible:false,zIndex:300000}).plug(Y.Plugin.WidgetAnim);tooltip.anim.get('animHide').set('duration',0.01);tooltip.anim.get('animShow').set('duration',0.1);tooltip.render();toolTipEl=newToolTip;tooltip.move([100,100]);}
onMousemove=function(e){if(tooltip){if(tooltip.get('visible')===false){toolTipEl.setStyle('opacity','0');tooltip.move([(e.pageX+25),(e.pageY-28)]);}
if(waitingToShow===false){Y.later(500,this,function(){toolTipEl.setStyle('opacity','1');tooltip.show();});waitingToShow=true;if(e.currentTarget.getAttribute('data-tooltip')){tooltip.setStdModContent('body',e.currentTarget.getAttribute('data-tooltip'));}}}};onMouseleave=function(e){Y.later(500,this,function(){if(tooltip&&!tooltipHover){if((e.relatedTarget)&&(e.relatedTarget.hasClass('yui3-widget-bd')===false)){tooltip.hide();waitingToShow=false;}}});};onMouseenterTooltip=function(e){tooltipHover=true;};onMouseleaveTooltip=function(e){tooltipHover=false;};Y.delegate(['mousemove','click'],onMousemove,'body','span.tooltip');Y.delegate(['clickoutside','mouseleave'],onMouseleave,'body','span.tooltip');Y.delegate('mouseenter',onMouseenterTooltip,'body','#tooltip');Y.delegate('mouseleave',onMouseleaveTooltip,'body','#tooltip');toolTipEl.on(['clickoutside','mouseleave'],onMouseleave);this._isInited=true;}};},'0.1',{requires:["node","overlay","event","event-outside","widget-anim"]});YUI.add('ysf-playersearch-plugin',(function(){var oLocalDS={},current_qs=null,current_source=null,xhr_in_progress=false,xhr_source=null;return function(Y){Y.namespace('Fantasy.Plugin');var sanitizeQuery=function(s){return Y.Lang.trim(s.replace(/[^a-zA-Z \']+/gi,"").toLowerCase());},resultFilter=function(q,a){var aResults=[],result='',last_result='',x=0;rQueryUTF8=new RegExp(checkCharMap(UTF8decode(unescape(q))),"gi");Y.some(a,function(v,i,arr){result=v.raw.sPlayerName;if(Y.Lang.isString(result)&&result.match(rQueryUTF8)){if(last_result!==result){aResults.push(v);x++;last_result=result;}}});return aResults;},resultTextLocator=function(r){return r.sPlayerName;},resultListLocator=function(a,b){var result=[];if(Y.Lang.isArray(a)){return a;}else if(Y.Lang.isArray(a.objects)&&!Y.Lang.isUndefined(a.objects[0].aResult)){oLocalDS[current_qs]={};oLocalDS[current_qs].aResult=a.objects[0].aResult;oLocalDS[current_qs].aCharMap='';return oLocalDS[current_qs].aResult;}},requestTemplate=function(s){return sanitizeQuery(s).substring(0,1);},checkCharMap=function(s){var cur_charMap=oLocalDS[current_qs].aCharMap;if(Y.Lang.isArray(cur_charMap)&&cur_charMap.length){var j=cur_charMap.length,loc=-1,sReg,oReg;while(j--){loc=s.indexOf('['+cur_charMap[j].substring(0,1));if(loc>=0){s=s.replace('['+cur_charMap[j].substring(0,1),'['+cur_charMap[j]);}else{sReg='['+cur_charMap[j]+']{1}';oReg=new RegExp(sReg,"g");s=s.replace(oReg,sReg);}}}
return s;},UTF8decode=function(s){s=sanitizeQuery(s);for(var a,b,i=-1,l=(s=s.split("")).length,o=String.fromCharCode,c="charCodeAt";++i<l;((a=s[i][c](0))&0x80)&&(s[i]=(a&0xfc)==0xc0&&((b=s[i+1][c](0))&0xc0)==0x80?o(((a&0x03)<<6)+(b&0x3f)):o(128),s[++i]=""));return s.join("");};Y.Fantasy.Plugin.PlayerSearch=Y.Base.create('YSFPlayerSearch',Y.Plugin.AutoComplete,[],{_handles:{},initializer:function(){var oPlug=this;oPlug.publish('clear',{'broadcast':2});oPlug.addTarget(Y.Global);xhr_source=YSF.Fantasy.League.uri+'/playersearchservice?q={query}';},render:function(){Y.Fantasy.Plugin.PlayerSearch.superclass.render.call(this);var oPlug=this;if(!oPlug.get('isWebkitSearchfield')){oPlug.renderClearButton();}
oPlug.set('zIndex',10);oPlug.bind();oPlug.sync();},renderClearButton:function(){var oPlug=this,clearNode=Y.Node.create('<a href="#" class="Inline Fl-start F-shade Mtop-sm F-icon Fz-med '+oPlug._cssPrefix+'-clear" style="display:none;">'+oPlug.get('inputNode').getAttribute('data-closeicon')+'</a>');oPlug.set('clearNode',clearNode);oPlug.get('inputNode').insert(clearNode,'after');},bind:function(){var oPlug=this;oPlug._handles.beforeValueChange=oPlug.before('valueChange',Y.bind(oPlug.beforeValueChange,oPlug));oPlug._handles.beforeQuery=oPlug.before('query',Y.bind(oPlug.beforeQuery,oPlug));oPlug._handles.afterResultsChange=oPlug.after('resultsChange',Y.bind(oPlug.afterResultsChange,oPlug));oPlug._handles.afterSelect=oPlug.after('select',Y.bind(oPlug.afterSelect,oPlug));oPlug._handles.onEscPress=Y.on('key',Y.bind(oPlug.onEscPress,oPlug),oPlug.get('inputNode'),'up:27');if(!oPlug.get('isWebkitSearchfield')){oPlug._handles.onNullValueChange=oPlug.on('valueChange',Y.bind(oPlug.onNullValueChange,oPlug));oPlug._handles.onClearButtonClick=oPlug.get('contentBox').ancestor('.playersearchbox').delegate('click',Y.bind(oPlug.onClearButtonClick,oPlug),'a.'+oPlug._cssPrefix+'-clear');}
oPlug._handles.onReturnPress=Y.on('key',Y.bind(oPlug.afterSelect,oPlug),oPlug.get('inputNode'),'down:13');oPlug.get('inputNode').focus();},afterSelect:function(e){var oPlug=this;oPlug.get('contentBox').ancestor('form').submit();},beforeQuery:function(e){var oPlug=this;current_qs=sanitizeQuery(e.query).substring(0,1);if(current_source===xhr_source){xhr_in_progress=true;}},beforeValueChange:function(e){var oPlug=this,newVal=(e.newVal)?sanitizeQuery(e.newVal).substring(0,1):'';if(!!!newVal){Y.later(0,{},function(){oPlug.hide();oPlug.fire('clear',{'inputNode':oPlug.get('inputNode')});});e.halt();return;}else if(xhr_in_progress){e.halt();return;}
if(!Y.Lang.isUndefined(oLocalDS[newVal])&&(current_source!==oLocalDS[newVal])){oPlug.set('source',oLocalDS[newVal].aResult);current_source=oLocalDS[newVal].aResult;}else if(!xhr_in_progress&&Y.Lang.isUndefined(oLocalDS[newVal])){oPlug.set('source',xhr_source);current_source=xhr_source;}},afterResultsChange:function(e){var oPlug=this;if(current_source===xhr_source){if(!Y.Lang.isUndefined(oLocalDS[current_qs])){oPlug.set('source',oLocalDS[current_qs].aResult);current_source=oLocalDS[current_qs].aResult;}
xhr_in_progress=false;Y.later(0,{},function(){var cur_value=oPlug.get('inputNode').get('value');if(cur_value!==''){oPlug.sendRequest(cur_value);}});}},onNullValueChange:function(e){var oPlug=this;if(!!!e.newVal){oPlug.set('clearable',false);}else if(!oPlug.get('clearable')){oPlug.set('clearable',true);}},onClearButtonClick:function(e){e.halt();var oPlug=this,anchorNode=e.currentTarget;oPlug.set('value','').get('inputNode').set('value','').focus();},onEscPress:function(e){var oPlug=this;oPlug.set('value','').get('inputNode').set('value','').focus();},sync:function(){var oPlug=this;if(oPlug.get('inputNode').get('value')!=''){oPlug.set('clearable',true);}}},{ATTRS:{'source':{'value':xhr_source},'resultFilters':{'value':[resultFilter]},'resultListLocator':{'value':resultListLocator},'resultTextLocator':{'value':resultTextLocator},'requestTemplate':{'value':requestTemplate},'maxResults':{'value':15},'isWebkitSearchfield':{'getter':function(){return(this.get('inputNode').getStyle('webkitAppearance')==='searchfield');}},'clearNode':{'value':null},'clearable':{'value':false,'validator':Y.Lang.isBoolean,'setter':function(v){var oPlug=this,inputNode=oPlug.get('inputNode'),clearNode=oPlug.get('clearNode');if(v){clearNode.setStyle('display','');}else{clearNode.setStyle('display','none');}}}},NS:'playerac'});};})(),'',{'requires':['node-base','event-base','base-build','event-key','autocomplete-sources','autocomplete-plugin','node-event-delegate']});YUI.add('ysf-form',function(Y){Y.namespace('Fantasy');Y.Fantasy.Form=function(cfg){this.handles={};Y.Fantasy.Form.superclass.constructor.apply(this,arguments);};Y.Fantasy.Form.NAME='YSFForm';Y.Fantasy.Form.ATTRS={strings:{value:{classes:{'cta':'ysf-cta','save':'ysf-cta-save','reset':'ysf-cta-reset','cancel':'ysf-cta-cancel','done':'ysf-cta-done','proceed':'ysf-cta-proceed','cta_disabled':'ysf-cta-disabled'}}},formNode:{valueFn:function(){if(this.get('contentBox').get('nodeName')==='FORM'){return this.get('contentBox');}},writeOnce:true},formSubmitFn:{value:null}};Y.extend(Y.Fantasy.Form,Y.Widget,{initializer:function(){var formNode=this.get('formNode'),formEl=null;if(!formNode){this.destroy();return null;}
formEl=Y.Node.getDOMNode(formNode);this.set('formSubmitFn',formEl.submit);formEl.submit=function(){return false;};Y.on('submit',function(e){e.halt();},formNode);this.render();},renderUI:function(){},bindUI:function(){var formNode=this.get('formNode'),oForm=this;this.handles.onClick=formNode.on('click',this.onSubmit,oForm);this.handles.onKeyPress=formNode.on('keyPress',this.onSubmit,oForm);this.handles.onSave=this.publish('save',{'emitFacade':true,'defaultFn':this.onSave});this.handles.onReset=this.publish('reset',{'emitFacade':true,'defaultFn':this.onReset});this.handles.onCancel=this.publish('cancel',{'emitFacade':true,'defaultFn':this.onReset});this.handles.onDone=this.publish('done',{'emitFacade':true,'defaultFn':this.onDone});this.handles.onProceed=this.publish('proceed',{'emitFacade':true,'defaultFn':this.onProceed});this.handles.onSubmit=this.publish('submit',{'emitFacade':true,'defaultFn':this.submit});},onSubmit:function(e){var targetNode=e.target,strings=this.get('strings'),cta_class=strings.classes.cta,ctaNode=(targetNode.hasClass(cta_class))?targetNode:targetNode.ancestor(function(n){return n.hasClass(cta_class);});if(ctaNode&&ctaNode.hasClass(strings.classes.save)){this.fire('save');}else if(ctaNode&&ctaNode.hasClass(strings.classes.reset)){this.fire('reset');}else if(ctaNode&&ctaNode.hasClass(strings.classes.cancel)){this.fire('cancel');}else if(ctaNode&&ctaNode.hasClass(strings.classes.done)){this.fire('done');}else if(ctaNode&&ctaNode.hasClass(strings.classes.proceed)){this.fire('proceed');}},onSave:function(e){this.fire('submit');},onReset:function(e){this.fire('submit');},onCancel:function(e){this.fire('submit');},onDone:function(e){this.fire('submit');},onProceed:function(e){this.fire('submit');},disableCtas:function(type){var oForm=this,contentBox=this.get('contentBox'),strings=this.get('strings'),ctaNodes=null;if(type==='all'){ctaNodes=contentBox.all('.'+strings.classes.cta);}else{ctaNodes=contentBox.all('.'+strings.classes[type]);}
if(ctaNodes){ctaNodes.each(function(n,i,nl){oForm.disableCta(n);});}},enableCtas:function(type){var oForm=this,contentBox=this.get('contentBox'),strings=this.get('strings'),ctaNodes=null;if(type==='all'){ctaNodes=contentBox.all('.'+strings.classes.cta);}else{ctaNodes=contentBox.all('.'+strings.classes[type]);}
if(ctaNodes){ctaNodes.each(function(n,i,nl){oForm.enableCta(n);});}},disableCta:function(n){var strings=this.get('strings');n.addClass(strings.classes.cta_disabled);if(n.hasClass(strings.classes.save)){n.replaceClass('ysf-cta-in-page-submit-active','ysf-cta-in-page-submit');}},enableCta:function(n){var strings=this.get('strings');n.removeClass(strings.classes.cta_disabled);if(n.hasClass(strings.classes.save)){n.replaceClass('ysf-cta-in-page-submit','ysf-cta-in-page-submit-active');}},submit:function(e){if(!this.get('disabled')){var formNode=this.get('formNode'),formEl=Y.Node.getDOMNode(formNode);formEl.submit=this.get('formSubmitFn');formEl.submit();}},syncUI:function(){},destructor:function(){}});},'',{requires:['widget']});YUI.add('ysf-ads',function(Y){if(!Y.Lang.isUndefined(YUI.Sports)&&!Y.Lang.isUndefined(YUI.Sports.Ads)){return;}
Y.namespace('Sports.Ads');Y.Sports.Ads={path:YUI.Fantasy.adPath,status:'uninitiated',getAttempt:null,getAttemptCount:0,load:function(){if(this.status!='dead'){Y.Sports.Ads.createCallFrame();if(Y.Get&&!this.getAttempt&&this.status!='ready'){this.getAttempt=Y.Get.script(this.path,{onSuccess:this.loadSuccess,onFailure:this.loadFailure,onTimeout:this.loadTimeout,data:this,timeout:10000,varName:["YAHOO.ads.darla"]});this.status='loading';}
return;}},loadSuccess:function(){Y.Sports.Ads.getAttempt=null;Y.Sports.Ads.status='ready';},loadFailure:function(){Y.Sports.Ads.getAttemptCount++;Y.Sports.Ads.status=(Y.Sports.Ads.getAttemptCount>4)?'failed':'dead';},loadTimeout:function(){Y.Sports.Ads.status='dead';},createCallFrame:function(){var cfID=Y.Sports.Ads.config.callFrame;if(!document.getElementById(cfID)){var callframe=document.createElement('iframe');callframe.id=cfID;callframe.style.display='none';document.body.appendChild(callframe);}},registerAd:function(position,elementID){if(typeof Y.Sports.Ads.config.destinationMap[position]=="undefined"){Y.Sports.Ads.config.destinationMap[position]=[];}
if(typeof Y.Sports.Ads.config.destinationMap[position][elementID]=="undefined"){Y.Sports.Ads.config.destinationMap[position].push(elementID);}},unregisterAd:function(position,elementID){if(Y.Sports.Ads.config.destinationMap[position][elementID]!='undefined'){var oldMap=Y.Sports.Ads.config.destinationMap[position];var newMap=[];for(i=0;i<oldMap.length;i++){if(oldMap[i]!=elementID)newMap.push(oldMap[i]);}
Y.Sports.Ads.config.destinationMap[position]=newMap;}},registerEvent:function(eventName,o){if(typeof Y.Sports.Ads.config.events[eventName]=="undefined"){return Y.Sports.Ads.config.events[eventName]=o;}
else return Y.Sports.Ads.config.events[eventName];},subscribe:function(element,action,adObject){return;if(this.status=='dead')return;if(this.status!='ready'){this.load();setTimeout(function(){Y.Sports.Ads.subscribe(element,action,adObject);},1000);return;}
for(idx in adObject){adObject[idx]=this.validateSiteAttributes(adObject[idx]);}
var oIdx,oAdParam;if(typeof adObject=="object"){for(idx in adObject){oIdx=idx;};oAdParam=this.registerEvent(oIdx,adObject[oIdx]);}
else{oIdx=adObject;oAdParam=this.registerEvent(adObject);};var oAdConf={action:oIdx,lv:oAdParam.lv};switch(action){case"now":if(this.temp==null){this.temp={};this.temp.oAdConfArr=[];this.temp.oAdConfArr.push(oAdConf);setTimeout(this.fireInitialEvent,0);}
else{this.temp.oAdConfArr.push(oAdConf);};break;case"pageload":if(this.temp==null){this.temp={};this.temp.oAdConfArr=[];this.temp.oAdConfArr.push(oAdConf);Y.on('load',Y.Sports.Ads.fireInitialEvent);}
else{this.temp.oAdConfArr.push(oAdConf);};break;default:YAHOO.util.Event.on(element,action,this.fireEvent,oAdConf);break;}},validateSiteAttributes:function(e){var siteAttrs='',newVal='',emStr='';e=(!e)?{}:e;e.em=e.em||{};var siteAttrs=e.em['site-attribute']||'game=<?php echo $ad_stamp; ?>';if(siteAttrs.indexOf('game=')<0){if(e.em['site-attribute']!=''){siteAttrs=siteAttrs+'game=<?php echo $ad_stamp; ?>;';}else{siteAttrs='game=<?php echo $ad_stamp; ?>;';}}
e.em['site-attribute']=siteAttrs;for(idx in e.em){if(emStr!=''){emStr+=',';}
newVal=(Y.Lang.isString(e.em[idx]))?"'"+e.em[idx]+"'":e.em[idx];emStr+=(idx+':'+newVal);}
emStr='{'+emStr+'}';e.em=encodeURIComponent(emStr);return e;},fireEvent:function(e,obj){YAHOO.ads.darla.event(obj.action,{lv:obj.lv});},fireInitialEvent:function(){if(window.YAHOO.ads.darla)YAHOO.ads.darla.setConfig(Y.Sports.Ads.config);for(idx in Y.Sports.Ads.temp.oAdConfArr){Y.Sports.Ads.fireEvent(null,Y.Sports.Ads.temp.oAdConfArr[idx]);}
Y.Sports.Ads.temp.oAdConf=null;Y.Sports.Ads.temp=null;Y.later(2000,Y.Sports.Ads,Y.Sports.Ads.setRotation);},setRotation:function(){Y.Sports.Ads.config.rotation=Y.Sports.Ads.config.rotation=Y.Sports.Ads.config.finalRotation;},temp:null};Y.Sports.Ads.config={callFrame:"fccall",callScript:"fc",rotation:0,finalRotation:3000,autoRotation:false,property:"fantasy",destinationMap:{},events:{}};Y.Sports.Ads.showAds={'bracketwizard':true}
YUI.namespace("Sports.Ads");YUI.Sports.Ads=Y.Sports.Ads;});YUI.add('ysf-dynaplayers',function(Y){Y.Fantasy.DynaPlayers=Y.Base.create('DynaPlayers',Y.Widget,[],{_handles:{},_origAsset:null,_adPositions:['REC','HB'],initializer:function(){var oMod=this,selfPopulate=oMod.get('selfPopulate'),oHistory=oMod.get('oHistory');if(selfPopulate){oMod.getPlayers();return;}
oMod.initNodes();oMod.bind();Y.each(oMod._adPositions,function(v,i,a){YUI.Sports.Ads.registerAd(v,'yspad'+v);});oMod.addTarget(Y.Global);},initNodes:function(){var oMod=this,ctaStrings;if(Y.one("#fantasy")){ctaStrings={classes:{'cta':'Btn-primary','save':'ysf-cta-save','reset':'ysf-cta-reset','cancel':'ysf-cta-cancel','done':'ysf-cta-done','proceed':'ysf-cta-proceed','cta_disabled':'ysf-cta-disabled'}};}else{ctaStrings={classes:{'cta':'ysf-cta','save':'ysf-cta-save','reset':'ysf-cta-reset','cancel':'ysf-cta-cancel','done':'ysf-cta-done','proceed':'ysf-cta-proceed','cta_disabled':'ysf-cta-disabled'}};}
oMod.set('searchForm',function(){var oForm=new Y.Fantasy.Form({contentBox:'#playersearch form',strings:ctaStrings});oForm.render();return oForm;}()).set('searchNode',function(){var searchForm=oMod.get('searchForm'),searchNode=(searchForm)?searchForm.get('formNode').one('input.playersearch_ac'):null;return searchNode;}()).set('filterForm',function(){var oForm=new Y.Fantasy.Form({contentBox:'#playerfilter form',strings:ctaStrings}),formNode=oForm.get('formNode');formNode.setAttribute('data-players-action',formNode.get('action'));oForm.render();return oForm;}()).set('playerNode',function(){var srcNode=oMod.get('srcNode'),playerNode=null;srcNode=srcNode||Y.one('body');if(Y.one("#fantasy")){playerNode=srcNode.one('#players-table-wrapper');}else{playerNode=srcNode.one('#players-table');}
if(playerNode){var anchorNode=playerNode.one('thead th.sorted a'),orig_href=null;if(anchorNode){orig_href=anchorNode.get('href');oMod.set('lastNonSearchIOAsset',orig_href);oMod._origAsset=orig_href;}}
return playerNode;}()).set('pageNodes',function(){return oMod.get('playerNode').all('.pagingnav');}());},bind:function(){var oMod=this,searchForm=oMod.get('searchForm'),filterForm=oMod.get('filterForm'),playerNode=oMod.get('playerNode'),oHistory=oMod.get('oHistory');oMod._handles.onSearchFormProceed=searchForm.on('proceed',Y.bind(oMod.onSearchFormSubmit,oMod),oMod,searchForm);oMod._handles.onSearchFormSubmit=searchForm.on('submit',Y.bind(oMod.onSearchFormSubmit,oMod),oMod,searchForm);oMod._handles.onFilterFormProceed=filterForm.on('proceed',Y.bind(oMod.onFilterFormProceed,oMod),oMod,filterForm);oMod._handles.onFilterClick=playerNode.delegate('click',Y.bind(oMod.onFilterClick,oMod),'table thead a');oMod._handles.onPagingClick=playerNode.delegate('click',Y.bind(oMod.onFilterClick,oMod),'.pagingnav li a');oMod._handles.onPlayerSearchClear=Y.Global.on('YSFPlayerSearch:clear',Y.bind(oMod.onPlayerSearchClear,oMod));oMod._handles.afterPlayerSearchSelect=Y.Global.after('YSFPlayerSearch:select',Y.bind(oMod.afterPlayerSearchSelect,oMod));oMod._handles.afterIOAssetChange=oMod.after('ioAssetChange',Y.bind(oMod.afterIOAssetChange,oMod));oMod._handles.onHistoryChange=oHistory.on('change',Y.bind(oMod.onHistoryChange,oMod));},onSearchFormSubmit:function(e,formObj){var oMod=this;if(!oMod.get('disabled')){e.halt();oMod.set('searchView',true);oMod.set('ioAsset',formObj);}},onFilterFormProceed:function(e,formObj){e.halt();var oMod=this;oMod.set('ioAsset',formObj);},onFilterClick:function(e){e.halt();var oMod=this,anchorNode=e.currentTarget;oMod.set('ioAsset',anchorNode.get('href'));},onPlayerSearchClear:function(e){var oMod=this;if(oMod.get('searchView')&&Y.Node.getDOMNode(e.inputNode)===Y.Node.getDOMNode(oMod.get('searchNode'))){oMod.set('searchView',false);oMod.set('ioAsset',oMod.get('lastNonSearchIOAsset'));oMod.onSearchFormSubmit(e,oMod.get('searchForm'));}},afterPlayerSearchSelect:function(e){var oMod=this;oMod.set('searchView',true);oMod.set('ioAsset',oMod.get('searchForm'));},onHistoryChange:function(e){var oMod=this;if(e.src!==Y.HistoryBase.SRC_ADD&&e.newVal&&e.newVal.psh){oMod.set('searchView',(e.newVal.psh.indexOf('playersearch')!==-1));if(e.changed.psh){oMod.getPlayers(e.newVal.psh,false);}else if(e.removed.psh){oMod.getPlayers(oMod._origAsset,false);}}},_onIOSuccess:function(i,o,args){var oMod=this;try{var response=Y.JSON.parse(o.responseText),errors=response.errors,ioAsset=args.ioAsset,add_history=args.add_history,form_serialized=args.form_serialized,history_string='',space_id;if(errors.length===0){var newNode=Y.Node.create('<div></div>');oHistory=oMod.get('oHistory');newNode.setHTML(response.content);if(!oMod.get('selfPopulate')){oMod.updateTable(newNode);oMod.updatePageNodes(newNode);oMod.updateFilterForm(newNode);}else{oMod.get('srcNode').setContent(newNode);Y.Fantasy.InitLinks.init(Y.Node.getDOMNode(oMod.get('srcNode')));oMod.set('selfPopulate',false);oMod.initializer();oMod.fire('selfPopulate');}
if(oMod.get('searchView')){Y.io(YSF.Fantasy.League.uri+'/playersearch_dynamic_view');space_id=YUI.Fantasy.SpaceIds.getSpaceId("playersearch");}else{oMod.set('lastNonSearchIOAsset',ioAsset);Y.io(YSF.Fantasy.League.uri+'/players_dynamic_view');space_id=YUI.Fantasy.SpaceIds.getSpaceId("playernote");}
YSF.use('ysp-i13n',function(Y){if(typeof(YSF.sendComscoreEvent)==='function'){YSF.sendComscoreEvent(space_id,encodeURIComponent(document.location.href))}});if(add_history){if(form_serialized===''){history_string=Y.Fantasy.DynaPlayers.cleanURlString(ioAsset).replace(location.protocol+'//'+location.host,'')}else{history_string=Y.Fantasy.DynaPlayers.cleanURlString(ioAsset.get('formNode').get('action')).replace(location.protocol+'//'+location.host,'')+'&'+form_serialized;}
oHistory.addValue('psh',history_string,{url:history_string});}
oMod.refreshAds();oMod.fire('refresh');}else{var oRedirectErrors={'e373':true,'e710':true};Y.each(errors,function(v,i,a){alert(v.title.replace('&nbsp;',' '));if(!Y.Lang.isUndefined(oRedirectErrors['e'+v.code])&&oRedirectErrors['e'+v.code]){if(Y.Lang.isString(ioAsset)){document.location=ioAsset;}else{oMod.set('disabled',true);ioAsset.submit();}}});}}catch(e){Y.log('io fail:');Y.log(e);}
oMod.set('lastIOTx',null);},_onIOFailure:function(i,o,args){var oMod=this;},_onIOEnd:function(i,args){var oMod=this;},afterIOAssetChange:function(e){var oMod=this;if(e.newVal){oMod.getPlayers();}},getPlayers:function(ioAsset,add_history){var oMod=this,ioUrl='',add_history=Y.Lang.isBoolean(add_history)?add_history:true,selfPopulate=oMod.get('selfPopulate'),ioAsset=(ioAsset)?ioAsset:oMod.get('ioAsset'),lastIOTx=oMod.get('lastIOTx'),tx=null,cfg={"headers":{"Ajax-Request":"true"}},form_serialized='';if(lastIOTx){lastIOTx.abort();oMod.set('lastIOTx',null);}
if(ioAsset&&!Y.Lang.isString(ioAsset)){var formNode=ioAsset.get('formNode');if(!oMod.get('searchView')&&(ioAsset===oMod.get('filterForm'))){var formNode=oMod.get('filterForm').get('formNode');formNode.set('action',formNode.getAttribute('data-players-action'));}
ioUrl=formNode.get('action');cfg.form={};cfg.form.id=formNode;cfg.method='GET';form_serialized=Y.IO.prototype._serialize(cfg.form);}else if(Y.Lang.isString(selfPopulate)){ioUrl=selfPopulate;}else{ioUrl=ioAsset;}
if(ioUrl&&ioUrl!==''){cfg.on={'success':oMod._onIOSuccess,'failure':oMod._onIOFailure,'end':oMod._onIOEnd};cfg.context=oMod;cfg.arguments={ioAsset:ioAsset,add_history:add_history,form_serialized:form_serialized};tx=Y.io(ioUrl,cfg);oMod.set('lastIOTx',tx);}},updateTable:function(newNode){var oMod=this,playerNode=oMod.get('playerNode'),targetNode=playerNode.one('.players'),newTargetNode=newNode.one('.players');targetNode.get('children').destroy(true);if(newTargetNode){targetNode.replace(newTargetNode);Y.Fantasy.InitLinks.init(Y.Node.getDOMNode(newTargetNode));}},updatePageNodes:function(newNode){var oMod=this,pageNodes=oMod.get('pageNodes'),matchNodes=newNode.all('.pagingnav'),matchNode=null;pageNodes.each(function(n,i,nl){matchNode=matchNodes.item(i);if(matchNode){n.setContent(matchNode.getContent());}else{n.get('children').remove(true);}});},updateFilterForm:function(newNode){var oMod=this,filterFormNode=oMod.get('filterForm').get('formNode'),targetFormNode=newNode.one('#playerfilter form'),selectsNode=filterFormNode.one('div.selects'),targetNode=newNode.one('#playerfilter form div.selects');if(targetFormNode&&targetNode){filterFormNode.set('action',targetFormNode.get('action'));selectsNode.setContent(targetNode.getContent());}},refreshAds:function(){var oMod=this,positions='',page=(oMod.get('searchView'))?'playersearch':'players';Y.each(oMod._adPositions,function(v,i,a){positions+=v;if((i+1)<a.length){positions+=',';}});YUI.Sports.Ads.subscribe(null,"now",{'tablerefresh':{lv:1,npv:true,sp:YUI.Fantasy.SpaceIds.getSpaceId(page),ps:positions}});},destructor:function(){var oMod=this,searchForm=oMod.get('searchForm'),filterForm=oMod.get('filterForm');for(h in oMod._handles){oMod._handles[h].detach();oMod._handles[h]=null;delete oMod._handles[h];}
if(searchForm){searchForm.destroy();}
if(filterForm){filterForm.destroy();}}},{ATTRS:{'searchForm':{value:null},'searchNode':{value:null},'filterForm':{value:null},'playerNode':{value:null},'pageNodes':{value:null},'ioAsset':{value:(YSF)?YSF.Fantasy.League.uri+'/players':null},'lastIOTx':{value:null},'lastNonSearchIOAsset':{value:null},'oHistory':{valueFn:function(){return new Y.History();}},'selfPopulate':{value:false},'searchView':{value:false}},cleanURlString:function(str){if(str.indexOf('#')>-1){str=str.split('#')[0];}
if(str.indexOf('?')<0){str+='?';}
return str;}});},'',{'requires':['ysf-form','ysf-ads','base-build','widget-base','node-event-delegate','io-form','json-parse','history','ysf-initlinks']});