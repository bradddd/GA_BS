!function(a){a.ucs||(a.ucs={});var b=a.ucs;b.UH_OUTER_ID="#UH",b.UH_MAIN_ID="#uhWrapper",b.HIDDEN_CLS="Hidden",b.DN_CLS="D(n)",b.ESC_DN_CLS="D\\(n\\)",b.components={search:{selector:"#UHSearch",init_cls:"UHSearch-Init",web_btn_selector:"#UHSearchWeb",prop_btn_selector:"#UHSearchProperty",input_selector:"#UHSearchBox",panel_selector:"#yucs-satray"},help:{selector:"#yucs-help"},profile:{selector:""},mail:{selector:"#yucs-mail"}};var c=document.getElementById("yucs-meta");c&&"srp"===c.getAttribute("data-property")&&"undefined"!=typeof window.Y?b.YObj=window.Y:b.YObj=a.YMedia||YUI(),b.ymreqid=a.ucs.ymreqid||function(){var a=(new Date).getTime(),b=null,c="xxxxxxxx-xxxx-xxxx-09xx-xxxxxxxxxx00".replace(/x/g,function(c){return b=(a+16*Math.random())%16|0,a=Math.floor(a/16),b.toString(16)});return c},b.protocol=c&&c.getAttribute("data-protocol")?c.getAttribute("data-protocol"):"http",b._sendBeacon=function(a,b){if(a){var c=new Image;c.height=0,c.width=0,c.style.display="none",c.src="https://geo.yahoo.com/t"+a,document.body.appendChild(c)}}}(window);YUI.add("jsonp-super-cached",function(a){a.namespace("jsonpsupercached"),YUI.Env.JsonpSuperCached||(YUI.Env.JsonpSuperCached={}),YUI.Env.JsonpSuperCached.services||(YUI.Env.JsonpSuperCached.services={});var b=YUI.Env.JsonpSuperCached.services;a.jsonpsupercached.getData=function(c){var d={},e=c.url||"",f=c.serviceName||"service",g=c.callbackName||"callback",h=(c.broadcast||!1,c.onSuccess||function(){});f="_"+f+"_"+g,d.timeout=c.timeout,d.onTimeout=c.onTimeout||null,d.onFailure=c.onFailure||null,d.async=!0;var i=-1===e.indexOf("?")?"?":"&",j=e+i+g+"=YUI.Env.JsonpSuperCached."+f,k=c.args||[],l=c.context||null;a.jsonpsupercached.get=YUI.Env.JsonpSuperCached.get||a.Get,b[j]||(b[j]={dataAvailable:!1,requestInProgress:!1,callbacksQueue:[]});var m=b[j];m.dataAvailable?h(m.data):(m.callbacksQueue.push(h),m.requestInProgress||(YUI.Env.JsonpSuperCached[f]=function(a){m.data=a,m.dataAvailable=!0;for(var b=m.callbacksQueue,c=0,d=b.length;d>c;c++){var e=b.pop();e.apply(l,[a].concat(k))}},m.requestInProgress=!0,a.jsonpsupercached.get.script(j,d)))}},"0.0.1");!function(a){a.ucs||(a.ucs={}),a.ucs.escapeRegex=function(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}}(window);ucs.YObj.use("node","event-resize","dom-screen",function(a){var b=a.one(window.ucs.UH_OUTER_ID),c=a.one("html"),d="Sticky-off",e=parseInt(b.getData("minW"),10)||970,f=function(){a.DOM.winWidth()>e?c.removeClass(d):c.addClass(d)};a.UA.ie&&a.UA.ie<9&&(f(),a.on("windowresize",f))});YUI.add("ucs-menu-group-plugin",function(a){function b(a){this.host=a.host,this.addClasses=a.addClasses}a.namespace("ucs");var c='<li class="{isDisabled} {isActive} {menuClass} {separatorBottom} {separatorTop} {listClasses}"><a target="{target}" {inProductHelp} {actionData} href="{url}" {disabledAria} class="C(#000)! Td(u):h {linkClasses}" data-ylk="rspns:nav;t3:tl-lst;t5:custitm;slk:custitm;elm:itm;elmt:custitm;itc:0;cpos:{cpos}">{icon}{menuText}</a></li>',d='<li class="{isDisabled} {isActive} {menuClass} {separatorBottom} {separatorTop} {listClasses}"><a href="#" data-customevt="true" {actionData} {disabledAria} {checkedAria} class="C(#000)! Td(u):h {linkClasses}" data-ylk="rspns:nav;t3:tl-lst;t5:custitm;slk:custitm;elm:itm;elmt:custitm;itc:0;cpos:{cpos}">{icon}{menuText}</a></li>',e='<ul class="Mx(-10px) Pos(r) My(0) C(#000)">{menuItems}</ul>',f="Bdw(0) Bdtw(1px) Bds(s) Bdc(#e2e2e6)",g="Bdw(0) Bdbw(1px) Bds(s) Bdc(#e2e2e6)",h="yucs-menu-group",i="ul",j="http://l.yimg.com/a/lib/ush/icon.gif",k="https://s.yimg.com/lq/lib/ush/icon.gif";b.NAME="ucs-menu-group-plugin",b.NS="menugroup",b.prototype={_addMenuGroups:function(b,c,d,e){var f,g,j=this.host.panel,k="";j.all(i).addClass(h);for(var l=0,m=b.length;m>l;l++)k+=this._addMenuGroup(b[l],d,e);f=a.Node.create(k),g=d?"debug-item":"minty-item",b=f.all(i),0===b.size()&&(b=f),b.addClass(e+" "+g),"bottom"===c?j.append(f):j.prepend(f),j.all(i).slice(0,-1).addClass("Bdw(0) Bdbw(1px) Bds(s) Bdc(#e2e2e6)"),j.all(i).each(function(a){if(a=a.get("children"),a.size()>0){var b=window.ucs.escapeRegex("Bdw(0) Bdbw(1px) Bds(s) Bdc(#e2e2e6)");a.item(a.size()-1).removeClass(b)}}),a.Global.fire("ucs-rapid:refreshmodules","uhWrapper","0")},_addMenuGroup:function(b,c,d){for(var f,g="",h=!0,i="Py(8px)",j=0,k=b.length;k>j;j++)f=b[j],c?(f.isDebugItem=!0,f.menuClass="debug-item"):(f.isDebugItem=!1,f.menuClass="minty-item"),f.menuClass+=this.addClasses&&this.addClasses.menuClass&&" "+this.addClasses.menuClass.join(" ")||" Px(10px)",f.menuClass+=" "+i,f.cpos=j+1,h&&(h=!1,i=" Pb(8px)"),g+=this._addMenuItem(f,d);return g=a.substitute(e,{menuItems:g})},_addMenuItem:function(b,e){var f="";if(b.isActive?b.checkedAria='aria-checked="true"':b.checkedAria="",b.isDisabled?b.disabledAria='aria-disabled="true"':b.disabledAria="",b.actionData&&b.actionData.match(/^om:/))return f;switch(b.actionType){case"link":f=a.substitute(c,b,this._processTemplateValue);break;case"customEvent":f=a.substitute(d,b,this._processTemplateValue)}return f&&(f=b.isDebugItem?f.replace(/separator/,"separator debug-item"):f.replace(/separator/,"separator minty-item")),f},_processTemplateValue:function(b,c,d){a.log("key = "+b+" value = "+c+" meta_data = "+d);var e="",h="https:"===document.location.protocol?k:j;switch(b){case"icon":void 0!==c&&(e="available"===c?'<img src="'+h+'" class="yucs-opi available"/>':"offline"===c?'<img src="'+h+'" class="yucs-opi offline"/>':"invisible"===c?'<img src="'+h+'" class="yucs-opi invisible"/>':"busy"===c?'<img src="'+h+'" class="yucs-opi busy"/>':"idle"===c?'<img src="'+h+'" class="yucs-opi idle"/>':'<img src="'+c+'" />');break;case"separatorTop":c&&(e=f);break;case"separatorBottom":c&&(e=g);break;case"actionData":c&&(e='data-mad="'+c+'"');break;case"inProductHelp":c&&(e='data-inproducthelp="'+c+'"');break;case"listClasses":case"linkClasses":c&&(e=c);break;case"isDisabled":c&&(e="disabled");break;case"isActive":c&&(e="sp active");break;case"checkedAria":e=c;break;default:e=c}return e}},a.ucs.MenuGroupPlugin=b},"1.0.0",{requires:["ucs-menu-utils","node-screen","plugin"]});YUI.add("ucs-menu-plugin",function(a){function b(a){this.host=a.host,b.superclass.constructor.apply(this,arguments)}var c=(a.Lang,"https://s.yimg.com/os/mit/media/m/base/images/transparent-95031.png"),d='<iframe src="'+c+'" aria-hidden="true" tabindex="-1" frameborder="0" class="uhIframeTooltip Bd(0) Pos(a) T(-10px) Start(-10px) W(100%) H(100%) P(10px) Op(0)"></iframe>',e='<div class="js-Tooltip-Wrapper Pos(r)"><div tabindex="-1" class="Z(5) {{panelClasses}}">'+d+"</div></div>",f=[{name:"NorthFarWest",pos:0},{name:"NorthWest",pos:.25},{name:"North",pos:.5},{name:"NorthEast",pos:.75},{name:"NorthFarEast",pos:1}],g=["ar-jo","he-il","ur-pk","ur-tk","he-il","ar"],h=a.one("#yucs-meta"),i=h&&h.getAttribute("data-languagetag")||"en-us",j=a.Array.indexOf(g,i.toLowerCase())>=0,k=function(){var b=a.Node.create(e.replace(/\{\{panelClasses\}\}/,this.panel.get("className")+" Px(10px)")),c=b.get("children").item(0);c.appendChild(this.panel.remove(!1)),this.hiddenPanel=c,this.panel.set("className","Pos(r) M(0) TooltipContent"),this.appendChild(b)},l=window.ucs.DN_CLS,m=window.ucs.escapeRegex,n=function(){var b,c,d,e,g,h,i,k,n,o,p,q,r,s,t,u,v,w,x,y=this.hiddenPanel,z=this,A=y.hasClass(m(l)),B=0,C=0,D=10,E=[],F=[],G=15;for(p=y.getAttribute("style"),A&&(y.setStyles({top:"-100px",height:"5px",marginLeft:"0",marginRight:"0"}),y.replaceClass(m(l),"Ov(h)")),u=a.one(".UHCol1"),v=a.one("#uhNavWrapper"),j?(w=v.get("region").left,x=u.get("region").right):(w=u.get("region").left,x=v.get("region").right),k=y.get("region"),this.panelWidth=k.width,d=window.innerWidth<x-w?{left:0,right:window.innerWidth}:{left:w,right:x},b=y.get("className"),c=/North\w+/g.exec(b),e=y.hasClass("North"),g=!!b.match(/Arrow/),h=g&&z.one(".yucs-trigger i").get("region")||z.get("region"),i=h.left+h.width/2,c=c&&c[0]||"North",y.removeClass(c),s=0,t=f.length;t>s;s++)B=f[s].pos,C=B%1===0&&(-1+2*B)*D||0,B=k.left+k.width*B-C,n=B-i,o=k.left-n,r=d.right-(o+k.width),q=o-d.left,E.push(q>=G?Math.floor(q):Number.POSITIVE_INFINITY),F.push(r>=G?Math.floor(r):Number.POSITIVE_INFINITY);q=Math.min.apply(null,E),r=Math.min.apply(null,F),r>q?(s=a.Array.indexOf(E,q),o=q+d.left):(s=a.Array.indexOf(F,r),o=d.right-(k.width+r));var H=f[s].name,I=H.match(/(West|East)/);I&&j&&(I=I[1],H=H.replace(I,{West:"East",East:"West"}[I])),y.addClass(H).setX(o),A&&(y.replaceClass(m("Ov(h)"),l),y.setStyles({right:"auto",top:g?"-2px":"",height:""}))};b.NAME="MenuPlugin",b.NS="addons",b.ATTRS={},a.extend(b,a.Plugin.Base,{initializer:function(){var a=this.host;/\w+DropDown/g.test(a.get("className"))?this.hiddenPanel=this.panel:(k.call(a),n.call(a)),a.resetPosition&&(this.setPosition=n),this.onHostEvent("ucs:showMenu",this._show),this.onHostEvent("ucs:hideMenu",this._hide),this.onHostEvent("ucs:resetPosition",this._resetPosition)},destructor:function(){},_resetPosition:function(){this.setPosition&&this.setPosition.call(this.host)},_show:function(a){var b=this.host;b.fire("ucs:show",a),this._resetPosition(),b.hiddenPanel.removeClass(m(l))},_hide:function(a){var b=this.host;b.hiddenPanel.addClass(l),b.fire("ucs:hide",a)}}),a.namespace("Plugin.Uh").MenuPlugin=b},"0.1.0",{requires:["plugin"]});YUI.add("ucs-menu-utils",function(a){a.namespace("ucs");var b=500,c=!0,d=(("https"===ucs.protocol?"https://s.yimg.com":"http://l.yimg.com")+"/kx/yucs/uh3s/uh/26/js/menu_group_plugin.js",window.ucs.DN_CLS),e=window.ucs.escapeRegex;a.ucs.MenuUtils=function(b,c){var f=c&&c.panel||"> div",g=c&&c.trigger||"> a";if(this.openDelay=c&&c.openDelay||300,this.menu=b=b.one&&b||a.one(b),this.menu.trigger=b.one(g),this.menu.panel=b.one(f),this.menu.panel){this.menu.hiddenPanel=this.menu.panel,this.ylt=c&&c.ylt||"",this.rapidData=c.rapidData||null,c&&c.menuGroupPlugin&&(this.menu.plug(a.ucs.MenuGroupPlugin,c.menuGroupPlugin.config||{}),this.menu.resetPosition=!0),f=this.menu.panel,this.menu.hiddenPanel=f.hasClass(e(d))&&f||f.one("."+d);var h=c.event||"mouseenter";this._initEvents(h)}},a.ucs.MenuUtils.prototype={_initEvents:function(b){a.on("domready",this._initMenuPlugin,this);var d=function(){return a.UA.touchEnabled?!0:"object"==typeof window&&("ontouchstart"in window||window.navigator.maxTouchPoints>0||window.navigator.msMaxTouchPoints>0)},e=d();"mouseenter"!==b||e||this.menu.on([b,"mouseleave"],this._handleMenuEvent,this),e&&(this.menu.trigger.on("touchend",function(a){a.preventDefault(),this._handleMenuEvent()},this),this.menu.panel.delegate("touchend",function(a){a.preventDefault(),this._handleAnchorClick()},"a",this)),this.menu.trigger.on("click",this._handleMenuEvent,this),this.menu.panel.delegate("click",this._handleAnchorClick,"a",this),this.menu.panel.delegate("click",function(b){this.navigationDisabled?b.halt():(this.navigationDisabled=!0,this.navTimer=a.later(3e3,this,function(a){this.navigationDisabled=!1,this.navTimer.cancel(),this.navTimer=null}))},"a",this);var f=this.menu.on("ucs:showMenu",function(a){f.detach(),this.menu.addons||(this._initMenuPlugin(),this.fireMenuEvent(c,a))},this)},_handleMenuEvent:function(c){var d=c.type,e="mouseenter"===d||"click"===d&&this._isHidden();this.ShowMenuQueue&&this.ShowMenuQueue.cancel();var f=this.openDelay;"click"===d&&(f=1,c.preventDefault(),this.bodyEvent&&this.bodyEvent.detach(),e&&(this.bodyEvent=a.one("body").on("click",this._handleBodyClick,this))),e?this.fireBeacons=a.later(b,this,function(){this._isHidden()===!1&&this._fireRapid()}):this.fireBeacons&&this.fireBeacons.cancel(),e?this.ShowMenuQueue=a.later(f,this,function(a,b){this.fireMenuEvent(a,b)},[e,c]):this.fireMenuEvent(e,c)},fireMenuEvent:function(a,b){this.menu.fire(a?"ucs:showMenu":"ucs:hideMenu",b)},_handleAnchorClick:function(a){var b=a.currentTarget.get("href");b.match(/\.crumb/g)&&this.fireMenuEvent(!c,a)},_initMenuPlugin:function(){this.menu.plug(a.Plugin.Uh.MenuPlugin)},_isHidden:function(){return this.menu&&this.menu.hiddenPanel&&this.menu.hiddenPanel.hasClass?this.menu.hiddenPanel.hasClass(e(d)):!1},_handleBodyClick:function(a){var b=this.menu;b.contains(a.target)||(b.addons?b.fire("ucs:hideMenu",a):(b.fire("ucs:hide",a),b.hiddenPanel.addClass(d)),this.bodyEvent.detach())},_fireRapid:function(){var b=this.rapidData;b&&a.Global.fire("ucs-rapid:event",b),a.Global.fire("ucs-rapid:refreshmodules","uhWrapper","0")}},a.augment(a.ucs.MenuUtils,a.EventTarget)},"1.0",{requires:["node","event","event-mouseenter","event-custom","substitute","node-focusmanager","get","ucs-menu-plugin","plugin"],use:["ucs-menu-group-plugin"]});YUI.add("gallery-jsonp",function(a){function b(){this._init.apply(this,arguments)}var c=a.Lang.isObject,d=a.Lang.isFunction;b._pattern=/\bcallback=(.*?)(?=&|$)/i,b._template="callback={callback}",b.prototype={_init:function(b,c){this.url=b,c=c||{},d(c)&&(c={on:{success:c}}),c.on=c.on||{},c.on.success||(c.on.success=this._getCallbackFromUrl(b)),this._config=a.merge({on:{},context:this,args:[],format:this._format},c)},_getCallbackFromUrl:function(e){var f,g,h,i,j=e.match(b._pattern);if(j){for(g=a.config.win,h=j[1].split(/\./).reverse(),f=h.shift(),i=h.length-1;i>=0;--i)if(g=g[h[i]],!c(g))return null;if(c(g)&&d(g[f]))return a.bind(g[f],g)}return null},send:function(b){function c(a){return d(a)?function(b){delete YUI.Env.JSONP[e],a.apply(f.context,[b].concat(f.args))}:null}if(!this._config.on.success)return this;var e=a.guid().replace(/-/g,"_"),f=this._config,g=f.format.call(this,this.url,"YUI.Env.JSONP."+e);return YUI.Env.JSONP[e]=c(f.on.success),a.Get.script(g,{onFailure:c(f.on.failure),onTimeout:c(f.on.timeout||f.on.failure),timeout:f.timeout}),this},_format:function(a,c){var d,e=b._template.replace(/\{callback\}/,c);return b._pattern.test(a)?a.replace(b._pattern,e):(d=a.slice(-1),"&"!==d&&"?"!==d&&(a+=a.indexOf("?")>-1?"&":"?"),a+e)}},a.JSONPRequest=b,a.jsonp=function(b,c){return new a.JSONPRequest(b,c).send()},YUI.Env.JSONP||(YUI.Env.JSONP={})},"gallery-2010.08.11-20-39",{requires:["get","oop"]});YUI.add("ucs-logodebug",function(a){a.namespace("ucs");var b=document.getElementById("imageCheck"),c=document.getElementById("yucs-logo-ani"),d=!1;c&&(-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(d=!0),(b&&0===b.offsetWidth&&void 0===b.readyState||b&&0===b.offsetWidth&&"uninitialized"===b.readyState||d&&b&&"uninitialized"===b.readyState||d&&b&&void 0===b.readyState)&&(c.style.visibility="visible",c.style.position="relative")),a.ucs.LogoDebug=function(a){a.on("click",this._handleClick,this),this.publish("ucs:logoDebug",{broadcast:2,emitFacade:!0})},a.ucs.LogoDebug.prototype={_handleClick:function(a){a.altKey&&(a.halt(),this.fire("ucs:logoDebug"))}},a.augment(a.ucs.LogoDebug,a.EventTarget)},"1.0",{requires:["node"]}),function(){ucs.YObj.use("node","ucs-logodebug",function(a){var b=a.one(".YLogoMY");if(b){new a.ucs.LogoDebug(b)}})}();(function(){var f="%Y",e="%y",h="%m",a="%d",c="_",b=document.getElementById("yucs")&&document.getElementById("yucs").getAttribute("data-lang").toLowerCase()||"en-us";if(!window.ucs){window.ucs={};}function d(i){switch(i){case"tr-tr":return[" "];case"es-cl":case"nl-nl":case"ta-in":case"zh-hant-cn":case"hi-in":case"kn-in":return["-"];case"de-at":case"de-ch":case"de-de":case"fi-fi":case"nb-no":case"pl-pl":case"ro-ro":case"ru-ru":return["."];default:return["/"];}}function g(i){switch(i){case"en-ae":case"en-au":case"en-ca":case"en-ie":case"en-in":case"en-my":case"en-nz":case"en-ph":case"en-sg":case"en-us":case"es-us":case"ja-jp":case"sv-se":return[h,c,a,c,e].join("");case"ro-ro":case"fi-fi":case"pl-pl":case"en-gb":case"th-th":case"en-ie":case"tr-tr":case"vi-vn":return[a,c,h,c,f].join("");case"zh-hant-cn":case"zh-hant-tw":return[e,c,h,c,a].join("");default:return[a,c,h,c,e].join("");}}window.ucs.getLocalDateFormat=function(i){i=i.toLowerCase();var k=d(i),j=g(i);return j.replace(new RegExp(c,"g"),k);};window.ucs.localeDateFormat=window.ucs.getLocalDateFormat(b);})();ucs.YObj&&ucs.YObj.use("datatype-date",function(a){}),YUI.add("ucs-timestamp-library",function(a){a.namespace("ucs.Timestamp"),a.ucs.Timestamp={getTimeStamp:function(b){var c,d,e,f,g,h="AM",i=a.one(window.ucs.UH_MAIN_ID),j=b.dateRef||new Date,k=b.date,l=b.locale?b.locale:i.getAttribute("data-lang"),m=k.getTime(),n=k.getDate(),o=j.getDate(),p=j.getTime(),q=p-m,r=o-n,s=!0,t=!1,u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return l=a.Lang.isString(l)?l:"en-us",s=/^en-us$/i.test(l),t=/^zh-hant/i.test(l),t&&(u=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]),q=parseInt(q/1e3,10),d=k.getMonth(),e=k.getHours(),f=k.getMinutes(),g=p-(60*j.getHours()*60*1e3+60*j.getMinutes()*1e3+1e3*j.getSeconds()+j.getMilliseconds()),10>f&&(f="0"+f),e>=12&&(h="PM"),e>12&&(e-=12),b.type&&"short"===b.type&&a.DataType&&a.DataType.Date?c=0===r?e+":"+f+" "+h:a.DataType.Date.format(k,{format:window.ucs.localeDateFormat}).replace(/\b0(?=\d)/g,""):s||t?0===r?60>q?c=q>1?q+(t?"秒前":" secs ago"):t?"剛剛":q+" sec ago":3600>q?(q=Math.ceil(q/60,10),c=2>q?q+(t?"分鐘前":" min ago"):q+(t?"分鐘前":" mins ago")):86400>q&&(q=Math.ceil(q/3600),c=q>1?q+(t?"小時前":" hours ago"):q+(t?"小時前":" hour ago")):c=864e5>g-m&&0!==r?(t?"昨天":"Yesterday ")+e+":"+f+" "+h:t?u[d]+n+"日":u[d]+" "+n+"&nbsp;&nbsp;"+e+":"+f+" "+h:c=u[d]+" "+n+"&nbsp;&nbsp;"+e+":"+f+" "+h,c}}},"1.0",{requires:["node","datatype-date"]});YUI.add("ucs-usermenu",function(a){a.namespace("ucs");var b="#yucs-profile",c=(a.one("#yucs-meta").getAttribute("data-property"),"ucs:userMenuShow"),d="ucs:userMenuItemClick",e="click",f=window.ucs.DN_CLS,g={eventName:"hvr",keys:{sec:"uh-d",slk:"userhvr",_p:"0",rspns:"op",t1:"a1",t2:"uh-d",t3:"tl-lst",t5:"userhvr",elm:"tl",elmt:"usr",itc:"1"}};a.ucs.UserMenu=function(){this.showMenuYlt=a.one(b).getAttribute("data-yltmenushown")||"",a.ucs.UserMenu.superclass.constructor.call(this,a.one("#yucs-profile"),{ylt:this.showMenuYlt,panel:"#yucs-profile-panel",rapidData:g,menuGroupPlugin:{config:{addClasses:{menuClass:["Px(16px)","Ell"]}}}}),this._initCustomEvents()},a.extend(a.ucs.UserMenu,a.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(c,{broadcast:2,emitFacade:!0}),this.publish(d,{broadcast:2,emitFacade:!0}),a.Global.on("ucs:userMenuItems",this._handleUserMenuItems,this,{location:"bottom",menuType:"minty-um-item"}),this.menu.delegate(e,this._handleMenuItemClick,"ul.minty-um-item li a",this),this.menu.on("ucs:show",this._showMenu,this)},_handleUserMenuItems:function(b,c){a.log("user menu items received");var d="bottom",e="minty-user-item";if(b.menuGroups&&b.menuGroups.length){c&&c.location&&(d=c.location),c&&c.menuType&&(e=c.menuType);var f=b.menuGroups,g=this.menu.panel;b.reset&&g&&g.all("."+e).each(function(a){a.remove(!0)}),f.length>0&&this.menu.menugroup._addMenuGroups(f,d,!1,e)}},_handleMenuItemClick:function(b){a.log("user menu item click");var c,e,f,g;if(c=b.target,c=c.ancestor("a",!0),e=c.getAttribute("data-mad"),f=c.getAttribute("data-customevt"),g=c.ancestor("li").hasClass("disabled")||!1)return void b.halt();if(f&&b.halt(),!g){var h={actionData:e};this.fire(d,h)}},_showMenuItems:function(){this.menu.all("ul").removeClass(window.ucs.escapeRegex(f))},_showMenu:function(){this.fire(c)}})},"1.0",{requires:["node","event-custom","event-hover","ucs-menu-utils"]}),function(){window.ucs.YObj.use("node","ucs-usermenu",function(a){var b,c=a.one("#yucs-profile");c&&(b=new a.ucs.UserMenu(c))})}();!function(){window.ucs.YObj.use("node","event-custom",function(a){var b=a.one("#yucs-signout")||a.one("#yuhead-me-signout")||a.one("#yucs .yucs-signout");b&&"mail"===a.one("#yucs-meta").getAttribute("data-property")&&b.on("click",function(){a.Global.fire("ucs:signout")})})}();window.ucs||(window.ucs={}),window.ucs.api=window.ucs.api||{},YUI.add("ucs-rapid",function(a){"use strict";a.namespace("ucs");var b="ucs-rapid:",c=b+"click",d=b+"event",e=b+"destroy-instance",f=b+"addmodules",g=b+"ready",h=b+"removemodules",i=b+"refreshmodules",j=null;a.ucs.Rapid=function(a,b,c){this.container=a,b&&(this.rapidConfig=b,this.tracked_mods=c,this._init())},a.ucs.Rapid.prototype={_init:function(){var a=window;j||a.YAHOO&&a.YAHOO.i13n&&a.YAHOO.i13n.Rapid&&(j=new a.YAHOO.i13n.Rapid(this.rapidConfig)),j&&(j.addModules(this.tracked_mods),this._publish())},_publish:function(){a.Global.on(c,this._handleBeaconing,this,"click"),a.Global.on(d,this._handleBeaconing,this,"event"),a.Global.on(e,this._handleDestroyInstance,this),a.Global.on(f,this.addModules,this),a.Global.on(h,this.removeModule,this),a.Global.on(i,this.refreshModule,this),a.Global.fire(g,{})},getUHRapidInstance:function(){return j},_handleBeaconing:function(b,c){if(!b)return void a.log("data is absent.");if(!j)return void a.log("uhRapidInstance is absent.");if(b.keys||(a.log("no data keys. setting it to empty"),b.keys={}),b.outcome||a.log("no outcome. setting it to null"),"click"===c)b.sec||(a.log("SEC is absent. Using default sec."),b.sec="uh-d"),b.slk||(a.log("SLK is absent. Using default slk."),b.slk="hd"),b._pValue||(a.log("_pValue is absent. Using default _pValue."),b._pValue=0),this.beaconClick(b.sec,b.slk,b._pValue,b.keys,b.outcome);else{if(!b.eventName)return void a.log("event Name is absent.");this.beaconEvent(b.eventName,b.keys,b.outcome)}},beaconClick:function(b,c,d,e,f){j?j.beaconClick(b,c,d,e,f):a.log("no rapid instance available. cant fire beacon click.")},beaconEvent:function(b,c,d){j?j.beaconEvent(b,c,d):a.log("no rapid instance available. cant fire beacon event.")},addModules:function(b,c,d){c=!1,j?this.isModuleTracked(b)?a.log("module is already tracked"):j.addModules(b,c,d):a.log("no rapid instance available. cant add module.")},removeModule:function(b){j?j.removeModule(b):a.log("no rapid instance available. cant remove module.")},refreshModule:function(b,c,d,e){c=!1,j?this.isModuleTracked(b)?j.refreshModule(b,c,d,e):a.log("module is not tracked, we cant do a refreshModule"):a.log("no rapid instance available.")},isModuleTracked:function(b){return j?j.isModuleTracked(b):void a.log("no rapid instance available. dont know if module is present.")},_handleDestroyInstance:function(){j?(this.rapidConfig={},j.destroy(),j=null):a.log("no rapid instance available. cant destroy instance.")}}},"0.1",{requires:["array-extras","event-custom","node"]}),function(){"use strict";window.ucs.YObj.use("node","ucs-rapid",function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n=window,o=a.one(".yucs"),p=a.one("#yucs-meta"),q=a.all("[data-uh-test]"),r="standard",s=n.YAHOO&&n.YAHOO.i13n||null,t={},u={};return o?(b=o.getAttribute("data-spaceid"),c=o.getAttribute("data-property"),d=o.getAttribute("data-device"),k="true"===o.getAttribute("data-stencil"),d&&(i=!!d.match(/smartphone/gi),j=!!d.match(/tablet/gi)),p&&(e=p.getAttribute("data-test_id"),f=p.getAttribute("data-languagetag"),g=p.getAttribute("data-forcecobrand"),h=p.getAttribute("data-cobrand"),l=p.getAttribute("data-headercollapse")),g&&"standard"!==g?r=g:h&&"standard"!==h&&(r=h),s&&("undefined"!=typeof s.SPACEID&&(b=s.SPACEID),"undefined"!=typeof s.WEBWORKER_FILE&&(m=s.WEBWORKER_FILE)),b||(b="1197757397"),void(n.ucs.rapid||(u={spaceid:b,keys:{site:c,ver:"uh3s",psp:r,lang:f,uh_test:""},apv:!1,client_only:0,dwell_on:!1,pageview_on_init:!1,rapid_noclick_resp:"uh-ignore-rapid"},s&&"undefined"!=typeof s.TEST_ID?u.test_id=s.TEST_ID:e&&(u.test_id=e),!q.isEmpty()&&u&&u.keys&&(u.keys.uh_test=a.Array.map(q.getDOMNodes(),function(a){return a.getAttribute("data-uh-test")}).join()),i?t=k?{NavMenu:"uh-m",MobileUH:"uh-m",SubMenuCountries:"uh-m","searchbox-mojit":"uh-m"}:"frontpage"===c&&"att"===g?{yucs:"uh-m","yucs-sidebar":"uh-m","yucs-search":"uh-m"}:{yucs:"uh-m","yucs-sidebar":"uh-m"}:j?t=k?{NavMenu:"uh-t",MobileUH:"uh-t",SubMenuCountries:"uh-t"}:{yucs:"uh-t","yucs-sidebar":"uh-t"}:k&&(t={masterNav:"uh-d",uhWrapper:"uh-d"}),"answers"===c&&(m||(m="/static/js/rapidworker-1.0.js"),u.webworker_file=m),l&&(u.keys.state="initial"),"groups"===c&&(m||(m="/js/rapid_worker.js"),u.webworker_file=m),"news"!==c&&"games"!==c&&"sports"!==c&&"finance"!==c&&"music"!==c&&"tv"!==c&&"weather"!==c&&"celebrity"!==c&&"homes"!==c||(m||(m="/__rapid-worker-1.1.js"),u.webworker_file=m),c.match(/mag_/gi)&&(m||(m="/lib/metro/g/uicontrib/rapid_worker_1.1.1.js"),u.webworker_file=m),n.ucs.rapid=new a.ucs.Rapid(o,u,t)))):void a.log("UH is absent")})}();window.ucs&&window.ucs.YObj&&!function(a){YUI.add("ucs-meta",function(a){"use strict";if(a.namespace("ucs"),a.ucs.Meta)return void a.log("Y.ucs.Meta is already defined.","debug","ucs-meta");var b=null,c=function(b){return a.version>="3.5.1"?b.getData():{authstate:b.getAttribute("data-authState"),cobrand:b.getAttribute("data-cobrand"),crumb:b.getAttribute("data-crumb"),mccrumb:b.getAttribute("data-mc-crumb"),gta:b.getAttribute("data-gta"),device:b.getAttribute("data-device"),experience:b.getAttribute("data-experience"),firstname:b.getAttribute("data-firstname"),flight:b.getAttribute("data-flight"),forcecobrand:b.getAttribute("data-forcecobrand"),guid:b.getAttribute("data-guid"),host:b.getAttribute("data-host"),https:b.getAttribute("data-https"),languagetag:b.getAttribute("data-languagetag"),property:b.getAttribute("data-property"),protocol:b.getAttribute("data-protocol"),shortfirstname:b.getAttribute("data-shortfirstname"),shortuserid:b.getAttribute("data-shortuserid"),status:b.getAttribute("data-status"),spaceid:b.getAttribute("data-spaceid"),test_id:b.getAttribute("data-test_id"),userid:b.getAttribute("data-userid"),style:b.getAttribute("data-style")}};a.ucs.Meta=function(a){b=this,b.components={meta:a},b.data=c(a)},a.ucs.Meta.prototype={authState:function(){return a.Object.getValue(b.data,"authstate")},cobrand:function(){return a.Object.getValue(b.data,"cobrand")},crumb:function(){return a.Object.getValue(b.data,"crumb")},mccrumb:function(){return a.Object.getValue(b.data,"mccrumb")},gta:function(){return a.Object.getValue(b.data,"gta")},device:function(){return a.Object.getValue(b.data,"device")},experience:function(){return a.Object.getValue(b.data,"experience")},find:function(b){return a.one(a.Lang.sub("#yucs-{component}",{component:b}))},firstname:function(){return a.Object.getValue(b.data,"firstname")},flight:function(){return a.Object.getValue(b.data,"flight")},forcecobrand:function(){return a.Object.getValue(b.data,"forcecobrand")},guid:function(){return a.Object.getValue(b.data,"guid")},host:function(){return a.Object.getValue(b.data,"host")},https:function(){return a.Object.getValue(b.data,"https")},languagetag:function(){return a.Object.getValue(b.data,"languagetag")},property:function(){return a.Object.getValue(b.data,"property")},protocol:function(){return a.Object.getValue(b.data,"protocol")},shortfirstname:function(){return a.Object.getValue(b.data,"shortfirstname")},shortuserid:function(){return a.Object.getValue(b.data,"shortuserid")},status:function(){return a.Object.getValue(b.data,"status")},spaceid:function(){return a.Object.getValue(b.data,"spaceid")},test_id:function(){return a.Object.getValue(b.data,"test_id")},userid:function(){return a.Object.getValue(b.data,"userid")},style:function(){return a.Object.getValue(b.data,"style")},toJSON:function(){return{authState:b.authState(),cobrand:b.cobrand(),crumb:b.crumb(),mccrumb:b.mccrumb(),gta:b.gta(),device:b.device(),experience:b.experience(),firstname:b.firstname(),flight:b.flight(),forcecobrand:b.forcecobrand(),guid:b.guid(),host:b.host(),https:b.https(),languagetag:b.languagetag(),property:b.property(),protocol:b.protocol(),shortfirstname:b.shortfirstname(),shortuserid:b.shortuserid(),status:b.status(),spaceid:b.spaceid(),test_id:b.test_id(),userid:b.userid(),style:b.style()}}}},"0.0.1",{requires:["node"]}),a.YObj.use("ucs-meta",function(b){b.Lang.isObject(a.Meta)&&a.Meta instanceof b.ucs.Meta||(a.Meta=new b.ucs.Meta(b.one("#yucs-meta")))})}(window.ucs);YUI.add("ucs-beacon",function(d){var a=null,c=function(h){var e=null,j={},k="",f="",g=null;e=b();if(e!==null){d.log("emit_beacon: beacon=YMedia.Af.Beacon","debug","Beacon");d.log(h,"debug");switch(h.type){case"info":e.info(h.source,{code:h.code,message:d.JSON.stringify(h)});break;case"error":e.error(h.source,{},{code:h.code,message:d.JSON.stringify(h)});break;}}else{d.log("emit_beacon: beacon=geo.yahoo.com","debug","Beacon");d.log(h,"debug");j.s=1197747123;j.r=encodeURIComponent(location.href);j.t=Math.random();j.dmsgs=encodeURIComponent(d.JSON.stringify(h.dmsgs));j.sec=encodeURIComponent(h.sec);j.slk=encodeURIComponent(h.slk);j.type=h.type;for(g in j){k+=f+g+"="+j[g];f="&";}e=new Image(0,0);e.src="https://geo.yahoo.com/p?"+k;}},b=function(){var e=null;if(typeof YMedia!=="undefined"&&d.Lang.isObject(YMedia)&&d.Lang.isObject(YMedia.Af)&&d.Lang.isObject(YMedia.Af.Beacon)){e=YMedia.Af.Beacon;if(d.Lang.isFunction(e.setSampleSize)){if(window.location.href.match(/debug_beacon=1/)){e.setSampleSize(1);}}else{d.log("get_beacon: setSampleSize method not found!");}}return e;};d.namespace("ucs").Beacon={error:function(e){c(e);},info:function(e){c(e);},perf:function(e){c(e);}};},"1.0",{requires:["json"]});YUI.add("comet",function(a){function b(){b.superclass.constructor.apply(this,arguments)}a.namespace("Comet");var c={},d="comet:ready";a.initComet=function(e,f){var g=e.replace(/https:/,"http:");return"/"===g.substr(-1)&&(g=g.substring(0,g.length-1)),c[g]?a.log("init_comet: instance is already created. url="+g,"debug","Comet"):(a.log("init_comet: create instance. url="+g,"debug","Comet"),a.publish(d),c[g]=new b,c[g].clearListeners()),f&&c[g].addListener("/meta/handshake",f),c[g].initBayeux(e,function(b){b.successful&&a.fire(d,{message:b})}),c[g]},b.NAME="Comet",b.ATTRS={uri:{value:null,setter:function(a){if(null!==a){var b=window.location.protocol;-1!==b.indexOf("https")?a=a.replace(/http:/,"https:"):-1!==b.indexOf("http")&&(a=a.replace(/https:/,"http:"));var c=a.toLowerCase();return-1!==c.indexOf("https://")?this.set("protocol","https://"):-1!==c.indexOf("http://")&&this.set("protocol","http://"),a}}},protocol:{value:"https://"},meta:{value:{handshake:{channel:"/meta/handshake",version:"1.0",supportedConnectionTypes:["long-polling"]},connect:{channel:"/meta/connect",connectionType:"long-polling"},subscribe:{channel:"/meta/subscribe"},unsubscribe:{channel:"/meta/unsubscribe"},publish:{},disconnect:{channel:"/meta/disconnect"}}},ioCfg:{value:{method:"POST",headers:{"Content-Type":"application/json",Accept:"*/*"}}},ext:{value:{all:{},handshake:{},subscribe:{"Comet-api-version":"1.1","Comet-subscriber-auth-info":null},unsubscribe:{"Comet-api-version":"1.1","Comet-subscriber-auth-info":null},connect:{},publish:{"Comet-api-version":"1.1","Comet-registration-id":"make-up","Comet-opaque-id":"markup","Comet-acknowledge-URI":"www.yahoo.com/ack","Comet-acknowledge-type":"All"},disconnect:{}}}},a.extend(b,a.Base,{_clientState:"unconnected",_advice:{},_connected:!1,_config:{backoffIncrement:1e3,maxBackoff:1e4,maxNetworkDelay:3e5,delayedSendMaxCount:10,advice:{timeout:6e4,interval:0,reconnect:"retry"},subscribe:{jsonpTimeout:5e3}},_delayedSendCount:0,_urlOrigin:"",_backoff:0,_isLongpollingConnect:!1,_isSendingQueue:!1,_clientId:null,_token:null,_lastMessageId:0,_outgoing:[],_subscribeChannel:{},_queue:new a.AsyncQueue,_ioQueue_c2s:a.io.queue,_ioQueue_s2c:a.io.queue,_jsonp:null,_listeners:{},initializer:function(){this.setClientState("unconnected"),a.on("beforeunload",a.bind(function(){"unconnected"!==this.getClientState()&&this.disconnect()},this),window)},config:function(b,c){a.Object.setValue(this._config,b,c)},_Queue_send:function(b){var c=this;c._batch(b),c.getClientId()&&(c._isSendingQueue||c._outgoing.length<=0||(a.each(c._outgoing,function(a){a=c._patchMessage(a)}),c._IO_send(!0,c._outgoing),c._outgoing=[]))},_nextQueueSend:function(){this._Queue_send()},_IO_send:function(a,b){var c=this;if(c.get("uri"))if(a){if(c._isSendingQueue||!b)return;c._IO_Queue_Send(b)}else{if(!c.getClientId())return;if(c._isLongpollingConnect||!b)return;c._IO_Longpolling_Send(b)}},_IO_Queue_Send:function(b){a.log("io_queue: ","debug","Comet"),a.log(b,"debug");var c=this;c.setTokenHeader(c._token);var d=a.merge(c.get("ioCfg"),{context:c,timeout:c._config.maxNetworkDelay,data:a.JSON.stringify(b),xdr:{credentials:!0},on:{success:function(d,e){try{a.log("io_queue: e.success","debug","Comet"),a.log(e,"debug");var f=a.JSON.parse(e.responseText);c._handleResponse(f)}catch(g){return a.log("io_queue: e.success.exception","debug","Comet"),a.log(g,"debug"),void c._handleFailure(b,"json parse error")}},failure:function(d,e){a.log("io_queue: e.failure","debug","Comet"),a.log(e,"debug"),c._handleFailure(b,"500::io failed")},start:function(){a.log("io_queue: e.start","debug","Comet"),c._isSendingQueue=!0},complete:function(){a.log("io_queue: e.complete","debug","Comet"),c._isSendingQueue=!1,c._nextQueueSend()}}});c._ioQueue_c2s.stop(),c._ioQueue_c2s(c.get("uri"),d),c._ioQueue_c2s.start()},_IO_Jsonp_Send:function(b){a.log("io_jsonp: ","debug","Comet"),a.log(b,"debug");var c=this;if(c.get("uri")){var d=c.get("uri")+"?callback={callback}",e=encodeURIComponent(a.JSON.stringify(b));d=d+"&data="+e,c._jsonp=new a.JSONPRequest(d,{on:{success:function(b){a.log("io_jsonp: e.success","debug","Comet"),a.log(b,"debug"),c._handleResponse(b)},timeout:function(d){a.log("io_jsonp: e.timeout","debug","Comet"),a.log(d,"debug"),c._handleFailure(b,"408:"+c._config.subscribe.jsonpTimeout+":jsonp timeout")},failure:function(){a.log("io_jsonp: e.failure","debug","Comet"),c._handleFailure(b,"500::jsonp failed")}},timeout:c._config.subscribe.jsonpTimeout}),c._jsonp.send()}},_IO_Longpolling_Send:function(b){a.log("io_longpolling: ","debug","Comet"),a.log(b,"debug");var c=this;c.setTokenHeader(c._token);var d=a.merge(c.get("ioCfg"),{context:c,timeout:c._config.maxNetworkDelay,xdr:{credentials:!0},data:a.JSON.stringify(b),on:{success:function(d,e){try{a.log("io_longpolling: e.success","debug","Comet"),a.log(e,"debug");var f=a.JSON.parse(e.responseText);c._handleResponse(f)}catch(g){return a.log("io_longpolling: e.success.exception","debug","Comet"),a.log(g,"debug"),void c._handleFailure(b,"json parse error")}},failure:function(d,e){a.log("io_longpolling: e.failure","debug","Comet"),a.log(e,"debug"),c._handleFailure(b,"500::io failed")},start:function(){a.log("io_longpolling: e.start","debug","Comet"),c._isLongpollingConnect=!0},complete:function(){a.log("io_longpolling: e.complete","debug","Comet"),c._isLongpollingConnect=!1}}});c._ioQueue_s2c.stop(),c._ioQueue_s2c(c.get("uri"),d),c._ioQueue_s2c.start()},_handleResponse:function(b){if(a.log("handle_response:","debug","Comet"),a.log(b),void 0!==b&&null!==b){var c=this;a.each(b,function(a){c._updateAdvice(a.advice),a.originalURI=c._urlOrigin;var b=a.channel;switch(b){case"/meta/handshake":c._handshakeResponse(a);break;case"/meta/connect":c._connectResponse(a);break;case"/meta/disconnect":c._disconnectResponse(a);break;case"/meta/subscribe":c._subscribeResponse(a);break;case"/meta/unsubscribe":c._unsubscribeResponse(a);break;default:c._messageResponse(a)}})}},_updateAdvice:function(a){this._advice=a?this._mixin(!1,{},this._config.advice,a):this._config.advice},_handshakeResponse:function(b){var c=this;if(b.successful){c.setClientState("connected"),c._clientId=b.clientId,c._advice.VIP&&c.set("uri",c.get("protocol")+c._advice.VIP+"/comet"),c._notifyListeners("/meta/handshake",b),c._Queue_send();var d=c._isDisconnected()?"none":c._advice.reconnect;switch(a.log("handshake_response: action="+d,"debug","Comet"),d){case"retry":c._resetBackoff(),c._delayedConnect();break;case"handshake":c.setClientState("unconnected"),c._resetBackoff(),c._delayedHandshake();break;case"none":c._disconnect(!1)}}else c._failHandshake(b)},_failHandshake:function(a){var b=this;b.setClientState("unconnected"),b._clientId=null,b._notifyListeners("/meta/handshake",a),b._notifyListeners("/meta/unsuccessful",a);var c="none"!==b._advice.reconnect;c?(b._increaseBackoff(),b._delayedHandshake()):b._disconnect(!1)},_delayedHandshake:function(){var a=this;this._delayedSend(function(){a._handshake()})},_subscribeResponse:function(a){a.successful?(this._subscribeChannel[a.subscription]&&this._subscribeChannel[a.subscription]===!0||(this._subscribeChannel[a.subscription]=!0),a.ext["Comet-auth-token"]&&(this._token=a.ext["Comet-auth-token"]),this._notifyListeners("/meta/subscribe",a)):this._failSubscribe(a)},_failSubscribe:function(a){this._notifyListeners("/meta/subscribe",a),this._notifyListeners("/meta/unsuccessful",a)},_connectResponse:function(b){var c=this;if(!c._isDisconnected())if(c._connected=b.successful,c._connected){c.setClientState("connected"),c._notifyListeners("/meta/connect",b);var d=c._isDisconnected()?"none":c._advice.reconnect;switch(a.log("connect_response: action="+d,"debug","Comet"),d){case"retry":c._resetBackoff(),c._delayedConnect();break;case"handshake":c.setClientState("unconnected"),c._resetBackoff(),c._delayedHandshake();break;case"none":c._disconnect(!1)}}else c._failConnect(b)},_failConnect:function(a){var b=this;b._notifyListeners("/meta/connect",a),b._notifyListeners("/meta/unsuccessful",a);var c=b._isDisconnected()?"none":b._advice.reconnect;switch(c){case"retry":b._delayedConnect(),b._increaseBackoff();break;case"subscribe":b._delayedConnect(),b._increaseBackoff();break;case"handshake":b.setClientState("unconnected"),b._resetBackoff(),b._delayedHandshake();break;case"none":b._disconnect(!1)}},_delayedConnect:function(){var a=this;this._delayedSend(function(){a._connect()})},_disconnectResponse:function(a){a.successful?(this._disconnect(!1),this._notifyListeners("/meta/disconnect",a)):this._failDisconnect(a)},_failDisconnect:function(a){this._disconnect(!0),this._notifyListeners("/meta/disconnect",a),this._notifyListeners("/meta/unsuccessful",a)},_unsubscribeResponse:function(a){a.successful?(this._subscribeChannel[a.subscription]&&this._subscribeChannel[a.subscription]===!0&&delete this._subscribeChannel[a.subscription],this._notifyListeners("/meta/unsubscribe",a)):this._failUnsubscribe(a)},_failUnsubscribe:function(a){this._notifyListeners("/meta/unsubscribe",a),this._notifyListeners("/meta/unsuccessful",a)},_messageResponse:function(a){void 0===a.successful?a.data?this._notifyListeners(a.channel,a):this._notifyListeners("/meta/unsuccessful",a):a.successful?this._notifyListeners("/meta/publish",a):this._failMessage(a)},_failMessage:function(a){this._notifyListeners("/meta/publish",a),this._notifyListeners("/meta/unsuccessful",a)},_delayedSend:function(a){var b=this,c=b._advice.interval+b._backoff;if(b._config.maxBackoff<=b._backoff?b._delayedSendCount++:b._delayedSendCount=0,b._delayedSendCount>b._config.delayedSendMaxCount){var d=b.get("uri");if(b.set("uri",b._urlOrigin),d===b.get("uri"))return;b._resetBackoff(),b._delayedSendCount=0}b._queue.add({fn:a,timeout:c}),b._queue.run()},_handshakeFailure:function(a,b){this._failHandshake({successful:!1,failure:!0,channel:"/meta/handshake",request:a,advice:{reconnect:"retry",interval:this._backoff},error:b||"",ext:a.ext||{},id:a.id||""})},_connectFailure:function(a,b){this._connected=!1,this._failConnect({successful:!1,failure:!0,channel:"/meta/connect",request:a,advice:{reconnect:"retry",interval:this._backoff},clientId:a.clientId||"",error:b||"",ext:a.ext||{},id:a.id||""})},_disconnectFailure:function(a,b){this._failDisconnect({successful:!1,failure:!0,channel:"/meta/disconnect",request:a,advice:{reconnect:"none",interval:0},clientId:a.clientId||"",error:b||"",ext:a.ext||{},id:a.id||""})},_subscribeFailure:function(a,b){this._failSubscribe({successful:!1,failure:!0,channel:"/meta/subscribe",request:a,advice:{reconnect:"none",interval:0},clientId:a.clientId||"",subscription:a.subscription||"",error:b||"",ext:a.ext||{},id:a.id||""})},_unsubscribeFailure:function(a,b){this._failUnsubscribe({successful:!1,failure:!0,channel:"/meta/unsubscribe",request:a,advice:{reconnect:"none",interval:0},clientId:a.clientId||"",subscription:a.subscription||"",error:b||"",ext:a.ext||{},id:a.id||""})},_messageFailure:function(a,b){this._failMessage({successful:!1,failure:!0,channel:a.channel,request:a,advice:{reconnect:"none",interval:0},clientId:a.clientId||"",subscription:a.subscription||"",error:b||"",ext:a.ext||{},id:a.id||""})},_handleFailure:function(a,b){var c,d,e;for(e=0;e<a.length;++e)switch(c=a[e],d=c.channel){case"/meta/handshake":this._handshakeFailure(c,b);break;case"/meta/connect":this._connectFailure(c,b);break;case"/meta/disconnect":this._disconnectFailure(c,b);break;case"/meta/subscribe":this._subscribeFailure(c,b);break;case"/meta/unsubscribe":this._unsubscribeFailure(c,b);break;default:this._messageFailure(c,b)}},_notifyListeners:function(a,b){this._notify(a,b),this._notify(a+"/*",b);var c=a.split("/"),d=c.length-1,e=0;for(e=d;e>0;--e){var f=c.slice(0,e).join("/")+"/*";e===d&&this._notify(f,b),this._notify(f,b)}},_notify:function(b,c){var d=this._listeners[b];d&&a.each(d,function(b){a.Lang.isFunction(b.listener)&&b.listener(c)})},_isDisconnected:function(){return"unconnected"===this._clientState},_resetBackoff:function(){this._backoff=0},_nextMessageId:function(){return++this._lastMessageId+""},_increaseBackoff:function(){this._backoff<this._config.maxBackoff&&(this._backoff+=this._config.backoffIncrement)},_createMessage:function(b,c){c=c||{};var d=(new Date).valueOf(),e=window.location.host,f=[],g=a.merge(this.get("ext").all,this.get("ext")[b],c.ext||{},{timestamp:d,host:e||""});switch(b){case"handshake":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b]));break;case"connect":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b],{clientId:this.getClientId()}));break;case"subscribe":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b],{clientId:this.getClientId(),subscription:c.channel}));break;case"unsubscribe":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b],{clientId:this.getClientId(),subscription:c.channel}));break;case"publish":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b],{clientId:this.getClientId(),channel:c.channel,data:c.data}));break;case"disconnect":f.push(a.merge({id:this._nextMessageId(),ext:g},this.get("meta")[b],{clientId:this.getClientId()}))}return f},_handshake:function(a){var b=this;if("unconnected"===b.getClientState()){a&&a.listener&&b._addListener(a,!1),b._clientId=null,b._token=null,b.resetTokenHeader(),b._clearSubscriptions(),b._updateAdvice(b._config.advice);var c=b._createMessage("handshake",a);b._IO_send(!0,c),b.setClientState("connecting")}else if("connected"===b.getClientState()){var d={successful:!0,channel:"/meta/handshake",clientId:b._clientId,originalURI:b._urlOrigin};b._notifyListeners("/meta/handshake",d)}},_connect:function(a){var b=this;if("connected"===b.getClientState()&&!b._isLongpollingConnect){var c=b._createMessage("connect",a);b._IO_send(!1,c)}},_subscribeJSONP:function(a){if(a&&a.channel&&this.getClientId()&&(!this._subscribeChannel[a.channel]||this._subscribeChannel[a.channel]!==!0)){a.listener&&this._addListener(a,!0);var b=this._createMessage("subscribe",a);this._IO_Jsonp_Send(b)}},_unsubscribe:function(a){if(this.getClientId()&&(a&&a.channel&&this.removeListeners(a.channel),a&&a.channel)){var b=this._createMessage("unsubscribe",a);this._Queue_send(b)}},_disconnect:function(a){var b=this;if(a&&(b._ioQueue_c2s.stop(),b._ioQueue_s2c.stop()),b.setClientState("unconnected"),b._clientId=null,b._resetBackoff(),b._queue.stop(),b._outgoing.length>0){var c=b._outgoing;b._outgoing=[],b._handleFailure(c,"500::canceled after disconnect")}b._clearSubscriptions()},_patchMessage:function(a){return a.id||(a.id=this._nextMessageId()),a.clientId=this.getClientId(),"/meta/handshake"===a.channel&&delete a.clientId,a},_batch:function(){a.each(arguments,function(b){if(b&&a.Lang.isArray(b)){var c=0;for(c=0;c<b.length;++c)this._outgoing.push(b[c])}else b&&this._outgoing.push(b)},this)},_clearSubscriptions:function(){a.each(this._listeners,function(b){b&&a.each(b,function(a,b,c){a&&a.isSub&&c.splice(b)})}),this._subscribeChannel={}},_reDoSubscriptions:function(){a.each(this._subscribeChannel,function(a,b){a&&(this._subscribeChannel[b]=!1,this._subscribeJSONP({channel:b}))},this)},isDuplicatedListener:function(a,b){var c=0;for(c=0;c<b.length;++c){var d=b[c];if(d&&d.listener&&d.listener.toString()===a.toString())return!0}return!1},_addListener:function(b,c,d){b&&b.listener&&a.Lang.isFunction(b.listener)&&(this._listeners[b.channel]?(d||!this.isDuplicatedListener(b.listener,this._listeners[b.channel]))&&this._listeners[b.channel].push({listener:b.listener,isSub:c}):this._listeners[b.channel]=[{listener:b.listener,isSub:c}])},_mixin:function(a,b){var c,d,e=b||{};for(c=2;c<arguments.length;++c){var f=arguments[c];if(void 0!==f&&null!==f)for(d in f){var g=f[d],h=e[d];g!==b&&void 0!==g&&(e[d]=a&&"object"==typeof g&&null!==g?g instanceof Array?this._mixin(a,h instanceof Array?h:[],g):this._mixin(a,{},g):g)}}return e},destructor:function(){},getClientState:function(){return this._clientState},setClientState:function(a){this._clientState=a},getClientId:function(){return this._clientId},initBayeux:function(a,b){this._urlOrigin=a,this.set("uri",a),this._handshake({channel:"/meta/handshake",listener:b})},subscribe:function(a,b){this._subscribeJSONP({channel:a,listener:b})},unsubscribe:function(a){this._unsubscribe({channel:a})},disconnect:function(a){var b=this;if(a&&b._addListener({channel:"/meta/disconnect",listener:a},!1),"unconnected"!==b.getClientState()&&b.getClientId()){var c=b._createMessage("disconnect");b._Queue_send(c)}},publishMsg:function(a,b){if(a&&b){var c={channel:a,data:b},d=this._createMessage("publish",c);this._Queue_send(d)}},clearListeners:function(){this._listeners={}},addListener:function(b,c,d){d=d||!1,(c||!a.Lang.isFunction(c))&&this._addListener({channel:b,listener:c},!1,d)},removeListeners:function(a){this._listeners[a]&&delete this._listeners[a]},setUserInfo:function(a,b){if(a&&b){var c=this.get("ext");c.subscribe["Comet-subscriber-auth-info"]={uid:a,user_type:"yahoo",user_cred:b}}},setUserInfoWithCookie:function(a){if(a){var b=this.get("ext");b.subscribe["Comet-subscriber-auth-info"]={uid:a,user_type:"yahoo",user_cred:"Any Value"}}},setTokenHeader:function(a){if(a){var b=this.get("ioCfg");b.headers.Authorization="Basic token="+a}},resetTokenHeader:function(){var a=this.get("ioCfg");a.headers.Authorization="Basic token="},setYcaHeader:function(a,b){if(a){var c=this.get("ioCfg");c.headers["Yahoo-App-Auth"]=a}if(b){var d=this.get("ext");d.publish["Comet-opaque-id"]=b}}}),a.Comet=b},"3.4.1",{requires:["base","io","json","async-queue","cookie","jsonp","jsonp-url"]});YUI.add("ucs-comet-conn",function(a){"use strict";a.namespace("ucs");var b={counts_max:{unsuccessful:{"/meta/handshake":25,"/meta/subscribe":25,"/meta/unsubscribe":25,"/meta/connect":25,"/meta/disconnect":25}},prod:{notifications:{host:"https://pr.comet.yahoo.com/comet"},mail_count:{host:"https://pr.comet.yahoo.com/comet"},system_status:{host:"https://comet.yahoo.com/comet"}},nonprod:{notifications:{host:"http://stage-comet1.onepush.mobile.gq1.yahoo.com/comet"},mail_count:{host:"http://stage-comet1.onepush.mobile.gq1.yahoo.com/comet"},system_status:{host:"http://perf501.snp.mobile.gq1.yahoo.com/comet"}}},c="connect",d="disconnect",e="message",f="error",g={};a.ucs.CometConn=function(a,f){this.app=a,this.env=f,this.comet=null,this.init(b[f][a]),this.publish(c),this.publish(d),this.publish(e)},a.ucs.CometConn.getConn=function(c,d){var e=null;if(a.config.debug=window.location.href.match(/debug_comet-conn=1/),d=d||"prod",window.location.href.match(/env=nonprod/)&&(d="nonprod"),a.log("get_conn: app="+c,"debug","CometConn"),a.Lang.isUndefined(d))throw new Error("getConn(): env is required.");if(a.Lang.isUndefined(c))throw new Error("getConn(): app is required.");if(!a.Object.hasKey(b,d))throw new Error("getConn(): cannot find config for env="+d);if(!a.Object.hasKey(b[d],c))throw new Error("getConn(): cannot find config for app="+c);return e=a.Lang.sub("{app}:{env}",{app:c,env:d}),a.Object.hasKey(g,e)?a.log("get_conn: instance is already created. key="+e,"debug","CometConn"):(a.log("get_conn: create instance. key="+e,"debug","CometConn"),g[e]=new a.ucs.CometConn(c,d)),g[e]},a.ucs.CometConn.prototype={counts:{},init:function(b){var c=this;a.log("init: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug"),c.comet=a.initComet(b.host),c.comet.addListener("/meta/handshake",a.bind(c.cbHandShake,c),!0),c.comet.addListener("/meta/subscribe",a.bind(c.cbSubscribe,c),!0),c.comet.addListener("/meta/unsubscribe",a.bind(c.cbUnsubscribe,c),!0),c.comet.addListener("/meta/connect",a.bind(c.cbConnect,c),!0),c.comet.addListener("/meta/disconnect",a.bind(c.cbDisconnect,c),!0),c.comet.addListener("/meta/unsuccessful",a.bind(c.cbUnsuccessful,c),!0),c.resetCounts()},extractMessage:function(a){return{clientId:a.clientId||"",channel:a.channel||"",timestamp:a.timestamp||"",error:a.error||""}},getComet:function(){return this.comet},getCounts:function(){return this.counts},resetCounts:function(){return this.counts={unsuccessful:{"/meta/handshake":0,"/meta/subscribe":0,"/meta/unsubscribe":0,"/meta/connect":0,"/meta/disconnect":0}},this},isDisconnect:function(c){var d=this,e=!0;return c.successful===!1&&a.Object.hasKey(d.counts.unsuccessful,c.channel)&&(d.counts.unsuccessful[c.channel]++,d.counts.unsuccessful[c.channel]<b.counts_max.unsuccessful[c.channel]&&(e=!1)),e},cbHandShake:function(d){var e=this,g=null;if(a.log("cb_handshake: app="+e.app+", env="+e.env,"debug","CometConn"),a.log(d,"debug"),a.Object.hasKey(d,"originalURI"))g=d.originalURI;else{if(!a.Object.hasKey(d,"uri"))return void this.fire(f,"uri / originalURI is missing in the callback_handshake response.");g=d.uri}a.log("cb_handshake. uri="+g,"debug","CometConn"),g===b[this.env][this.app].host?d.successful?e.fire(c,d):e.fire(f,"cb_handshake. successful=false"):e.fire(f,"cb_handshake.uri is not found in config. uri="+g),d&&d.successful&&e.resetCounts()},cbSubscribe:function(b){var c=this;a.log("cb_subscribe: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug"),b&&b.successful&&c.resetCounts()},cbUnsubscribe:function(b){var c=this;a.log("cb_unsubscribe: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug"),b&&b.successful&&c.resetCounts()},cbConnect:function(b){var c=this;a.log("cb_connect: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug")},cbDisconnect:function(b){var c=this;a.log("cb_disconnect: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug")},cbUnsuccessful:function(b){var c=this;a.log("cb_unsuccessful: app="+c.app+", env="+c.env,"debug","CometConn"),a.log(b,"debug"),c.isDisconnect(b)&&c.getComet().disconnect()},cbSystemStatus:function(b){a.log("cb_system_status","debug","CometConn"),a.log(b,"debug"),b&&this.fire("message",b)},cbNotification:function(b){a.log("cb_notifications","debug","CometConn"),a.log(b,"debug"),b&&this.fire(e,b)},initSystemStatus:function(b){a.log("init_system_status. channel="+b,"debug","CometConn"),this.comet.subscribe(b,a.bind(this.cbSystemStatus,this))},initNotification:function(){a.log("init_notifications","debug","CometConn"),this.comet.subscribe("/UNP/alerts/*",a.bind(this.cbNotification,this))},emitBeacon:function(b){if(a.Lang.isObject(a.ucs)&&a.Lang.isObject(a.ucs.Beacon))switch(b.type){case"info":a.ucs.Beacon.info(b);break;case"error":a.ucs.Beacon.error(b)}}},a.augment(a.ucs.CometConn,a.EventTarget,!0,null,{emitFacade:!0,broadcast:2})},"1.0",{requires:["event","event-custom","comet","ucs-beacon"]});window.ucs&&window.ucs.YObj&&window.ucs.YObj.use("node","ucs-comet-conn",function(a){var b=null,c=null,d=null,e={};b=a.one("#yucs-meta").getAttribute("data-authstate"),c=a.one("#yucs-meta").getAttribute("data-property"),d=a.one("#yucs-notifications"),a.Lang.isObject(d)||("signedin"===b||"mail"===c)&&a.Lang.isFunction(a.ucs.CometConn)&&(e.notifications=a.ucs.CometConn.getConn("notifications"),e.notifications.on("connect",function(){e.notifications.initNotification()}))});YUI.add("ucs-disclaimer-seed",function(a){a.namespace("ucs"),a.ucs.DisclaimerSeed={init:function(){var b,c=!1,d=a.one("#yucs-disclaimer")?a.one("#yucs-disclaimer"):a.one("#yucs-disclaimer-md"),e=d.getAttribute("data-property"),f=(d.getAttribute("data-lang"),d.getAttribute("data-dss")),g=(d.getAttribute("data-cu"),d.getAttribute("data-cobrand"),!1),h=!1,i=(a.Cookie.get("DSS"),parseInt((new Date).getTime()/1e3),a.Cookie.getSub("ucs","disclaimer",Number),"desktop"),j="false",k=navigator.userAgent.toLowerCase(),l=a.Cookie.getSub("AO","o")?a.Cookie.getSub("AO","o"):a.Cookie.getSub("AO",'"o'),m=a.Cookie.getSub("AO","u")?a.Cookie.getSub("AO","u"):a.Cookie.getSub("AO",'"u'),n=(a.Cookie.getSub("AO","t")?a.Cookie.getSub("AO","t"):a.Cookie.getSub("AO",'"t'),a.Cookie.getSub("AO","dnt")?a.Cookie.getSub("AO","dnt"):a.Cookie.getSub("AO",'"dnt'));this.jsPath="https://s.yimg.com/zz/combo?kx/yucs/uh3/disclaimer/388/js/disclaimer-min.js",this.cssPath="https://s.yimg.com/zz/combo?kx/yucs/uh3/disclaimer/388/css/disclaimer-min.css",a.one("#yucs-disclaimer")?i=a.one("#yucs-disclaimer").getAttribute("data-device"):a.one("#yucs-disclaimer-md")&&(i=a.one("#yucs-disclaimer-md").getAttribute("data-device")),j=i&&(i.match(/smartphone/gi)||i.match(/tablet/gi)),"frontpage"===e&&(i.match(/smartphone/gi)||i.match(/tablet/gi))&&(a.one("#OpenMenuBtn")&&a.one("#OpenMenuBtn").on("touchstart",this.setKillswitch,this),a.one("#OpenWidgetsBtn")&&a.one("#OpenWidgetsBtn").on("touchstart",this.setKillswitch,this)),f&&"0"===f&&k.indexOf("version")>=0&&k.indexOf("crios")<0&&(b=k.match(/version\/(\d+)/),i.match(/desktop/gi)&&b&&b[1]&&parseInt(b[1])<8?this.loadCSS(this.cssPath,this.jsPath):j&&a.UA.ios&&a.UA.ios<8&&this.loadCSS(this.cssPath,this.jsPath)),n&&(n=n.replace('"',""),n=n.replace("'",""),n=parseInt(n)),m&&(m=m.replace('"',""),m=m.replace("'",""),m=parseInt(m)),l?(l=l.replace('"',""),l=l.replace("'",""),l=parseInt(l)):c=!0,c=!0,g=!0,n&&1===n&&g===!0&&h===!1&&(n=a.Cookie.get("AO",{raw:!0}),n=n.replace("o=1","o=0"),a.Cookie.set("AO",n,{expires:new Date("January 12, 2025"),path:"/",domain:"yahoo.com",raw:!0}))},setKillswitch:function(){a.one("#yucs-disclaimer").setAttribute("data-killswitch","1")},loadCSS:function(b,c){var d={onSuccess:function(){this.loadJS(c)},onFailure:function(){this.loadCSS(b)},context:this};a.Get.css(b,d)},checkTimer:function(){var b=a.Cookie.getSub("ucs","disclaimerts",Number),c=(new Date).getTime();return c>=b||null===b?!0:!1},loadJS:function(b){var c={onFailure:function(){this.loadJS(b)},context:this};a.Get.script(b,c)}}},"1.0",{requires:["node","cookie"]}),function(){if("undefined"!=typeof ucs&&ucs.YObj)ucs.YObj.use("ucs-disclaimer-seed",function(a){a.ucs.DisclaimerSeed.init()});else{var a=document.getElementById("yUnivHead"),b=a&&"srp"===a.getAttribute("data-property")?Y:YUI();b.use("ucs-disclaimer-seed",function(a){a.ucs.DisclaimerSeed.init()})}}();YUI.add("ucs-dss-cookie-cleanup",function(a){a.namespace("ucs"),a.ucs.DssCookieCleanup={init:function(){var b=a.one("#yucs-disclaimer")?a.one("#yucs-disclaimer"):a.one("#yucs-disclaimer-md"),c=(b.getAttribute("data-cobrand"),b.getAttribute("data-dss-cookie-cleanup")),d=b.getAttribute("data-ylt-dssCookieCleanedSuccess"),e=b.getAttribute("data-ylt-dssCookieCleanedFailed"),f=a.Cookie.get("DSS"),g=parseInt((new Date).getTime()/1e3),h=a.Cookie.getSub("ucs","sfc",Number),i=a.Cookie.getSub("ucs","sfcTs",Number),j=function(b,c,d){if(b){var e=new Image,f="&";c&&(a.Cookie.setSub("ucs","sfc",1,{expires:new Date("January 12, 2017"),path:"/",domain:"yahoo.com"}),e.onload=c),d&&(e.onerror=d),e.src=b+f+(new Date).getTime()}};f||i&&h&&(1===h||86400>g-i)||(a.Cookie.setSub("ucs","sfcTs",parseInt((new Date).getTime()/1e3),{expires:new Date("January 12, 2017"),path:"/",domain:"yahoo.com"}),j("https://search.yahoo.com/yhs/beacon/yhs_mdset?action=refresh&.crumb="+c,function(){j(d)},function(){j(e)}))}}},"1.0",{requires:["node","cookie"]}),function(){if("undefined"!=typeof ucs&&ucs.YObj)ucs.YObj.use("ucs-dss-cookie-cleanup",function(a){a.ucs.DssCookieCleanup.init()});else{var a=document.getElementById("yUnivHead"),b=a&&"srp"===a.getAttribute("data-property")?Y:YUI();b.use("ucs-dss-cookie-cleanup",function(a){a.ucs.DssCookieCleanup.init()})}}();YUI.add("ucs-more-menu",function(a){a.namespace("ucs.MoreMenu");var b=(ucs.HIDDEN_CLS,"MoreDropDown-Box"),c="Eyebrow";a.ucs.MoreMenu=function(d){d.removeClass("yucs-more-activate"),this.topBar=a.one("#"+c),a.ucs.MoreMenu.superclass.constructor.call(this,d,{panel:"."+b,event:"click",ylt:d.getAttribute("data-ylt"),align:"left"}),this._init()},a.extend(a.ucs.MoreMenu,a.ucs.MenuUtils,{_init:function(){this.menu.on("ucs:show",this._handleShowMenu,this),this.menu.on("ucs:hide",this._handleHideMenu,this)},_handleShowMenu:function(){this.menu.addClass("MoreDropDown-on")},_handleHideMenu:function(){this.menu.removeClass("MoreDropDown-on")},_handleKeyup:function(a){27===a.keyCode||9===a.keyCode?this._hideMenu():40!==a.keyCode||this.keyedup||(this.panel.one("a"),this.keyedup=!0)}})},"1.0",{requires:["node","event","event-resize","event-hover","node-focusmanager","event-mouseenter","event-delegate","ucs-menu-utils"]}),function(){document.getElementById("yucs");window.ucs&&window.ucs.YObj&&ucs.YObj.use("node","ucs-more-menu",function(a){var b=a.one("#yucs-more.yucs-more-activate");b&&(window.ucs.moreMenu=new a.ucs.MoreMenu(b))})}();YUI.add("ucs-home-menu",function(a){a.namespace("ucs.HomeMenu");var b=(window.ucs.HIDDEN_CLS,"HomeDropDown-Box"),c="Eyebrow";a.ucs.HomeMenu=function(d){d.removeClass("yucs-home-activate"),this.topBar=a.one("#"+c),a.ucs.HomeMenu.superclass.constructor.call(this,d,{panel:"."+b,event:"click",ylt:d.getAttribute("data-ylt"),align:"left"}),this._init()},a.extend(a.ucs.HomeMenu,a.ucs.MenuUtils,{_init:function(){this.menu.on("ucs:show",this._handleShowMenu,this),this.menu.on("ucs:hide",this._handleHideMenu,this)},_handleShowMenu:function(){this.menu.addClass("HomeDropDown-on")},_handleHideMenu:function(){this.menu.removeClass("HomeDropDown-on")},_handleKeyup:function(a){27===a.keyCode||9===a.keyCode?(this.menu.one("a").focus(),this._hideMenu()):40!==a.keyCode||this.keyedup||(this.keyedup=!0)}})},"1.0",{requires:["node","event","event-resize","event-hover","node-focusmanager","event-mouseenter","event-delegate","ucs-menu-utils"]}),function(){document.getElementById("yucs");window.ucs&&window.ucs.YObj&&ucs.YObj.use("node","ucs-home-menu",function(a){var b=a.one("#yucs-home.yucs-home-activate");b&&(window.ucs.HomeMenu=new a.ucs.HomeMenu(b))})}();YUI.add("ucs-search",function(a){a.namespace("ucs");var b={"&":" ","<":" ",">":" ",'"':" ","'":" ","/":" ","`":" "},c="value",d="click",e="suggest",f="touchstart",g="submit",h="tabindex",i="target",j="UHSearch-Init",k="yucs-content-qry",l="#yucs-satray",m=a.one("#yucs-meta").getAttribute("data-property"),n=a.one("#yucs-meta").getAttribute("data-forcecobrand"),o=a.one("#yucs-meta").getAttribute("data-languagetag").toLowerCase(),p="379",q=("https"===window.ucs.protocol?"https://s":"http://l")+".yimg.com/",r="https://s.yimg.com/pv/search-assist/sa-min@0.0.0-65.css",s="https://s.yimg.com/kx/yucs/uh3s/search/css/78/fpassist.css",t="search-assist-form-submit",u="#hpsetLightboxContainer.Modal-on",v=q+"kx/yucs/uh3s/search/"+p+"/js/search_filter_v2-min.js",w=window.ucs.escapeRegex,x="V(h)",y=w(x);a.ucs.Search=function(a){this.form=a,this.buttons=this.form.all(".uhBtn"),this.form.set("onsubmit",null),this.loadedAssist=!1,this.keyPressEnter=!1,this.keyInputProcessing=!1,this.counter=1,this.init()},a.ucs.Search.prototype={isWebSearch:!1,init:function(){var b=ucs.components.search;this.form.removeClass(j),this._setTabIndex(),this.is2Button=2===this.buttons.size(),this.input=this.form.one(b.input_selector),this.vertSearchBtn=this.form.one(b.prop_btn_selector),this.webSearchBtn=this.form.one(b.web_btn_selector),this.input_data=this.input.getData(),this._initClearBtn(),this.searchHint=this.input_data.sh||"",this.yltvsearch=this.input_data.yltvsearch,this.yltvsearchsugg=this.input_data.yltvsearchsugg;var d=this.form.getData("webaction");if(d){var e=this.input.getAttribute("name");a.Array.indexOf(["q"],e)<0&&this.input.setAttribute("name","p"),this.form.setAttribute("action",d),this.vertSearchBtn&&this.vertSearchBtn.setAttribute("data-vsearch",this.yltvsearch)}this._hasPlaceholderSupport()&&!a.UA.ie&&this.input.removeAttribute("data-sh");var f=a.one(ucs.UH_MAIN_ID);"en-us"===o&&f&&"finance"===m&&!this.is2Button&&this.input.setAttribute("name","s"),(this._inputIsEmpty()||this._inputIsDefaultTerm()||this.loadedAssist)&&"zh-hant-tw"!==o&&"zh-hant-hk"!==o||(this.loadedAssist=!0,this._initAssist()),f&&f.getAttribute("data-linktarget")?this.linkTarget=f.getAttribute("data-linktarget"):this.linkTarget=this.form.getAttribute("target")||"_top",this._setFormTarget(),this._initEventListeners();var g=document.URL,h=/[?&]p=([^&]+)/i,i=h.exec(g);null==i&&"help"===m&&(h=/[?&]question_box=([^&]+)/i,i=h.exec(g)),null==i||"answers"!==m&&"help"!==m&&"shopping"!==m||this.input.setAttribute("value",decodeURIComponent(i[1].replace(/\+/g," "))),"shopping"===m&&this._loadSearchFilter(),document.activeElement!==this.input._node&&""===this.input.get(c)&&this._resetSearchInput(),this._autoFocus()},initInterface:function(){var a=this,b=ucs.UhSearchInterface={};b.getInput=function(){return a._getSearchInput()},b.setInput=function(b){a._setSearchInput(b)},b.resetInput=function(){a._resetSearchInput()},b.getVertSearchBtnText=function(){return a._getVertSearchBtnContent()},b.setVertSearchBtnText=function(b){a._setVertSearchBtnContent(b)},this._fireInterfaceReady()},_loadSearchFilter:function(){var b={onSuccess:a.bind(function(){var a=this;ucs.YObj.use("ucs-search-filter",function(b){new b.ucs.SearchFilter({data:{input:a.input,vertSearchBtn:a.vertSearchBtn}})})},this)};a.Get.script(v,b)},html:function(a){return(a+"").replace(/[&<>"'\/`]/g,this._htmlReplacer)},_htmlReplacer:function(a){return b[a]},_langCamelCase:function(a){var b=a.split("-");switch(b.length){case 2:return b[0].toLowerCase()+"-"+b[1].toUpperCase();case 3:return b[0].toLowerCase()+"-"+b[1].charAt(0).toUpperCase()+b[1].substr(1).toLowerCase()+"-"+b[2].toUpperCase();default:return a}},_autoFocus:function(){var b=(/[?&]tab=chrome($|&)/g.test(a.config.win.location.href)===!1,a.one(u));if(!a.UA||!a.UA.ios&&!a.UA.android){var c=a.one("#yucs-meta");if("sports"!==m||!c||"fantasy"!==c.getAttribute("data-style")){var d=this.input&&this.input.get("region")||null,e=a.one(window).get("scrollY");d&&e&&d.bottom<e||"mail"!==m&&null===b&&this.input.focus()}}},_hasPlaceholderSupport:function(){var a=document.createElement("input");return"placeholder"in a},_initClearBtn:function(){var b=a.one("#yucs-search-clear");b&&(this.searchClearBtn=b,0===a.UA.ie&&this.form.addClass("yucs-clear-padding"),this.input.on("keyup",this._clearBtnState,this),this.searchClearBtn.on("click",this._handleFormReset,this))},_clearBtnState:function(){var a=this.searchClearBtn.hasClass(y),b=this._inputIsEmpty()||this._inputIsDefaultTerm();!b&&a?this.searchClearBtn.removeClass(y):b&&!a&&this.searchClearBtn.addClass(x)},_handleFormReset:function(b){b.preventDefault(),this._setInputBlank(),a.Global.fire("ucs-rapid:click",{sec:"uh-d",slk:"srchclr",_pValue:"0",keys:{rspns:"nav",t1:"a1",t2:"uh-d",t3:"srch",t5:"srchclr",elm:"btn",elmt:"srch",itc:"0"}}),a.later(10,this,function(){this._clearBtnState(),this.sa&&this.sa.gossip&&this.sa.gossip.hide&&this.sa.gossip.hide(),this._autoFocus()})},_initEventListeners:function(){var b=this.form.on(g,this._handleSubmit,this),c="fpassist"===this.input_data.satype?"li":"a";this.input.on("keydown",this._handleInputKeypress,this),this.input.on("blur",this._handleInputBlur,this),this.input.on("keyup",this._handleInputKeyup,this),this.input.on(d,this._handleInputClick,this),this.webSearchBtn.on(d,this._handleWebSearchEvent,this),("mail"===m||this.is2Button)&&(this.vertSearchBtn&&this.vertSearchBtn.on(d,this._handleVertSearch,this),a.UA.ie&&(b.detach(),this.webSearchBtn.on(d,this._handleWebSearchClick,this),this.form.on(g,this._handleVertSearch,this)),this.publish("ucs:webSearch",{broadcast:2,emitFacade:!0}),a.Global.on("ucs:webSearch",this._handleWebSearchEvent,this),a.Global.on("ucs:mailSearch",this._trackMailSearch,this),a.Global.on("ucs:mailSearchSugg",this._trackMailSearchSugg,this)),a.one(l).delegate(d,this._handleRapidBeacon,c)},_getInputValTrimmed:function(){var b=this.input.get(c);return b=a.Lang.trim(b)},_inputIsEmpty:function(){return""===this._getInputValTrimmed()},_inputIsDefaultTerm:function(){return this._getInputValTrimmed()===this.searchHint},_handleInputKeyup:function(a){13===a.keyCode;var b=this._inputIsEmpty();!this.keyInputProcessing&&b&&(this._resetSearchInput(),this._setCaretStart()),b||this._inputIsDefaultTerm()||this._setTabIndex(),this.loadedAssist||(this.loadedAssist=!0,this._initAssist())},_handleInputClick:function(){this._inputIsDefaultTerm()&&(this._resetSearchInput(),this._setCaretStart())},_setCaretStart:function(){var a,b,c=window.document.selection;c&&"Control"!==c.type&&(a=this.input.get("value").length,b=c.createRange(),b.move("character",-a),b.select())},_setTabIndex:function(){var b=a.UA.ie>0&&a.UA.ie<=7;this.buttons.each(function(a){var c=a.getAttribute(h);b&&0===c||b&&65535===c||c&&(!b||32768!==c)?a.setAttribute(h,0):a.setAttribute(h,-1)})},_setFormTarget:function(){"_blank"===this.linkTarget||this.form.hasClass("yucs-search-fh")?this.form.setAttribute(i,"searchWin"):this.form.setAttribute(i,this.linkTarget)},_initAssist:function(){var a=this.input_data.satype;switch(a){case"fpassist":this._initFPAssist(this.input._node);break;case"mini":this._initMiniAssist(this.input._node);break;case"rich":this._initRichAssist(this.input._node)}},_buildAssistConfig:function(a){var b={searchbox:a,clid:"uh-yui3",shim:1,align:!0,gossip:{styleList:[{selector:"a",classes:m.match(/frontpage/gi)?"Fz(18px) Fw(b) D(b) Mx(8px) C(#000.8)! Td(n) Td(n)!:h":"Fw(b) D(b) Mx(6px) C(#000.8) Td(n) Td(n)!:h"},{selector:"this",classes:"Hover P(0) M(0)"}]},nresults:a.getAttribute("data-maxresults")||5};return b.node=l,a.getAttribute("data-pubid")&&(b.pubid=a.getAttribute("data-pubid")),a.getAttribute("data-gosurl")&&(b.url=a.getAttribute("data-gosurl")),b},_initFPAssist:function(b){var c={fpassist:{fullpath:"https://s.yimg.com/pv/search-assist/sa-min@0.0.0-65.js",requires:["base"]},"fpassist-skin":{fullpath:r,type:"css"},"fpassist-skin-overide":{fullpath:s,type:"css"}},d=this._langCamelCase(o);a.one("#yucs-satray").removeClass("D\\(n\\)");var e=window.ucs.escapeRegex("uhFancyBox Bg(#fff) Bd(ttbd) Bxsh(ttsh) Bdrs(3px)");a.one("#yucs-satray").removeClass(e),ucs.YObj.applyConfig({modules:c});var f=this;ucs.YObj.use("fpassist","fpassist-skin-overide","fpassist-skin",function(a){ucs.YObj.config.fetchCSS===!1&&(a.Get.css(r),a.Get.css(s)),YUI().use("search-assist-client","search-assist-advanced-suggestions-plugin",function(a){var c,e=new a.Node(b),g={lang:d,searchBox:"#UHSearchBox",anyKeySearch:!0,enableTrending:!1,maxSuggests:10,noSpaceOnFocus:!0,https:!0,autoAlign:!1,hostNodeToAttach:"#yucs-satray",quietMode:!1,stream:!1,reverseHighlight:!0,allowCache:!0,ariaPlug:!0};e.getAttribute("data-pubid")&&(g.pubid=e.getAttribute("data-pubid")),e.getAttribute("data-appid")&&(g.appId=e.getAttribute("data-appid")),f.vertSearchBtn&&(g.preventFormSubmit=!0),c=new a.SEARCHASSIST.CLIENT(g),f.vertSearchBtn&&c.on(t,function(b){b.target=a.one(l),f._handleVertSearch(b)}),"att"!==n&&f.input.select(),f._autoFocus()})})},_initMiniAssist:function(a){var b=this,c=q,d=p;ucs.YObj.applyConfig({groups:{miniassist:{combine:!0,base:c,comboBase:c+"zz/combo?",root:"kx/yucs/uh3s/search/"+d+"/js/",maxURLLength:2e3,modules:{miniassist:{path:"mini-assist-min.js",requires:["base","get","node","event-focus","plugin","array-extras","tray-align-plugin","tray-shim-plugin","event-move"]},"tray-align-plugin":{path:"tray-align-plugin-min.js"},"tray-shim-plugin":{path:"tray-shim-plugin-min.js"}}}}}),ucs.YObj.use("miniassist","escape",function(c){var d,f,g,h=new c.Node(a),i=b._buildAssistConfig(h);if(b.sa=new c.Search.MiniAssist(i),"finance"===m&&b.sa.assist.set("minLength",1),"zh-hant-tw"!==o&&"zh-hant-hk"!==o||b.sa.assist.set("minLength",1),"att"===n&&"en-us"===o&&b.sa.assist.set("minLength",1),d=b.sa.tray.get("node"),f=b.is2Button&&d.getAttribute("data-vsearch")||"",g=d.getAttribute("data-vfr"),b.sa.assist._checkValue(),b.sa.gossip.set("scrollSize",13),b.sa.gossip.set("linkStem",f),b.sa.gossip.set("linkParams",{fr:g}),b.sa.gossip.set("uhbParams",{uhb:g}),b.is2Button||(b.sa.gossip.set("hideEmptyTray",!1),b.sa.gossip.set("linkParams",{})),"finance"===m){var j=d.getAttribute("data-vstext"),l=d.getAttribute("data-vert_fin_search"),p=d.getAttribute("data-searchNews");b.sa.assist.on(e,function(a){if(a.query){var d=c.one("#"+k),e=b.sa.buildSearchUrl(h,a.query,l,{fr:p});"finance"===m&&(e=e.replace("?s=","?p=")),d?d.one("li").setContent("<a id='searchVertical' href='"+e+"' text='"+c.Escape.html(a.query)+"'>"+j+" <q>"+c.Escape.html(a.query)+"</q></a>"):(document.getElementById("hspart")&&(e+="&hspart="+document.getElementById("hspart").value),document.getElementById("hsimp")&&(e+="&hsimp="+document.getElementById("hsimp").value),document.getElementById("yucs-hstype")&&(e+="&type="+document.getElementById("yucs-hstype").value),d=c.Node.create("<ul id='"+k+"'><li><a id='searchVertical' href='"+e+"'>"+j+"<q>"+c.Escape.html(a.query)+"</q></a></li></ul>"),c.one(".sa-panel").append(d)),d.one("a").addClass("Mx(6px) My(0) C(#000)! Td(n) Td(n):h D(b)"),d.setAttribute("style","border-top: 1px solid #e2e2e6;border-radius: 0 0 3px 3px;"),d.addClass("Bgc(#f5f5f5) My(0) Lh(2)")}})}b.form.on("submit",function(a){var c=b._getActiveAssistItem();if(c){var d=c.getAttribute("href");a.preventDefault(),"_blank"===b.linkTarget||b.form.hasClass("yucs-search-fh")?window.open(d,"searchWin"):window.location.href=d}})})},_getUHB:function(){var b=a.one("#uhb");return b&&b.get("value")||"uhb2"},_initRichAssist:function(a){var b=this,c={richassist:{fullpath:"http://a.l.yimg.com/a/lib/s7/richassist-yui3-201009101433.js",requires:["base","get","node","event-focus","plugin"]},"tray-align-plugin":{fullpath:"http://a.l.yimg.com/a/lib/s7/tray-align-plugin-201009101433.js",requires:["richassist"]},"tray-shim-plugin":{fullpath:"http://l.yimg.com/a/lib/s7/tray-shim-plugin-201009101433.js",requires:["richassist"]}};ucs.YObj.applyConfig({modules:c}),ucs.YObj.use("richassist","tray-align-plugin","tray-shim-plugin",function(c){var d=new c.Node(a),e=b._buildAssistConfig(d);b.sa=new c.Search.RichAssist(e)})},_setInputBlank:function(){this.input.set(c,"")},_handleSearchToggle:function(a){a.preventDefault(),this._toggleSearch()},_getActiveAssistItem:function(){return a.one(l+" a.sa-active")},_toggleSearch:function(){var b=this,c=function(a){b._handleBodyClick(a)};a.one(ucs.UH_MAIN_ID).toggleClass("yucs-show_search"),this.bodyClick?(this.bodyClick.detach(),this.bodyScroll.detach(),this.bodyClick=this.bodyScroll=null):(a.UA.mobile&&"createTouch"in document&&"addEventListener"in document.body?(a.log("using touchstart in mobile browser","info","search"),document.body.addEventListener(f,c,!1),this.bodyClick={detach:function(){"removeEventListener"in document.body&&document.body.removeEventListener(f,c,!1)}}):this.bodyClick=a.one("body").on(d,this._handleBodyClick,this),this.bodyScroll=a.on("scroll",function(a){this._toggleSearch()},this))},_handleBodyClick:function(b){var c,d=b&&b.target||null;d&&(c="function"==typeof d.ancestor?d:a.one(d),c&&!c.ancestor(ucs.UH_MAIN_ID)&&this._toggleSearch())},_handleWebSearchClick:function(a){this.isWebSearch=!0,this.form.one("#yucs-sky-term")&&this.form.one("#yucs-sky-term").set(c,this._getInputValTrimmed()),this.sa&&this.is2Button&&this.sa.set("iswebsearch",!0)},_handleSubmit:function(b){if(this.form.one("#yucs-sky-term")&&this.form.one("#yucs-sky-term").set(c,this._getInputValTrimmed()),this._inputIsDefaultTerm()&&this._setInputBlank(),b&&b.target&&(this.isWebSearch=a.one(b.target).hasClass("yucs-wsearch-button")),this.vertSearchBtn&&!this.isWebSearch&&this._handleVertSearch(b),document.getElementById("yuhead-att-cat")){"searchWin"!==this.form.getAttribute(i)&&b.preventDefault();var d=a.Node.create("<img />");d.once("load",this._handleImageLoad,this),d.once("error",this._handleImageLoad,this),this._timer=window.setTimeout(a.bind(this._handleImageLoad,this),2e3),d.set("src","http://attadworks.turn.com/r/dd/id/L21rdC8xMDAvY2lkLzE1OTE3NzExL3QvMg/qry/"+encodeURIComponent(this._getInputValTrimmed()))}},_handleImageLoad:function(a){null!==this._timer&&(clearTimeout(this._timer),this._timer=null),"searchWin"!==this.form.getAttribute(i)&&this.form.submit()},_handleInputKeypress:function(b){var c,d,e=this.form.getAttribute("data-webaction-tar")||"search.yahoo.com",f=this.form.getAttribute("data-verticalaction-tar"),g=f?f:e;return this.keyInputProcessing=229===b.keyCode,46!==b.keyCode&&8!==b.keyCode||!this._inputIsDefaultTerm()?void(this._inputIsEmpty()&&b.keyCode>=32&&b.keyCode<=40?this.input.blur():9!==b.keyCode&&13!==b.keyCode?(!this.keyInputProcessing&&this._inputIsDefaultTerm()&&(this._setInputBlank(),this.input.removeClass("yucs-search-hint-color")),this.loadedAssist||(this.loadedAssist=!0,this._initAssist()),d={eventName:"type",keys:{sec:"uh-d",slk:"srchtype",_p:"0",rspns:"nav",t1:"a1",t2:"uh-d",t3:"srch",t5:"srchtype",elmt:"srch",itc:"1"}},1===this.counter&&a.Global.fire("ucs-rapid:event",d),this.counter=this.counter+1):13!==b.keyCode||this._inputIsEmpty()||(this.keyPressEnter=!0,c={sec:"uh-d",slk:"srchwebent",_pValue:"0",keys:{rspns:"nav",t1:"a1",t2:"uh-d",t3:"srch",t5:"srchwebent",elm:"kb-ent",elmt:"srch",itc:"0",tar:g}},a.Global.fire("ucs-rapid:click",c))):void b.preventDefault()},_handleRapidBeacon:function(b){var d,e,f=b.currentTarget,g=a.one("#UHSearchBox"),h=g.getAttribute("data-satype"),i="fpassist"===h?f.getAttribute("pos"):f.get("parentNode").getAttribute("pos"),j=a.one("#UHSearch"),k=j.getAttribute("data-webaction-tar")||"search.yahoo.com",l=j.getAttribute("data-verticalaction-tar"),m=l?l:k,n=f.getAttribute("href"),o=j.one("#yucs-fr2"),p={sec:"uh-d",slk:"srchast",_pValue:i,keys:{rspns:"nav",t1:"a1",t2:"uh-d",t3:"srch",t4:"tray",t5:"srchast",cpos:i,elm:"itm",elmt:"srchast",itc:0,tar:m}};"fpassist"===h&&(j.one(ucs.components.search.prop_btn_selector)?(d=g.getAttribute("data-yltvsearch"),e=j.getAttribute("data-vfr")):(d=j.getAttribute("data-webaction"),e=j.one("#fr").get(c)),n=d+"?"+g.getAttribute("name")+"="+f.getAttribute("data")+"&fr="+e),o&&(n=n.replace("%2Cm%3Asb","%2Cm%3Asa")),b.preventDefault(),a.Global.fire("ucs-rapid:click",p),window.setTimeout(function(){window.location=n},500)},_handleInputBlur:function(a){this._inputIsEmpty()&&this._resetSearchInput()},_handleVertSearch:function(b){if(a.log("handleVertSearch"),this.is2Button===!1)return void(this.isWebSearch=!1);if(b.preventDefault(),!this._inputIsEmpty()){var d,e=b.target.getAttribute("data-vsearch"),f="1button";if(this.is2Button&&(f="2button"),e||(e=this.vertSearchBtn.getAttribute("data-vsearch")),e&&"mail"!==m){if(d=e.split("?"),1===d.length?d="":(e=d[0],d=d[1]),"finance"===m)e+="?uhb="+b.target.getAttribute("data-vfr")+"&fr="+a.one(l).getAttribute("data-searchNews")+"&type="+f+"&s="+encodeURIComponent(this.input.get(c));else if("groups"===m)e+="?query="+encodeURIComponent(this.input.get(c));else if("help"===m){this.helpForm=a.one("#landingSearch"),this.helpForm||(this.helpForm=a.one("#question_form"));var g=this;if(this.helpForm){this.vsu="";var h=this.helpForm.one('input[type="text"]').getAttribute("name");this.helpForm.all('input[type="hidden"]').each(function(a){g.vsu+=a.getAttribute("name")+"="+a.getAttribute("value")+"&"},g),e=this.helpForm.getAttribute("action"),e+="?"+this.vsu+h+"="+encodeURIComponent(this.input.get(c)),"question_box"!==h&&(e+="&p="+encodeURIComponent(this.input.get(c)))}else e+="?fr="+b.target.getAttribute("data-vfr")+"&type="+f+"&query="+encodeURIComponent(this.input.get(c))}else e+=b.target.getAttribute("data-vfr")?"?fr="+b.target.getAttribute("data-vfr")+"&type="+f+"&p="+encodeURIComponent(this.input.get(c)):"?type="+f+"&p="+encodeURIComponent(this.input.get(c));d&&(e+="&"+d),"_blank"===this.linkTarget||this.form.hasClass("yucs-search-fh")?window.open(e,"searchWin"):window!==window.top?window.top.location.href=e:window.location.href=e}else this._fireVertSearchEvent(b)}},_fireVertSearchEvent:function(a){var b=this.input.get(c);this.publish("ucs:verticalSearchAction",{broadcast:2,emitFacade:!0}),this.fire("ucs:verticalSearchAction",{query:b})},_handleWebSearchEvent:function(b){var d,e=this,f=this.form.getAttribute("data-webaction-tar")||"search.yahoo.com",g=this.form.getAttribute("data-verticalaction-tar"),h=g?g:f,i=0,j=this.form.one("#fr");if(b.query&&this.input.set("value",b.query),b.preventDefault(),this.form.one("#yucs-sky-term")&&this.form.one("#yucs-sky-term").set(c,this._getInputValTrimmed()),j&&"mail_bucket_02"===j.get(c)&&j.set(c,"mail_bucket_01"),j&&"mail_bucket_01"===j.get(c)&&(i=j.getAttribute("data-sa"),"1"===i&&(j.set(c,"mail_bucket_02"),j.setAttribute("data-sa","0"))),!this._inputIsEmpty()||this.is2Button||"zh-hant-tw"===o||"zh-hant-hk"===o){var k,l=this._getActiveAssistItem();l&&"frontpage"===m&&(k=this.form.one("input#fr"),k.set("value",k.get("value")+"-s")),"_top"!==this.linkTarget?this.form.submit():(d={sec:"uh-d",slk:"srchweb",_pValue:"0",keys:{rspns:"nav",t1:"a1",t2:"uh-d",t3:"srch",t5:"srchweb",elm:"btn",elmt:"srch",itc:"0",tar:h}},this.keyPressEnter||a.Global.fire("ucs-rapid:click",d),window.setTimeout(function(){e.form.submit()},500))}},_fireInterfaceReady:function(){this.publish("ucs:uhSearchInterfaceReady",{broadcast:2,emitFacade:!0}),this.fire("ucs:uhSearchInterfaceReady")},_getSearchInput:function(){return this.input},_resetSearchInput:function(){this.searchHint&&this.input.addClass("yucs-search-hint-color"),this.input.set(c,this.searchHint)},_setSearchInput:function(a){this.input.set(c,a)},_getVertSearchBtnContent:function(){return this.vertSearchBtn.get(c)},_setVertSearchBtnContent:function(a){this.vertSearchBtn.set(c,a.text?a.text:a)},_trackMailSearch:function(){a.log("Mail search"),this._sendBeacon(this.yltvsearch)},_trackMailSearchSugg:function(){a.log("Mail search sugg"),this._sendBeacon(this.yltvsearchsugg)},_trackPropSearch:function(){a.log("Prop Search"),this._sendBeacon(this.yltvsearch)},_sendBeacon:window.ucs._sendBeacon},a.augment(a.ucs.Search,a.EventTarget)},"1.0",{requires:["node","event","event-custom","event-resize","dom-screen"]}),window.ucs&&window.ucs.YObj&&ucs.YObj.use("node","ucs-search",function(a){var b=ucs.components.search,c=a.all(b.selector+"."+b.init_cls);c.each(function(b,c,d){if(b.ancestor(ucs.UH_MAIN_ID)){a.log("instantiating uh search component");var e=new a.ucs.Search(b);e.initInterface()}else{a.log("instantiating search components");new a.ucs.Search(b)}})});ucs.YObj.use("ucs-search",function(a){var b,c,d,e=window,f=document,g=a.one(".yucs-search-input")&&a.one(".yucs-search-input")._node||a.one("#UHSearchBox")&&a.one("#UHSearchBox")._node,h=function(a){try{if(c=parseInt(a.keyCode),d=a.target?a.target:a.srcElement,b=g.value.length,d===g&&0===b&&c>=32&&40>=c)g.blur();else if("EMBED"!==d.tagName&&"OBJECT"!==d.tagName&&"INPUT"!==d.tagName&&"TEXTAREA"!==d.tagName&&!a.altKey&&!a.metaKey&&!a.ctrlKey&&(32>c||c>40)&&9!==c&&13!==c&&16!==c){if(b)if(g.setSelectionRange)g.setSelectionRange(b,b);else if(g.createTextRange){var e=g.createTextRange();e.moveStart("character",b),e.select()}g.focus()}}catch(a){}};g&&(e.addEventListener?(e.addEventListener("keydown",h,!1),g.addEventListener("keydown",h,!1)):e.attachEvent&&(f.attachEvent("onkeydown",h),g.attachEvent("onkeydown",h)))});YUI.add("ucs-avatar",function(a){var b={size:"32x32",style:{width:32,height:32},loadOnResponse:!0,bucket:null},c=a.one("#yucs-meta"),d=window.ucs.escapeRegex,e=window.ucs.DN_CLS,f=function(b,c,d,e){var f=null,g=function(b){return function(e){var f=a.Object.getValue(e,c),g=null;return f&&b(f)&&(g="value"===d?f:e),g}};if(e="function"==typeof e?e:function(){return!0},g=g(e),!a.Lang.isArray(b))return g(b);for(var h=0,i=b.length;i>h&&!(f=g(b[h]));h++);return f},g=function(b){var c=[];return a.Array.each(b,function(a){c.push('"'+a.size+'"')}),a.Array.dedupe(c)},h=function(b){var c=a.Node.create("<img>");return c.setAttribute("alt",b.alt),c.addClass(e),c.setStyles(b.style),c.on("load",function(){var a=b.target;a.setContent(this),j(a),this.removeClass(d(e))}),c},i=function(a){a.avatarMarkup.setAttribute("src",a.imgUrl)},j=function(a){a.removeClass(d("V(h)"))},k=function(a){var b=f(a,["byImageUrl"],"item");return b&&(b.imageUrl=b.byImageUrl),b},l=function(b){var c,d,e=(new Date).getTime();return d=a.Cookie.getSub("ucs","tr",Number),(null===d||e>=d)&&(c=new Image,c.src=b,a.Cookie.setSub("ucs","tr",e+864e5,{expires:new Date((new Date).setYear((new Date).getFullYear()+1)),path:"/",domain:"yahoo.com"})),null};a.namespace("ucs"),a.ucs.Avatar=function(){var b=a.all(ucs.UH_MAIN_ID+" i[data-avatar]");b.size()&&(this.initEvents(),this.init(b))},a.ucs.Avatar.prototype={initEvents:function(){a.Global.on("ucs:loadAvatar",function(a,b){var c,d=this.avatarOptions,e=!1;if(b="function"==typeof b&&b||function(){},d&&!this.isDefaultProfileImage&&a)for(var f=0,g=d.length;g>f;f++)if(c=d[f],c.target.generateID()===a.generateID()){i(c),e=!0;break}return b(e)},this),a.publish("ucs:avatarReady",{fireOnce:!0,async:!0,broadcast:2})},init:function(c){this.avatarOptions=[],c.each(function(c){var d=c.getAttribute("data-avatar");d=d?a.JSON.parse(d):null,d&&(d=a.mix(d,b),c.generateID(),d.target=c,this.avatarOptions.push(d))},this),this._fetchData()},_fetchData:function(){var b=c.getAttribute("data-guid"),d=c.getAttribute("data-crumb"),e=g(this.avatarOptions).join(","),f='select * from social.profile.image where guid = "'+b+'" and size in ('+e+") and imgssl=1",h={q:f,format:"json",crumb:d,_maxage:900},i="https://ucs.query.yahoo.com/v1/console/yql?"+a.QueryString.stringify(h);a.jsonpsupercached.getData({url:i,serviceName:"avatar",onSuccess:a.bind(this._fetchSuccess,this)})},_fetchSuccess:function(b){this.initImageList(b);var c=this.imgList&&!!this.imgList[0].imageUrl.match(/profile_/);this.isDefaultProfileImage=!this.imgList||c,this.isDefaultProfileImage?a.Array.each(this.avatarOptions,function(a){j(a.target)}):(this.injectMarkup(),a.fire("ucs:avatarReady")),this.checkBeacon()},initImageList:function(b){var c,d=a.Object.getValue(b,["query","results","image"]);d&&(c=k(d),c?this.imgList=[c]:a.Lang.isArray(d)?this.imgList=d:this.imgList=[d])},injectMarkup:function(){a.Array.each(this.avatarOptions,function(a){var b=this._getAvatarUrl(a.size);a.avatarMarkup=h(a),a.imgUrl=b,a.loadOnResponse&&i(a)},this)},_getAvatarUrl:function(a){var b,c=this.imgList,d=function(){return function(b){return b===a}}();return c&&(b=c.length>1&&f(c,["size"],"item",d)||c[0],b=b.imageUrl.replace(/^http:\/\/l\.yimg/,"https://s.yimg").replace(/^http:\/\/socialprofiles\.zenfs/,"https://socialprofiles.zenfs")),b},checkBeacon:function(){var b=f(this.avatarOptions,["bucket"],"value"),d=f(this.avatarOptions,["beaconUrl"],"value");d&&("mail"===c.getAttribute("data-property")||a.Array.indexOf(["1","3"],b)>=0?("3"===b&&(d=d.replace("https://login.yahoo.com/config/login?noPrompt=1&.done=",""),d=decodeURIComponent(d)),l(d)):a.on("unload",function(){return function(){l(d)}}()))}}},"1.0",{requires:["node","cookie","event","jsonp-super-cached","querystring-stringify","json"]}),function(){window.ucs&&window.ucs.YObj&&ucs.YObj.use("node","ucs-avatar",function(a){window.ucs.Avatar=new a.ucs.Avatar})}();YUI.add("ucs-fast-switch",function(a){function b(){var b={eventName:"secvw",keys:{t1:"a1",t2:"uh-d",t4:"usr-mu"}},c=window.ucs.rapid?!0:!1,d={},e=function(){d.fetch=(new Date).getTime(),a.Global.on("ucs-rapid:ready",function(a){l()})},f=function(e,f){if(!d[e]){d[e]=(new Date).getTime();var g=a.clone(b,!0),h=f(d);g.keys=a.mix(g.keys,h),c?a.Global.fire("ucs-rapid:event",g):a.Global.once("ucs-rapid:ready",function(b,c){a.Global.fire("ucs-rapid:event",c)},this,g)}},g=function(){f("response",function(a){return{t3:"response",slk:""+(a.response-a.fetch)}})},h=function(a){f("hover",function(b){return{t3:"hover",t6:a?"render":"not-render",slk:""+(b.hover-b.fetch)}})},i=function(){d.response&&f("render",function(a){return{t3:"render",t5:""+(a.render-a.response),slk:""+(a.render-a.fetch)}})},j=function(a){f("account",function(){return{t3:"tl-lst",t5:"acct-num-"+a,slk:"acct-ct"}})},k=function(a,b){f("init",function(){return{t3:"init",t5:a,slk:b}})},l=function(){c=!0};return{sendResponse:g,sendAccount:j,sendRender:i,sendHover:h,sendInit:k,rapidReady:l,init:e}}a.namespace("ucs");var c=window,d="login",e="done",f="jsonp",g="acctList",h="manage",i="switchAcct",j="add-mng-txt",k="data-",l="D(n)",m="#yucs-profile-panel",n="#yucs-fs-msg",o=500,p="welcomeTimeout",q={},r=window.ucs.escapeRegex,s="https://",t="<% var max = data.max, mng = data."+h+'%><ul class="Pos(r) Mx(-10px)! My(0)! P(0)! Bgc(#f7f8ff) C(#000) Themable" id="yucs-acct-list"><% Y.Array.each(data.userList, function (user, index) { if(index > max-1){return;} var switchUrl = data.'+i+' + user.alias + "&.done=" + data.'+e+';%><li class="Bdw(0) Bdtw(1px) Bds(s) Bdc(#fff) Bgc(#f2f4fe):h"><a class="Td(n) Td(n):h Py(8px) D(b) Cf C(#000)" data-ylk="t3:tl-lst;t4:usr-mu;t5:<%== index+1 %>;slk:acctswitch;elm:btn;elmt:usr;" href="<%== switchUrl %>"><div class="D(ib) Zoom Va(t)"><i class="Va(m) W(a) Ycon YconProfile Lh(1) D(b) Mx(10px) C(#8d919d)" >&#x1f464;</i></div><div class="W(2/3) D(ib) Zoom Lts(n) Tren(a) Va(t) Pt(6px)"><div class="Fw(b) Fz(15px) Ell C(#000)"><%= user.fn %> <%= user.ln %></div><div class="Ell C(#000) Fz(13px)"><%= user.em || user.alias %></div></div></a></li><% }); %></ul>';"undefined"==typeof c.processDeviceUsers&&(c.processDeviceUsers=function(b){a.Global.fire("ucs:fsDataReady",b)});var u=function(b){var c=a.Template.Micro.compile(t),d=a.mix({max:2,userList:b.users},q);return c(d)},v=function(b,c){var d=new a.Anim({node:b,from:{opacity:1},to:{opacity:0},duration:.2});d.on("end",function(){c(),d.set("reverse",!0),d.detach("end"),d.run()}),d.run()},w=function(){return a.Cookie.getSub("Y","l")},x=function(){return a.Cookie.getSub("ucs","fs")},y=function(b){a.Cookie.setSub("ucs","fs",b,{expires:new Date((new Date).setYear((new Date).getFullYear()+1)),domain:"yahoo.com",path:"/"})},z=function(b){a.one("#yucs-fs-name").setContent(b.fn+"&nbsp"+b.ln),a.one("#yucs-fs-email").setContent(b.em||b.alias)},A=function(b){a.one("#yucs-fs-acct-wrap").setContent(b)};a.ucs.FastSwitch=function(c){var j=this.fsNode=c,l=j.getAttribute(k+d),n=j.getAttribute(k+f),r=j.getAttribute(k+e),t=j.getAttribute(k+p),u=".crumb="+j.getAttribute(k+"crumb");if(o=t?parseInt(t,10):o,this.rendered=!1,this.firstLoad=!0,this.ycookie=w(),this.panel=a.one(m),this.mainDisplayItems=this.panel.all(".yucs-fs-m"),n=s+(n||l),l=s+l,r=r.split("?"),r=r[0]+(r.length>1?encodeURIComponent("?"+r[1]):""),q[d]=l,q[f]=n,q[e]=r,q[g]=n+"/w/device_users?"+u,q[h]=l+"/manage_account?.done="+r+"&"+u,q[i]=l+"/d?"+["as=1",u,"login="].join("&"),this.rapidHandler=new b,this.init(),window.performance){var v=""+((new Date).getTime()-window.performance.timing.navigationStart),x=j.getAttribute(k+"grp");x&&this.rapidHandler.sendInit(x,v)}},a.ucs.FastSwitch.prototype={init:function(){a.on("ucs:avatarReady",function(){a.one("#UH").once("mousemove",function(b){var c=a.one("#yucs-fs-acct .Ycon");a.Global.fire("ucs:loadAvatar",c,function(a){a&&c.one("img")&&c.removeClass("YconProfile")})},this)}),a.Global.on("ucs:fsDataReady",this.fsDataReady,this),a.one(window).on("blur",this.handleWindowBlur,this),a.one(window).on("focus",this.handleWindowFocus,this),this.addRequestHandlers()},fsDataReady:function(b){this.jsonpRequestPending=!1,this.rapidHandler.sendResponse(),"string"==typeof b&&(b=a.JSON.parse(b));var c=b&&b.result&&parseInt(b.result,10)||0;!b||c>0?(this.rapidHandler.sendAccount("err"),this.handleError()):(b.users&&this.rapidHandler.sendAccount(b.users.length),this.initWelcomeEvent(),this.setContent(b))},handleError:function(){var b=w(),c=document.createElement("p");c.className="Ta(c) Mx(-10px) My(0) P(16px) Bgc(#fcf8e3) Whs(n)",this.cookieError=!0,b&&this.ycookie===b?(c.className+=" Bdw(0) Bdtw(1px) Bds(s) Bdc(#e2e2e6)",c.innerHTML="Your account data may be out of sync.<br>Refresh the page to see your accounts."):(c.innerHTML="It looks like you switched accounts. Refresh the browser to view your personalized page!",a.all(["#yucs-fs-acct","#yucs-fs-footer","#yucs-notifications","#yucs-profile-panel .yucs-spacing","#yucs-fs-add-acct"].join(",")).remove()),A(c)},sendJsonpRequest:function(){this.removeRequestHandlers(),this.jsonpRequestPending||this.cookieError||(this.jsonpRequestPending=!0,this.rapidHandler.init(),a.Get.js(q[g]),this.initTimeoutError())},initTimeoutError:function(){var b=this.fsNode.getAttribute("data-errTimeout")||1e4;this.clearTimeoutError(),this.errTimeout=a.later(b,this,this.handleTimeoutError)},clearTimeoutError:function(){this.errTimeout&&this.errTimeout.cancel()},handleTimeoutError:function(){this.jsonpTimedout||(this.jsonpTimedout=!0,this.rapidHandler.sendAccount("timeout")),this.setContent({}),this.addRequestHandlers()},addRequestHandlers:function(){this.mouseMoveRequest=a.one("#UH").once("mousemove",this.sendJsonpRequest,this),this.clickSendRequest=a.one("#yucs-profile .yucs-trigger").once("click",this.sendJsonpRequest,this)},removeRequestHandlers:function(){this.mouseMoveRequest&&this.mouseMoveRequest.detach(),this.clickSendRequest&&this.clickSendRequest.detach()},handleWindowBlur:function(){this.clearTimeoutError(),a.one("#yucs-profile").once("mousemove",this.handleWindowFocus,this)},handleWindowFocus:function(){var a=w();a&&this.ycookie===a||this.handleError()},initWelcomeEvent:function(){var b=["mousemove","mouseenter","click"];this.welcomeTriggerEvt=a.one("#yucs-profile .yucs-trigger").once(b,this.handleTriggerMove,this)},handleTriggerMove:function(b){this.welcomeTimeout&&this.welcomeTimeout.cancel(),this.rapidHandler.sendHover(this.rendered),this.welcomeTimeout=a.later(o,this,this.handleWelcomeTimeout)},handleWelcomeTimeout:function(){if(this.panel.hasClass(r(l)))return void this.initWelcomeEvent();var a=x();if(!a){var b=this.fsNode.getAttribute(k+"welcome");y(1),this.showMessage(b)}this.welcomeTriggerEvt.detach()},setContent:function(b){var c,d,e;if(this.clearTimeoutError(),b.users){for(var f=0,g=b.users.length;g>f;f++)if(e=parseInt(b.users[f].state,10),a.Array.indexOf([0,3],e)>=0){d=b.users.splice(f,1)[0];break}d&&v(this.fsNode,function(){return function(){z(d)}}()),b.users.length&&(this.setMultipleUserText(),c=a.Node.create(u(b)),A(c))}this.rendered=!0,a.Global.fire("ucs-rapid:refreshmodules","uhWrapper","0"),a.one("#yucs-fs-loading").addClass(l),this.rapidHandler.sendRender()},setMultipleUserText:function(){var b=this.fsNode.getAttribute("data-signout");b&&a.one("#yucs-signout").set("text",b);var c=this.fsNode.getAttribute(k+j);c&&a.one("#yucs-fs-add-acct span").set("text",c)},showMessage:function(b){var c,d,e=a.one(n),f=e.all("div");b&&f&&f.size()>0&&f.item(0).set("innerHTML",b),d=function(a){var b,c=a.get("className"),d=a.getStyle("top");return a.setStyle("top",-300),a.replaceClass(r(l),"Pos(a)"),b=a.get("offsetHeight"),a.set("className",c),a.setStyle("top",d),b}(e),c=this.anim=new a.Anim({node:e,from:{height:0},to:{height:d},duration:.4}),c.on("start",function(){var a=r(l);e.hasClass(a)&&(e.setStyle("height",0),e.removeClass(a))},this),c.run()},hideMessage:function(){this.anim.set("reverse",!0),this.anim.run()}}},"0.0.2",{requires:["node","cookie","event-custom","event-move","event-mouseenter","template-micro","get","anim","jsonp-super-cached","querystring-stringify","json-parse"]}),window.ucs&&window.ucs.YObj&&ucs.YObj.use("node","ucs-fast-switch",function(a){var b=a.one("#yucs-fs-acct");b&&(window.ucs.fastSwitch=new a.ucs.FastSwitch(b))});"undefined"==typeof window.ucs&&(window.ucs={}),window.ucs.ULT||(window.ucs.ULT={}),window.ucs.ULT.BEACON||(window.ucs.ULT.BEACON="https://geo.yahoo.com/t"),window.ucs.ULT.IMG||(window.ucs.ULT.IMG=new Image),window.ucs.ULT.SRC_SPACEID_KEY="_S",window.ucs.ULT.DEST_SPACEID_KEY="_s",window.ucs.ULT.YLC_LIBSRC=2,window.ucs.ULT.CTRL_C="",window.ucs.ULT.CTRL_D="",window.ucs.ULT.BASE64_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789._-",function(){window.ucs.ULT.track_click=function(a,b,c){return a&&b?(a=window.ucs.ULT.y64_token("ylc",a,b),c&&(a=window.ucs.ULT.y64_token("ylg",a,c)),a):a},window.ucs.ULT.beacon_click=function(a,b,c){if(c||(c=window.ucs.ULT.IMG),a){var d=window.ucs.ULT.track_click(window.ucs.ULT.BEACON,a,b);d+="?t="+Math.random(),c.src=d}return!0},window.ucs.ULT.click_beacon=function(a,b,c){var d=a.target||a.srcElement,e=d.getAttribute("href",2),f="",g=window.ucs.ULT.IMG;b&&(f=window.ucs.ULT.track_click(window.ucs.ULT.BEACON,b,c),f+="?t="+Math.random(),g.onerror=g.onload=function(){location=e},a.preventDefault?a.preventDefault():a.returnValue=!1,g.src=f)},window.ucs.ULT.y64_token=function(a,b,c){if(!a||!b||!c)return b;c._r=window.ucs.ULT.YLC_LIBSRC;var d,e=[],f=0;for(d in c){var g=c[d];if("string"!=typeof g&&(g=String(g),c[d]=g),d.length<1)return b;if(d.length>8)return b;if(-1!==d.indexOf(" "))return b;if(window.ucs.ULT.has_ctrl_char(d)||window.ucs.ULT.has_ctrl_char(g))return b;e[f++]=d}e=e.sort();var h=[];for(f=0;f<e.length;f++)h[f]=e[f]+window.ucs.ULT.CTRL_C+c[e[f]];return h=h.join(window.ucs.ULT.CTRL_D),h.length<1||h.length>1024?b:(h=";_"+a+"="+window.ucs.ULT.encode64(h),f=b.indexOf("/*"),-1===f&&(f=b.indexOf("/?")),-1===f&&(f=b.indexOf("?")),-1===f?b+h:b.substr(0,f)+h+b.substr(f))},window.ucs.ULT.has_ctrl_char=function(a){for(var b=0;b<a.length;b++)if(a.charCodeAt(b)<32)return!0;return!1},window.ucs.ULT.encode64=function(a){var b,c,d,e,f,g="",h="",i="",j=0;do b=a.charCodeAt(j++),c=a.charCodeAt(j++),h=a.charCodeAt(j++),d=b>>2,e=(3&b)<<4|c>>4,f=(15&c)<<2|h>>6,i=63&h,isNaN(c)?f=i=64:isNaN(h)&&(i=64),g=g+window.ucs.ULT.BASE64_STR.charAt(d)+window.ucs.ULT.BASE64_STR.charAt(e)+window.ucs.ULT.BASE64_STR.charAt(f)+window.ucs.ULT.BASE64_STR.charAt(i),b=c=h="",d=e=f=i="";while(j<a.length);return g}}();YUI.add("ucs-notifications-store",function(a){a.namespace("ucs.Notifications");var b={};a.ucs.Notifications.Notification=function(a){this.config={descriptionMaxChars:70,defaultImage:"https://s.yimg.com/rz/uh/icons/ycon_20140228.png"},this.id=a.id,this.msgID=a.msgID,this.position=a.position,this.state=a.state,this.icon=a.icon,this.thumbnail=a.thumbnail,this.favicon=a.favicon,this.title=a.title,this.text=a.text,this.timestamp=a.timestamp,this.link=a.link},a.ucs.Notifications.Store={instance:null,getInstance:function(){return this.instance||(this.instance=new a.ucs.Notifications.StoreObject),this.instance}},a.ucs.Notifications.StoreObject=function(){this.mode="default",this.notifications=[],this.cometCount=0,this.isCacheStale=!0,this.init()},a.ucs.Notifications.StoreObject.prototype={init:function(){this.setConfig(),a.Lang.isFunction(a.ucs.CometConn)&&(this.comet=new a.ucs.CometConn.getConn("notifications")),this.addEventListeners()},setConfig:function(){var c=a.ucs.Notifications.config;b.environment=c.environment,b.crumb=c.crumb,b.guid=c.guid},addEventListeners:function(){a.publish("ucs-notifications:setMode",{broadcast:2}),a.publish("ucs-notifications:getNotifications",{broadcast:2}),a.publish("ucs-notifications:setNotificationState",{broadcast:2}),a.publish("ucs-notifications:NewNotifications",{broadcast:2}),a.publish("ucs-notifications:countChange",{broadcast:2}),a.Global.on("ucs-notifications:getNotifications",a.bind(this.getNotifications,this)),a.Global.on("ucs-notifications:setMode",a.bind(this.setMode,this)),a.Global.on("ucs-notifications:setNotificationState",a.bind(this.setNotificationState,this)),a.Global.on("ucs-notifications:mockCommetMessage",a.bind(this.handleCometEvent,this)),this.comet&&(this.comet.on("connect",a.bind(function(){this.comet.initNotification()},this)),this.comet.on("message",a.bind(this.handleCometEvent,this)))},setMode:function(a){var b=a.mode;("default"===b||"broadcast"===b||"polling"===b)&&(this.mode=b)},handleCometEvent:function(b){var c=b.data.count;this.cometCount=c,a.Global.fire("ucs-notifications:countChange",{count:c}),c>0&&(this.isCacheStale=!0,"broadcast"===this.mode&&this.getNotifications({count:c,callback:a.bind(this.broadcastNotifications,this)}))},broadcastNotifications:function(b){b.error||a.Global.fire("ucs-notifications:NewNotifications",b)},getNotifications:function(b){var c=b.start||0,d=b.count,e=b.callback;d&&e&&(this.isCacheStale||"polling"===this.mode?this.fetchNotifications(c,d,a.bind(function(a){a.error?e(a):(this.setCache(a.notifications),e({notifications:this.notifications.slice(c,d)}))},this)):e({notifications:this.notifications.slice(c,d)}))},setCache:function(a){for(var b=0;b<a.length;b++)this.findNotification(a[b].id)||this.notifications.push(a[b]);this.notifications.sort(this.compareTimestamp)},compareTimestamp:function(a,b){return Number(a.timestamp)<Number(b.timestamp)?1:Number(a.timestamp)>Number(b.timestamp)?-1:0},emptyCache:function(){this.isCacheStale=!0,this.notifications=[]},buildQueryUrl:function(c){var d,e={fetch:"select * from social.uhnotifications ("+c.start+","+c.count+') where date = "epoch" and guid = "'+b.guid+'"  and state="seen|notseen"',clearCount:'select * from ucs.user_notif_status where guid = "'+b.guid+'" and clear="true";',setState:'update social.uhnotifications set state= "'+c.state+'" where id = "'+c.notificationId+'";'},f=b.environment,g="";for(var h in f)"query"===h&&(g+="?"),g+=f[h];return d=a.QueryString.stringify({q:e[c.query],format:"json",crumb:b.crumb,t:(new Date).getTime()})+"&callback={callback}",g+"?"+d},executeJSONP:function(b,c,d,e){a.jsonp(b,{on:{success:c,timeout:d,failure:e},timeout:6e3})},clearCount:function(){var b=this,c=this.buildQueryUrl({query:"clearCount"}),d=function(c){b.count=0,a.Global.fire("ucs-notifications:countChange",{count:0})},e=function(a){},f=function(a){};this.executeJSONP(c,d,e,f)},fetchNotifications:function(a,b,c){var d=this,e=this.buildQueryUrl({query:"fetch",start:a,count:b}),f=function(a){d.processFetchResponse(a,c)},g=function(a){d.handleFetchError("timeout",c)},h=function(a){d.handleFetchError("timeout",c)};this.executeJSONP(e,f,g,h,c)},handleFetchError:function(a,b){var c;c=a&&a.query&&a.query.results&&a.query.results.result?"<status>error: 401</status>"===a.query.results.result?401:a.query.results.result:a&&a.error&&a.error.status?a.error.status:a,b({error:c})},processFetchResponse:function(b,c){var d=[],e=[];b&&b.query&&b.query.results&&b.query.results.notifications?(this.clearCount(),this.isCacheStale=!1,d=d.concat(b.query.results.notifications.notification),a.each(d,function(a,b){var c=this.parseRawNotification(a,b)||[];e=e.concat(c)},this),c({notifications:e})):this.handleFetchError(b,c)},parseRawNotification:function(b,c){var d;try{return"string"==typeof b.meta.actionData&&(b.meta.actionData=a.JSON.parse(b.meta.actionData)),d=new a.ucs.Notifications.Notification({id:b.id,msgID:b.meta.actionData.msgID||null,position:c+1,state:b.state,icon:b.meta.actionData.icon||null,thumbnail:b.meta.actionData.thumbnail||null,favicon:b.favicon||null,title:b.meta.pageTitle||null,text:b.meta.actionData.text||null,timestamp:b.created,link:b.meta.pageUrl||null}),"notseen"===d.state&&c<this.cometCount&&(d.state="new"),d}catch(e){return void a.log("Invalid JSON string in meta.actionData "+b)}},setNotificationState:function(a){var b=this.findNotification(a.notificationId),c=a.state,d=a.callback||function(){},e=function(a){b.state=c,d(a)},f=function(a){d(a)},g=function(a){d(a)},h=this.buildQueryUrl({query:"setState",state:a.state,notificationId:a.notificationId});b&&c&&this.executeJSONP(h,e,f,g,d)},findNotification:function(b){return a.Array.find(this.notifications,function(a){return a.id===b})}}},"1.0",{requires:["event","cookie","json","jsonp","querystring","ucs-timestamp-library","ucs-comet-conn"]});YUI.add("ucs-notifications-tracker",function(a){var b,c,d={},e={};a.namespace("ucs.Notifications"),a.ucs.Notifications.Tracker=function(a){this.panel=a,this.init()},a.ucs.Notifications.Tracker.prototype={init:function(){e=a.ucs.Notifications.helpers||{},b=a.ucs.Notifications.config.device||"desktop",this._loadConfig(),this._addListeners(),c=d.rapid.slk},_addListeners:function(){a.on({trackPanel:a.bind(this.trackPanel,this),trackBadge:a.bind(this.trackBadge,this),trackHeaderCTA:a.bind(this.trackHeaderClick,this),trackNotificationCTA:a.bind(this.trackNotificationClick,this),trackFooterCTA:a.bind(this.trackFooterClick,this)})},_getInstrumentation:function(){return"rapid"},_loadConfig:function(){var c=a.one(this.panel.container);d=a.ucs.Notifications.config,d.instrumentation=this._getInstrumentation(),"desktop"===b&&(d.ult={ylt:{badge:c.getAttribute("data-ylt-ntf-badge")||"",panel_hidden:c.getAttribute("data-ylt-ntf-panl-hid")||"",panel_new:c.getAttribute("data-ylt-ntf-panl-new")||"",panel_old:c.getAttribute("data-ylt-ntf-panl-old")||"",panel_empty:c.getAttribute("data-ylt-ntf-panl-emp")||"",panel_mid_new:c.getAttribute("data-ylt-ntf-panl-mid-n")||"",panel_mid:c.getAttribute("data-ylt-ntf-panl-mid-nn")||"",timeout:c.getAttribute("data-ylt-ntf-timeout")||"",error:c.getAttribute("data-ylt-ntf-error")||"",error_401_out:c.getAttribute("data-ylt-ntf-401-out")||"",error_401_mid:c.getAttribute("data-ylt-ntf-401-mid")||"",notification_cta:c.getAttribute("data-ylt-ntf-cta")||"",manage_cta:c.getAttribute("data-ylt-ntf-manage")||"",view_all_cta:c.getAttribute("data-ylt-ntf-vwall-in")||"",error_401_out_cta:c.getAttribute("data-ylt-ntf-vwall-out")||"",learn_more_cta:c.getAttribute("data-ylt-ntf-learn")||"",sign_in_cta:c.getAttribute("data-ylt-ntf-signin-nn")||"",sign_in_new_cta:c.getAttribute("data-ylt-ntf-signin-new")||""}}),d.rapid={slk:{badge:"UH 3 Notification Badge Display",panel_hidden:"UH 3 Notification Panel Hide",panel_new:"UH 3 Notification Panel Display New",panel_old:"UH 3 Notification Panel Display Old",panel_empty:"UH 3 Notification Panel Display Empty",panel_mid_new:"UH 3 Notification Panel Display New MidAuth",panel_mid:"UH 3 Notification Panel Display NoNew MidAuth",timeout:"UH 3 Notification Timeout",error:"UH 3 Notification Error",error_401_out:"UH 3 Notification 401 SignedOut",error_401_mid:"UH 3 Notification 401 MidAuth",notification_cta:"UH 3 Notification CTA",manage_cta:"UH 3 Notification Manage CTA",view_all_cta:"UH 3 Notification ViewAll SignedIn CTA",error_401_out_cta:"UH 3 Notification ViewAll SignedOut CTA",learn_more_cta:"UH 3 Notification Learn More CTA",sign_in_cta:"UH 3 Notification SignIn NoNew MidAuth CTA",sign_in_new_cta:"UH 3 Notification SignIn New MidAuth CTA"}}},_getPanelState:function(){var a=d.authState,b=this.panel.badge.count<1,c=this.panel.notifications.length<1;return e.isNTSubCookieSet()?this.panel.fetchError?401===this.panel.fetchError?"middleauth"===a?"error_401_mid":"error_401_out":"timeout"===this.panel.fetchError?"timeout":"error":"middleauth"===a?b?"panel_mid":"panel_mid_new":b?c?"panel_empty":"panel_old":"panel_new":"panel_hidden"},_getFooterAction:function(a){return a+"_cta"},_getSec:function(){var a={desktop:"d",smpartphone:"m",tablet:"t"};return"uh-"+a[b]},_fireRapidBeacon:function(c,d){var e;d.act=c,d.mid="desktop"===b?"yucs-profile-panel":"yucs-sidebar",d.t1=d.t1||"a1",d.t2=d.t2||"hd",d.t3=d.t3||"Notifications","click"===c?e={sec:this._getSec(),slk:d.slk,_pValue:d.cpos,keys:d,outcome:d.outcome}:"event"===c&&(e={eventName:"secvw",keys:d,outcome:d.outcome}),a.Global.fire("ucs-rapid:"+c,e)},_fireUltBeacon:function(a,b,c){var d=new Image,e="https://geo.yahoo.com/"+a+b,f=!1;c&&window.ucs&&window.ucs.ULT&&window.ucs.ULT.track_click&&(c._S||(ucs.Meta&&(f=ucs.Meta.spaceid()),"undefined"!=typeof YAHOO&&"undefined"!=typeof YAHOO.i13n&&"undefined"!=typeof YAHOO.i13n.SPACEID&&(f=YAHOO.i13n.SPACEID),f||(f="1197757397")),e=window.ucs.ULT.track_click(e,c)),d.height=0,d.width=0,d.src=e},trackPanel:function(a){var e,f=this._getPanelState();e={slk:c[f],elmt:c[f],itc:"1"},this._fireRapidBeacon("event",e,a),"desktop"===b&&this._fireUltBeacon("t",d.ult.ylt[f]),this.panel.notifications.length&&this.trackMsgIDs(a)},trackBadge:function(a){var e;e={slk:c.badge,elmt:c.badge,itc:"1"},this._fireRapidBeacon("event",e,a),"desktop"===b&&this._fireUltBeacon("t",d.ult.ylt.badge)},trackHeaderClick:function(a){var c,e,f;e=d.rapid.slk.manage_cta,c={rspns:"nav",slk:e,elmt:e,elm:"btn",itc:"0"},this._fireRapidBeacon("click",c,a),"desktop"===b&&(f=d.ult.ylt.manage_cta,this._fireUltBeacon("t",f))},trackNotificationClick:function(a){var c,e=a.notification;c={slk:d.rapid.slk.notification_cta,elmt:d.rapid.slk.notification_cta,elm:"itm",itc:"0",g:e.id,cpos:e.position},this._fireRapidBeacon("click",c,a),"desktop"===b&&this._fireUltBeacon("t",d.ult.ylt.notification_cta)},trackFooterClick:function(a){var c,e,f,g=this.panel.footer.message;e=d.rapid.slk[this._getFooterAction(g)],c={rspns:"nav",slk:e,elmt:e,elm:"btn",itc:"0"},this._fireRapidBeacon("click",c,a),"desktop"===b&&(f=d.ult.ylt[this._getFooterAction(g)],this._fireUltBeacon("t",f))},trackMsgIDs:function(){var c,e,f,g=d.languagetag,h=d.property,i=[];c=b.replace(/^./,function(a){return a.toUpperCase()}),a.each(this.panel.notifications,function(a){i.push(a.msgID)}),e="?s=2146128176&prop="+h+"&lt="+g+"&r="+encodeURIComponent(location.href)+"&t="+Math.random()+"&device="+c+"&dmsgs="+encodeURIComponent(i.join()),f={g:i.join(),lt:g,device:c,prop:h},this._fireUltBeacon("p",e,f)}}},"1.0",{requires:["node","event-custom"]});YUI.add("ucs-notifications-badge",function(a){var b=a.one("#yucs-profile"),c="V(h)",d="V\\(h\\)";a.namespace("ucs.Notifications"),a.ucs.Notifications.Badge=function(){this.node=a.one(a.ucs.Notifications.config.badgeContainerNode),this.count=0,this.isFrozen=!1,this.init()},a.ucs.Notifications.Badge.prototype={init:function(){this.node&&(b&&(b.on("mouseenter",a.bind(this.handlePanelOpen,this)),b.on("mouseleave",a.bind(this.handlePanelClose,this))),a.Global.on("ucs-notifications:countChange",a.bind(this.handleCountChange,this)))},handlePanelOpen:function(a){this.isFrozen=!0},handlePanelClose:function(a){this.isFrozen=!1,this.handleCountChange()},handleCountChange:function(b){b&&b.hasOwnProperty("count")&&this.setCount(b.count),this.isFrozen||(this.node.setHTML(this.count),this.count>0?(this.display(),a.ucs.Notifications.helpers.setNTSubCookie(),a.fire("trackBadge",{debug:!1})):this.hide())},setCount:function(a){a>99?this.count="+99":this.count=a},display:function(){this.node.removeClass(d)},hide:function(){this.node.hasClass(d)||this.node.addClass(c)}}},"1.0",{requires:["node","event-mouseenter"]});YUI.add("ucs-notifications-footer",function(a){var b={};a.namespace("ucs.Notifications"),a.ucs.Notifications.Footer=function(c){b=a.ucs.Notifications.config,this.messages={empty:{strings:{},template:"",links:{}},loading:{strings:{},template:b.templates.footer.loading,links:{}},view_all:{template:b.templates.footer.view_all,strings:{view_all_notifications:b.localizedStrings.view_all_notifications},links:{notification_center:b.links.notificationCenterUrl}},learn_more:{template:b.templates.footer.learn_more,strings:{no_notifications:b.localizedStrings.no_notifications,learn_more:b.localizedStrings.learn_more},links:{learn_more:b.links.learnMoreUrl}},sign_in:{template:b.templates.footer.sign_in,strings:{sign_in:b.localizedStrings.sign_in},links:{notification_center:b.links.notificationCenterUrl}},sign_in_new:{template:b.templates.footer.sign_in_new,strings:{new_notifications:b.localizedStrings.new_notifications,verify_password:b.localizedStrings.verify_password},links:{notification_center:b.links.notificationCenterUrl}},error:{template:b.templates.footer.error,strings:{unavailable:b.localizedStrings.unavailable,try_again:b.localizedStrings.try_again},links:{}},error_401_out:{template:b.templates.footer.view_all,strings:{view_all_notifications:b.localizedStrings.view_all_notifications},links:{notification_center:b.links.notificationCenterUrl}}},this.message=this.messages.hasOwnProperty(c)?c:"empty",this.template=this.messages[this.message].template||b.templates[this.message]||"",this.strings=this.messages[this.message].strings,this.links=this.messages[this.message].links},a.ucs.Notifications.Footer.prototype={render:function(){var b=new a.Template;return b.render(this.template,{strings:this.strings,links:this.links})}}},"1.0",{requires:["node","template"]});YUI.add("ucs-notifications-panel",function(a){a.namespace("ucs.Notifications");var b,c={};a.ucs.Notifications.Panel=function(){c=a.ucs.Notifications.config,this.container=c.panelContainerNode,this.notifications=[],this.badge=new a.ucs.Notifications.Badge,this.footer=new a.ucs.Notifications.Footer("empty"),this.tracker=new a.ucs.Notifications.Tracker(this),this.init()},a.ucs.Notifications.Panel.prototype={init:function(){b=a.ucs.Notifications.helpers,this.addEventHandlers()},addEventHandlers:function(){a.one("#yucs-profile").on("mouseenter",a.bind(this.handlePanelopen,this)),a.one("#yucs-notifications")?(a.one("#yucs-notifications").delegate("click",a.bind(this.handleHeaderClick,this),".NotiHeader a"),a.one("#yucs-notifications").delegate("click",a.bind(this.handleNotificationClick,this),".Notification a"),a.one("#yucs-notifications").delegate("click",a.bind(this.handleFooterClick,this),".NotiFooter a")):a.one("#yucs-notif-panel")&&(a.one("#yucs-notif-panel").delegate("click",a.bind(this.handleHeaderClick,this),".NotiHeader a"),a.one("#yucs-notif-panel").delegate("click",a.bind(this.handleNotificationClick,this),".Notification a"),a.one("#yucs-notif-panel").delegate("click",a.bind(this.handleFooterClick,this),".NotiFooter a"))},handlePanelopen:function(){this.display({loader:!0,qty:c.notifCount})},handleHeaderClick:function(b){var c=b.currentTarget.getAttribute("href");b.preventDefault(),a.fire("trackHeaderCTA",{debug:!1}),a.later(200,this,function(){window.location.href=c})},handleNotificationClick:function(b){var c=b.currentTarget.getAttribute("href"),d=b.currentTarget.getAttribute("notid"),e=Number(b.currentTarget.getAttribute("cpos")),f=this.notifications[e-1];f.position=e,b.preventDefault(),a.fire("ucs-notifications:setNotificationState",{notificationId:d,state:"seen"}),a.fire("trackNotificationCTA",{notification:f,debug:!1}),a.later(500,this,function(){window.location.href=c})},handleFooterClick:function(b){var c=b.currentTarget.getAttributes("href");b.preventDefault(),a.fire("trackFooterCTA",{debug:!1}),a.later(200,this,function(){window.location.href=c})},getNotifications:function(b,c){a.fire("ucs-notifications:getNotifications",{count:b,callback:a.bind(c,this)})},display:function(b){var d=a.one(this.container);b.loader&&d.setHTML(this.render(b)),"signedin"===c.authState?this.getNotifications(b.qty,function(b){var c={notifications:b.notifications,error:b.error};this.notifications=b.notifications||[],d.setHTML(this.render(c)),a.fire("trackPanel",{debug:!0})}):(d.setHTML(this.render({})),a.fire("trackPanel",{debug:!0}))},render:function(b){var d=new a.Template,e=b.notifications||[],f={};if(0!==e.length){f.headerRowHTML=this.renderHeaderRow()||"",f.notificationsHTML="";for(var g=0;g<e.length;g++)f.notificationsHTML+=e[g].render(c.templates.notification),"new"===e[g].state&&a.fire("ucs-notifications:setNotificationState",{notificationId:e[g].id,state:"notseen"});return this.footer=new a.ucs.Notifications.Footer(this.getFooterMessage(b)),f.footerRowHTML=this.footer.render(),d.render(c.templates.panel,f)}},renderHeaderRow:function(){var b=new a.Template;return b.render(c.templates.header,{localizedStrings:c.localizedStrings,notificationCenterUrl:c.links.notificationCenterUrl,manageNotificationsUrl:c.links.manageNotificationsUrl})},getFooterMessage:function(a){if("middleauth"===c.authState)return this.badge.count>0?"sign_in_new":"sign_in";if(a){if(a.loader===!0)return"loading";if(a.empty)return"empty"}return a.error?401===a.error?"error_401_out":"error":a.notifications&&a.notifications.length>0?"view_all":"learn_more"}},a.ucs.Notifications.Notification.prototype={getTimestring:function(){return a.ucs.Timestamp.getTimeStamp({date:new Date(1e3*parseInt(this.timestamp,10)),dateRef:new Date,locale:c.languagetag})},getDescription:function(){var a="string"==typeof this.text?this.text:"",b=this.config.descriptionMaxChars-3,c=!1;return a.indexOf("{UH_b_start}")>=0&&a.indexOf("{UH_b_end}")<b+13&&(c=!0,b+=17),c?(a=a.replace("{UH_b_start}","<strong>"),a=a.replace("{UH_b_end}","</strong>")):(a=a.replace("{UH_b_start}",""),a=a.replace("{UH_b_end}","")),a.length>=b&&(a=a.substring(0,b)+"..."),a},getImage:function(){return this.thumbnail?this.thumbnail:this.icon?this.icon:this.favicon?this.favicon:c.notification.defaultImage},getImageSource:function(){return this.thumbnail?"thumbnail":this.icon?"icon":this.favicon?"favicon":"default"},render:function(b){var c=new a.Template;return c.render(b,{notification:this})}}},"1.0",{requires:["node","template","event","cookie","ucs-timestamp-library","ucs-notifications-store","ucs-notifications-tracker","ucs-notifications-footer","ucs-notifications-badge"]});window.ucs&&window.ucs.YObj&&window.ucs.YObj.use("node","cookie","ucs-notifications-store","ucs-notifications-tracker","ucs-notifications-badge","ucs-notifications-footer","ucs-notifications-panel",function(a){var b,c,d=window.ucs.Meta||{data:{}},e=a.one("#yucs-notifications");if(e){a.namespace("ucs.Notifications");var f=!!a.one("#UH"),g=!!a.one("#yucs-fs-acct"),h={panel:'<ul class="Pos(r) Mb(0)! Whs(nw) W(100%) P(0)!"><%== this.headerRowHTML %><%== this.notificationsHTML %><%== this.footerRowHTML %></ul>',header:'<li class="Px(16px) Bdw(0) Bdbw(1px)! Bdc(#e2e2e6) Bds(s) uhNotiHeader"><ul class="Whs(n) Zoom Ta(j) Lts(-0.31em) Tren(os) M(0)! Cf P(0)!"><li class="Lts(n) Va(m) D(ib) Zoom Fz(11px) C(#000) Fl(start) Lh(3)!"><%= this.localizedStrings.notifications %></li> <li class="Lts(n) Va(m) D(ib) Zoom Fz(11px) Fl(end) Pend(4px)"><a class="D(b) C(#324fe1)! Lh(3)!" href="<%= this.manageNotificationsUrl %>"><%= this.localizedStrings.manage %></a></li></ul></li>',notification:'<li class="Px(16px) Bdw(0) Bdbw(1px)! Bds(s) Bdc(#e2e2e6) uhNotification Bgc(#f2f4fe):h <%= (this.notification.state === "seen") ? "Fw(200) Bgc(#f5f5f5) Op(.66)":"" %> "><a class="Pos(r) D(b) C(#000)!" href="<%= this.notification.link %>" notid="<%= this.notification.id %>" cpos="<%= this.notification.position %>" target="_self"><div class="W(4/5) D(ib) Zoom Lts(n) Tren(a) Va(t) Whs(n) Pb(4px)" style="line-height:14px;"><div class="M(0) Mt(10px) P(0) Ell Fz(13px) uhNotification:h_Td(u) <%= (this.notification.state === "new") ? "Fw(b)":"" %> "><%== this.notification.title %></div><div class="M(0) P(0) Fw(200) Fz(12px)"><%== this.notification.getDescription() %></div><div class="Mx(0) My(4px) P(0) Fw(200) Op(.66) Fz(10px)"><%== this.notification.getTimestring() %></div></div><img class="M(a) T(0) B(0) Pos(a)" src="<%= this.notification.getImage() %>" style="width:55px;  margin-left:4px;<%= (this.notification.getImageSource() === "thumbnail") ? "width: 50px; margin-left: 7px;":""%>"></a></li>',footer:{error:'<li class="Py(10px) Px(16px) Bdw(0) Bdbw(1px)! Bds(s) Bdc(#e2e2e6) Fz(13px) Fw(400) Whs(n) uhNotiFooter"><%== this.strings.unavailable %>. <%== this.strings.try_again %>.</li>',learn_more:'<li class="Bdw(0) Bdbw(1px)! Bds(s) Bdc(#e2e2e6) Fz(13px) Fw(400) Whs(n) C(#000) Bgc(#f2f4fe):h uhNotiFooter"><a class="Td(n) D(b) Py(10px) Px(16px) " href="<%= this.links.learn_more %>"><span><%== this.strings.no_notifications %><br><%== this.strings.learn_more %></span></a></li>',loading:'<li class="Py(10px) Px(16px) Bdw(0) Bdbw(1px)! Bds(s) Bdc(#e2e2e6) Ta(c) Fz(13px) Fw(200) Whs(n) C(#000)"><img src="https://s.yimg.com/ok/u/assets/img/spinner-24x24-anim.gif"></li>',sign_in:'<li class="Bdw(0) Bdbw(1px)! Bds(s) Bdc(#e2e2e6) Fz(13px) Fw(400) Whs(n) C(#000) Bgc(#f2f4fe):h uhNotiFooter"><a class="Td(n) D(b) Py(10px) Pstart(16px) " href="<%= this.links.notification_center %>"><span class=""><%== this.strings.sign_in %>.</span></a></li>',sign_in_new:'<li class="Bdw(0) Bdbw(1px)! Bds(s) Bdc(#e2e2e6) Fz(13px) Fw(400) Whs(n) C(#000) Bgc(#f2f4fe):h uhNotiFooter"><a class="Td(n) D(b) Py(10px) Px(16px) " href="<%= this.links.notification_center %>"><span class=""><%== this.strings.new_notifications %>.<br><%== this.strings.verify_password %>.</span></a></li>',view_all:'<li class="Bdw(0) Bdbw(1px)! Bds(s) Bdc(#e2e2e6) Whs(n) uhNotiFooter"><a class="Fz(13px) Fw(n) Td(n) Td(n)!:h Bgc(#f2f4fe):h D(b) Py(10px)! Px(16px)! C(#000)!" href="<%= this.links.notification_center %>"><%== this.strings.view_all_notifications %></a></li>'}};f&&g&&(e.addClass("Mx(-10px)"),h.panel='<ul class="Pos(r) M(0)! P(0)! Whs(nw) W(100%)"><%== this.headerRowHTML %><%== this.notificationsHTML %><%== this.footerRowHTML %></ul>',h.header='<li class="Px(10px) M(0) uhNotiHeader D(ib) Zoom Va(t) Fz(11px) C(#000)"><%= this.localizedStrings.notifications %></li>',h.notification='<li class="Px(10px) C(#000) uhNotification Pos(r) <%= (this.notification.state === "seen") ? "Op(.33)":"" %> "><a class="Pos(r) D(b) Py(6px) C(#000)! Cf" href="<%= this.notification.link %>" notid="<%= this.notification.id %>" cpos="<%= this.notification.position %>" target="_self"><div class="W(3/4) D(ib) Zoom Lts(n) Tren(a) Va(t) Whs(n) Fl(start) Lh(15px)"><div class="M(0) P(0) Ell Fz(13px) uhNotification:h_Td(u) <%= (this.notification.state === "new") ? "Fw(b)":"" %> "><%== this.notification.title %></div><div class="M(0) P(0) Ell uhNotifDescription C(#abaeb7)! Fz(13px)" ><%== this.notification.getDescription() %></div></div><div class="Mx(0) P(0) Fw(200) Op(.66) Fl(end) W(1/4) D(ib) Zoom Lts(n) Tren(a) Va(t) Ta(end) Ell Fz(10px)"><%== this.notification.getTimestring() %></div></a></li>',h.footer.view_all='<li class="Whs(n) uhNotiFooter"><a class="Fz(13px) Fw(n) D(b) Td(n) Td(u):h C(#324fe1) Pb(10px) Px(10px)" href="<%= this.links.notification_center %>"><%== this.strings.view_all_notifications %></a></li>'),a.ucs.Notifications.config={environment:{scheme:"https://",host:"ucs.query.yahoo.com",port:":443",path:"/v1/console/yql"},crumb:d.data.crumb||e.getAttribute("data-crumb"),guid:d.data.guid||e.getAttribute("data-guid"),authState:d.data.authState||e.getAttribute("data-authstate"),languagetag:d.data.languagetag||e.getAttribute("data-languagetag"),device:d.data.device||e.getAttribute("data-device"),property:d.data.property||e.getAttribute("data-property"),badgeContainerNode:"#yucs-notif-count-con",panelContainerNode:"#yucs-notifications",notifCount:e.getAttribute("data-notifCount")||4,links:{notificationCenterUrl:e.getAttribute("data-notificationCenterUrl")||"https://yahoo.com/notifications",learnMoreUrl:e.getAttribute("data-learnMoreUrl")||"https://yahoo.com/notifications/ob",manageNotificationsUrl:e.getAttribute("data-manageNotificationsUrl")||"https://yahoo.com/notifications/edit"},localizedStrings:{learn_more:e.getAttribute("data-learnMore-txt")||"Learn how to enable notifications.",manage:e.getAttribute("data-manage-txt")||"Manage",new_notifications:e.getAttribute("data-newNotifications-txt")||"You have new notifications",no_notifications:e.getAttribute("data-noNotifications-txt")||"You have no notifications.",notification:e.getAttribute("data-notification-txt")||"Notification",notifications:e.getAttribute("data-notifications-txt")||"Notifications",sign_in:e.getAttribute("data-signIn-txt")||"Verify your password to view notifications",try_again:e.getAttribute("data-tryAgain-txt")||"Please try again later",unavailable:e.getAttribute("data-unavailable-txt")||"Notifications are temporarily unavailable",verify_password:e.getAttribute("data-verifyPassword-txt")||"To view them, verify your password",view_all:e.getAttribute("data-viewAll-txt")||"View all",view_all_notifications:e.getAttribute("data-viewAllNotifications-txt")||"View All Notifications"},templates:h},/^zh-hant-/i.test(a.ucs.Notifications.config.languagetag)&&(a.ucs.Notifications.config.templates.header='<li class="Px(16px) Bdw(0) Bdbw(1px)! Bdc(#e2e2e6) Bds(s) uhNotiHeader"><ul class="Whs(n) Zoom Ta(j) Lts(-0.31em) Tren(os) M(0)! Cf P(0)!"><li class="Lts(n) Va(m) D(ib) Zoom Fz(13px) Fw(b) C(#000) Fl(start) Mb(6px)">通知中心</li> </ul></li>',a.ucs.Notifications.config.templates.footer.view_all='<li class="Pos(r) Pb(1px) T(-1px) Bgc(#fff)"></li>',a.ucs.Notifications.config.notifCount=20,a.ucs.Notifications.config.templates.notification='<li class="Px(16px) Bdw(0) Bdbw(1px)! Bds(s) Bdc(#e2e2e6) uhNotification"><a class="Pos(r) D(b) C(#000)!" href="<%= this.notification.link %>" notid="<%= this.notification.id %>" cpos="<%= this.notification.position %>" target="_self"><div><div class="W(3/4) D(ib) Zoom Lts(n) Tren(a) Va(t) Whs(nw) Pb(4px) M(0) Mt(10px) P(0) Ell Fz(13px) Fw(b) uhNotification:h_Td(u)"><%== this.notification.title %></div><div class="W(1/4) D(ib) Mx(0) My(4px) P(0) Ta(end) Mt(10px) Fw(200) Op(.66) Fz(10px)"><%== this.notification.getTimestring() %></div></div><div class="W(4/5) Va(t) Ta(j) Whs(n) D(ib) M(0) P(0) Fw(200) Fz(12px)"><%== this.notification.getDescription() %><div class="Py(6px) C(#32007f)"><%== this.notification.appname %></div></div><img class="M(a) D(ib) Va(t)" src="<%= this.notification.getImage() %>" style="width:55px;  margin-left:4px;<%= (this.notification.getImageSource() === "thumbnail") ? "width: 50px; margin-left: 7px;":""%>"></a></li>'),a.ucs.Notifications.helpers={isNTSubCookieSet:function(){return a.Cookie.getSub("ucs","nt")?!0:!1},setNTSubCookie:function(){var b=(new Date).getTime();a.Cookie.setSub("ucs","nt",b,{expires:new Date((new Date).setYear((new Date).getFullYear()+1)),path:"/",domain:"yahoo.com"})}},b=a.ucs.Notifications.Store.getInstance(),c=new a.ucs.Notifications.Panel}});YUI.add("ucs-mailcount-v2",function(a){a.namespace("ucs");var b="https://s.yimg.com/kx/yucs/uh3s/mail-link/140/js/mail_preview_ssl-min.js",c="#yucs-mail",d="#yucs-mail-panel",e=window.ucs.DN_CLS,f=window.ucs.escapeRegex(e);a.ucs.MailCount=function(b){this.mailcount=b,this.mailLink=a.one(c+" .yucs-menu-link"),this.mailPreview=null,this.init()},a.ucs.MailCount.prototype={init:function(){this.property=a.one(ucs.UH_MAIN_ID).getAttribute("data-property"),this.crumb=this.mailcount.getAttribute("data-mc-crumb"),this.maxCountDisplay="99+",this.mailUrl=this._getMailCountURI(),this.count=0,this.mailCountTimer=null,this.mouseMoveHandle=null,this.keypressHandle=null,this.pollingDurationTimer=null,this.pollingDuration=6e5,this.mailCountPollingInterval=12e4,a.UA.ie?(a.one("document").on("focus",this._handleWindowFocus,this),a.one("document").on("blur",this._handleCancelMailCountFetch,this)):(a.one("window").on("focus",this._handleWindowFocus,this),a.one("window").on("blur",this._handleCancelMailCountFetch,this)),this._initPollingTimer(),top===window.self&&"signedout"!==this.mailcount.getAttribute("data-authstate")&&(location.href.match(/ucs_mail_preview_popupsignin=1/)?this._loadMailPreviewScript():(this.mailLink.once("yucs-mailcount|mouseenter",this._loadMailPreviewScript,this),this.mailLink.once("yucs-mailcount|focus",this._loadMailPreviewScript,this))),this._getMailCount(),this.mailcount.removeClass("yucs-activate")},_getMailCountURI:function(){var b=this.mailcount,c=b.getData("uri-scheme"),d=b.getData("uri-path"),e=a.QueryString.stringify({wssid:this.crumb,appid:"UnivHeader"}),f=null;return f=c+"://"+d+"?"+e+"&callback={callback}"},_processMailCount:function(a){if(a.newmailcount){var b=parseInt(a.newmailcount,10);this.count=b,this.mailPreview&&this.mailPreview.setMailCount(this.count),b>0?(b>99&&(b=this.maxCountDisplay),this.mailcount.set("innerHTML",b),this.mailcount.removeClass(f)):this.mailcount.addClass(e)}},_sendMailCountRequest:function(b,c,d){this.mailCountTimer=a.later(c,this,function(){this._service=new a.JSONPRequest(b+"&ymreqid:"+window.ucs.ymreqid(),{on:{success:a.bind(this._processMailCount,this),timeout:function(b){a.log("[ERROR] Fail to send mail count request.")}},timeout:3e3,end:this.requestInProgress=!1}),this._service.send()},null,d)},_getMailCount:function(){this._sendMailCountRequest(this.mailUrl,0,!1),this._sendMailCountRequest(this.mailUrl,this.mailCountPollingInterval,!0)},_initPollingTimer:function(){this.pollingDurationTimer=a.later(this.pollingDuration,this,this._cancelMailCountFetch,null,!1),this.mouseMoveHandle&&this.mouseMoveHandle.detach(),this.keyPressHandle&&this.keyPressHandle.detach()},_handleWindowFocus:function(a){this.mailCountTimer&&this.mailCountTimer.cancel(),this.pollingDurationTimer&&(this.pollingDurationTimer.cancel(),this._initPollingTimer()),this._getMailCount()},_cancelMailCountFetch:function(b){b||(this.mouseMoveHandle=a.one("window").on("mousemove",this._handleWindowFocus,this),this.keyPressHandle=a.one("window").on("keypress",this._handleWindowFocus,this)),this.mailCountTimer&&this.mailCountTimer.cancel()},_loadMailPreviewScript:function(c){c&&c.preventDefault(),this.mailLink.detach("yucs-mailcount|*");var e=c?c.currentTarget:this.mailLink,f=this.count,g=a.one(d),h=c&&"focus"===c.type?!0:!1,i=this,j={onSuccess:a.bind(function(){document.getElementById(ucs.UH_MAIN_ID);ucs.YObj.use("ucs-mail-preview",function(a){i.mailPreview=new a.ucs.MailPreview({mailLink:e,mailCount:f,mailCountNode:i.mailcount,mailPanel:g}),i.mailPreview._showMenu(),h&&(i.mailPreview._hideMenu(),i.mailLink.focus())})},this)};g&&a.Get.script(b,j)}}},"1.0",{requires:["node","event","jsonp","event-mouseenter","querystring-stringify"]}),function(){window.ucs&&window.ucs.YObj&&ucs.YObj.use("node","ucs-mailcount-v2",function(a){var b,c=a.one(ucs.UH_MAIN_ID).one(".MailBadge.yucs-activate");c&&(b=new a.ucs.MailCount(c))}),window.opener&&window.location.href.match(/ucs_mail_preview_popupsignin=1/)&&(window.opener.location=window.location,window.close())}();YUI.add("yhelp-bootstrap",function(a){if(YUI&&YUI.namespace){var b=YUI.namespace("YHELP"),c="v26s";b.initiate||(b.initiate=function(b){var d={groups:{yhelp:{base:"https://s.yimg.com/pj/inproduct/"+c,comboBase:"https://s.yimg.com/zz/combo?",combine:!0,root:"/pj/inproduct/"+c,modules:{"yhelp-main":{requires:["node","yhelp-css"],path:"/js/yui/yhelp-main.js"},"yhelp-constants":{path:"/js/yui/yhelp-constants.js"},"yhelp-jsonp":{path:"/js/yui/yhelp-jsonp.js"},"yhelp-css":{path:"/css/yhelp-all.css",type:"css"}},timeout:1e4,debug:!1,filter:"raw"}}};a.applyConfig(d),YUI.namespace("YHELP.config"),YUI.YHELP.tracking||(YUI.YHELP.tracking={init:{s:(new Date).getTime()}}),a.use("yhelp-constants","yhelp-main","yhelp-jsonp","node","event","io-form","panel","dd-plugin","querystring",function(a){var c=b&&b.locale?b.locale:YUI.YHELP.config.locale?YUI.YHELP.config.locale:a.Constants.DEFAULT_LOCALE;console.log("locale from config: "+c),a.Constants.LOCALE_MAPPER[c.toLowerCase()]&&(c=a.Constants.LOCALE_MAPPER[c.toLowerCase()]),console.log("locale from mapper: "+c);var d=b&&b.product?b.product:YUI.YHELP.config.product;if(a.Constants.PRODUCT_MAPPER[d]&&(d=a.Constants.PRODUCT_MAPPER[d]),d){YUI.YHELP.config.locale=c,YUI.YHELP.config.product=d;var e=b&&b.alignNode?b.alignNode:YUI.YHELP.config.alignNode;e&&e.get("region")&&(YUI.YHELP.config.position=[e.get("region").right-390,e.get("region").height+e.getY()]),YUI.YHELP.config.position=b&&b.position?b.position:YUI.YHELP.config.position?YUI.YHELP.config.position:a.Constants.PANEL_POSITION,YUI.YHELP.config.modal=b&&"undefined"!=typeof b.modal?b.modal:"undefined"!=typeof YUI.YHELP.config.modal?YUI.YHELP.config.modal:a.Constants.PANEL_MODAL,YUI.YHELP.config.zindex=b&&a.Lang.isNumber(b.zindex)?b.zindex:YUI.YHELP.config.zindex?YUI.YHELP.config.zindex:a.Constants.PANEL_ZINDEX,YUI.YHELP.panel||(YUI.YHELP.panel=new a.Panel({contentBox:a.Node.create("<div />"),bodyContent:'<div style="max-width:390px" id=\''+a.Constants.INSTR_DIV+'\'><div style="color: #000; width:370px;" class="yhelp-loader"><img src=\'https://s.yimg.com/pj/inproduct/v26s/img/l.gif\'></div></div>',xy:YUI.YHELP.config.position,modal:YUI.YHELP.config.modal,render:a.Constants.CONTAINER_DIV,visible:!1,zIndex:YUI.YHELP.config.zindex,buttons:{}}),YUI.YHELP.panel.plug(a.Plugin.Drag,{handles:[a.Constants.PANEL_DRAG_HANDLE_CLS]}),YUI.YHELP.panel.after("visibleChange",function(a){YUI.YHELP.visible=YUI.YHELP.panel.get("visible")})),YUI.YHELP.panel.show(),YUI.namespace("YHELP.requests"),YUI.namespace("YHELP.requests.templates_loaded");var f=[];"undefined"!=typeof dust&&(YUI.YHELP.requests.dustjs_loaded=!0),YUI.YHELP.requests.dustjs_loaded||f.push(a.Constants.DUST_JS_URL),YUI.YHELP.requests.templates_loaded[c]||a.Array.each(a.Constants.DUST_TEMPLATES_URL,function(b,d){f.push(a.Lang.sub(b,{locale:c}))});var g=function(){a.Help.load(b)};f.length>0?a.Get.load(f,{timeout:a.Constants.TIMEOUT_MS},function(b){return b?void a.log("Error loading Help JS: "+b[0].error,"error"):(YUI.YHELP.requests.dustjs_loaded=!0,YUI.YHELP.requests.templates_loaded[c]=!0,void g())}):YUI.YHELP.requests.dustjs_loaded&&YUI.YHELP.requests.templates_loaded[c]&&g()}else window.open(a.Lang.sub(a.Constants.HELP_URL,{locale:c,product:d}),"_blank")})})}else console.log("YUI not found.")});YUI.add("ucs-helpmenu",function(a){"use strict";a.namespace("ucs.HelpMenu");var b="ucs:helpMenuShow",c="ucs:helpDebugMenuShow",d="ucs:helpMenuItemClick",e="ucs:helpDebugMenuItemClick",f="ucs:utilityMenuShow",g="ucs:utilityMenuItemClick",h="click",i="a",j="D(n)",k=window.ucs.escapeRegex,l="ul",m=".uhFancyBox",n="yucs-hm-activate",o={eventName:"hvr",keys:{sec:"uh-d",slk:"cogop",_p:"0",rspns:"op",t1:"a1",t2:"uh-d",t3:"tl-lst",t4:"cog-mu",t5:"cogop",elm:"tl",elmt:"cog",itc:"1"}},p=a.one("#yucs-meta").getAttribute("data-property"),q=YUI.namespace("YHELP.config"),r=a.one("#yucs-meta");r&&(q.locale=r.getData("languagetag"),q.product=r.getData("property"),r.getData("firstname")&&(q.user=r.getData("firstname"))),q.alignNode=a.one("#UH"),a.ucs.HelpMenu=function(b){this.shown=!1;var c=b.all(m).item(0);c.hasClass(n)&&(this.ylt=c.getAttribute("data-yltmenushown"),a.ucs.HelpMenu.superclass.constructor.call(this,b,{panel:"#yucs-help_inner",rapidData:o,menuGroupPlugin:!0}),this.initialList=this.menu.panel.one(l),b.trigger.setAttribute("data-mad","true"),"mail"===p&&(this.loading=a.Node.create('<div class="yucs-mail-loading Py(20px) Mt(8px)" style="width:50px"></div>'),this.menu.panel.appendChild(this.loading),this.initialList.addClass(j)),this.menuItemsInitialized=!1,this.debugItemsInitialized=!1,this._initCustomEvents(),c.removeClass(n))},a.extend(a.ucs.HelpMenu,a.ucs.MenuUtils,{_initCustomEvents:function(){this.publish(b,{broadcast:2,emitFacade:!0}),this.publish(c,{broadcast:2,emitFacade:!0}),this.publish(d,{broadcast:2,emitFacade:!0}),this.publish(e,{broadcast:2,emitFacade:!0}),this.publish(f,{broadcast:2,emitFacade:!0}),this.publish(g,{broadcast:2,emitFacade:!0}),a.Global.on("ucs:utilityMenuItems",this._handleHelpMenuItems,this,{location:"top",menuType:"minty-utility-item"}),a.Global.on("ucs:helpMenuItems",this._handleHelpMenuItems,this,{location:"bottom",menuType:"minty-help-item"}),a.Global.on("ucs:helpDebugMenuItems",this._handleHelpDebugMenuItems,this,{location:"bottom",menuType:"minty-debug-item"}),a.one("#yucs-help").delegate("click",function(b){b.target.getAttribute("data-inproducthelp")&&(YUI.YHELP.config.product=b.target.getAttribute("data-inproducthelp"),r&&(YUI.YHELP.config.partnerCobrand=r.getAttribute("data-cobrand"),YUI.YHELP.config.partnerForceCobrand=r.getAttribute("data-forcecobrand")),YUI.YHELP.config.uhClickEvent=b,a.use("yhelp-bootstrap",function(a){"function"==typeof YUI.YHELP.initiate&&YUI.YHELP.initiate()}))},"a[data-inproducthelp]"),this.menu.on("ucs:showMenu",this._showMenu,this),this.menu.panel.delegate(h,this._handleMenuItemClick,"li a",this)},_showMenu:function(d){d&&(d.ctrlKey||d.metaKey)&&d.shiftKey?(this.fire(c),this.debugItemsInitialized===!1?a.later(4e3,this,function(){this.fire(c)}):this._showDebugMenuItems()):(this.fire(b),this.fire(f),this.menuItemsInitialized===!1?a.later(4e3,this,function(){this.fire(b),this.fire(f)}):this._showMenuItems())},_hideLoading:function(){this.loading&&this.loading.addClass(j)},_showDebugMenuItems:function(){var a=this.menu.panel;this._hideLoading(),a.all("ul").addClass(j),a.all("ul.debug-item").removeClass(k(j))},_showMenuItems:function(){var a=this.menu.panel;this._hideLoading(),a.all("ul").removeClass(k(j)),a.all("ul.debug-item").addClass(j)},_handleKeyup:function(a){27===a.keyCode||9===a.keyCode?(this.menu.one(i).focus(),this._hideMenu()):40!==a.keyCode||this.keyedup||(this.panel.one(i)&&this.panel.one(i).focus(),this.keyedup=!0)},_handleHelpMenuItems:function(b,c){a.log("help menu items received");var d,e,f=c&&c.location||"top",g=c&&c.menuType||"minty-help-item";if(b.menuGroups&&b.menuGroups.length){if(d=b.menuGroups,e=this.menu.panel,b.reset&&e&&e.all("."+g).remove(!0),this.menu.menugroup._addMenuGroups(d,f,!1,g),"sports"===p){var h,i=a.one("#yuhead-help-panel");i&&(h=i.one(".yucs-acct-link"),h=h&&h.get("parentNode").remove()||null,i.get("children").remove(!0),h&&(h.replaceClass(k("Py(8px)"),"Pt(8px)"),i.prepend(h)),i.replaceClass(k("Bdw(0) Bdbw(1px) Bds(s) Bdc(#e2e2e6)"),""))}this._showMenuItems(),this.menu.fire("ucs:resetPosition"),this.menuItemsInitialized=!0,a.Global.fire("ucs-rapid:refreshmodules","uhWrapper","0")}},_handleHelpDebugMenuItems:function(b){a.log("help menu items received");var c,d;b.menuGroups&&b.menuGroups.length&&(c=b.menuGroups,d=this.menu.panel,b.reset&&d&&d.all(".minty-debug-item").remove(!0),this.menu.menugroup._addMenuGroups(c,"top",!0,"minty-debug-item"),this._showDebugMenuItems(),this.menu.fire("ucs:resetPosition"),this.debugItemsInitialized=!0,a.Global.fire("ucs-rapid:refreshmodules","uhWrapper","0"))},_handleMenuItemClick:function(b){a.log("help menu item click");var c,f,h,i;if(c=b.target,c=c.ancestor("a",!0),f=c.getAttribute("data-mad"),h=c.getAttribute("data-customevt"),i=c.ancestor("li").hasClass("disabled"))return void b.halt();if(h&&b.preventDefault(),!i){var j={actionData:f},k=c.ancestor("ul");k.hasClass("debug-item")?this.fire(e,j):k.hasClass("minty-utility-item")?this.fire(g,j):this.fire(d,j)}}}),a.augment(a.ucs.HelpMenu,a.EventTarget)},"1.0",{requires:["oop","node","node-event-delegate","event-custom","substitute","ucs-menu-utils"]}),function(){window.ucs&&window.ucs.YObj&&ucs.YObj.use("node","ucs-helpmenu",function(a){var b,c=a.one("#yucs-help");c&&(b=new a.ucs.HelpMenu(c))})}();window.ucs||(window.ucs={}),window.ucs.api=window.ucs.api||{},YUI.add("ucs-uh_locdrop",function(a){"use strict";a.namespace("ucs"),a.ucs.uh_locdrop=function(b,c,d){var e=b,f=c,g="locdrop.query.yahoo.com/v1/public/yql",h={env:""},i={proto:"https",base:"://"+g+"?"},j=function(a){var b=a.query.results.locdrop,c=b.status.code,e="OK"===c?"":b.status.message;d&&d("write complete: "+c+" ("+e+")")},k=function(b){d&&d("locdropSuccess called");var c='insert into user.location.public(type, lat, lon, radius, version, crumb, app) values ("current", "'+Math.round(1e6*b.coords.latitude)/1e6+'", "'+Math.round(1e6*b.coords.longitude)/1e6+'", "'+b.coords.accuracy+'", "v4", "'+f+'", "'+e+'")';d&&d("YQL called: "+c);var g=new a.YQLRequest(c,j,h,i);g.send()},l=function(a){d&&d("locdropFail called: "+a.message)};a.ucs.inject_getlocation(k,l)},a.ucs.inject_getlocation=function(a,b){var c=window.navigator.geolocation.getCurrentPosition;return"function"==typeof c?(window.navigator.geolocation.getCurrentPosition=function(d,e,f){arguments.length?d&&d.call?c.call(window.navigator.geolocation,function(b){a.call(null,b),d.call(null,b)},function(a){b.call(null,a),e&&e.call(null,a)},f):c.call(window.navigator.geolocation,d):c.call(window.navigator.geolocation)},!0):!1}},"1.0",{requires:["yql"]}),function(){window.ucs.YObj.use("node","ucs-uh_locdrop",function(a){var b=a.one("#yucs-location-js.yucs-location-activate");if(b){b.removeClass("yucs-location-activate");var c=(b.getAttribute("data-crumb"),b.getAttribute("data-appid"));window.navigator&&window.navigator.geolocation&&document.getElementById("location-crumb")&&a.ucs.uh_locdrop(c,document.getElementById("location-crumb").value)}})}();